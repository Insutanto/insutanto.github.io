<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Python memory profiler 上手实践 - 指间须臾</title><meta name="gridsome:hash" content="f083906a00e5fb8455e57cbaed6089a7fc1c675c"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.19"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" data-key="description" name="description" content="指间代码构筑程序世界，指间文字流淌须臾所思，指间快门定格须臾所见。欢迎来到指间须臾，你可以叫我许臾/Insutanto。"><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="96x96" href="/assets/static/favicon.b9532cc.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/assets/static/favicon.f22e9f3.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="152x152" href="/assets/static/favicon.62d22cb.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="120x120" href="/assets/static/favicon.1539b60.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="167x167" href="/assets/static/favicon.dc0cdc5.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="180x180" href="/assets/static/favicon.7b22250.9bb7ffafafc09ac851d81afb65b8ef59.png"><link rel="preload" href="/assets/css/1.styles.55ffadaf.css" as="style"><link rel="preload" href="/assets/js/app.a8ef14bf.js" as="script"><link rel="preload" href="/assets/js/page--src--templates--blog-post-vue.7aadcd63.js" as="script"><link rel="prefetch" href="/assets/js/page--node-modules--gridsome--app--pages--404-vue.374939f2.js"><link rel="prefetch" href="/assets/js/page--src--pages--index-vue.f77db1ae.js"><link rel="prefetch" href="/assets/js/page--src--pages--infinity-vue.5609c91c.js"><link rel="prefetch" href="/assets/js/page--src--templates--author-vue.7e8e0854.js"><link rel="prefetch" href="/assets/js/page--src--templates--author-vue~page--src--templates--category-vue~page--src--templates--tag-vue.2cf100e4.js"><link rel="prefetch" href="/assets/js/page--src--templates--category-vue.9976ada0.js"><link rel="prefetch" href="/assets/js/page--src--templates--custom-page-vue.34243c8a.js"><link rel="prefetch" href="/assets/js/page--src--templates--tag-vue.6ff9487a.js"><link rel="prefetch" href="/assets/js/vendors~page--src--templates--blog-post-vue.bcf1a0b6.js"><link rel="stylesheet" href="/assets/css/1.styles.55ffadaf.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    
    <script>
      // Add dark / light detection that runs before Vue.js load. Borrowed from overreacted.io
      // for this starter, i used the code from gridsome.org
      (function() {
        window.__onThemeChange = function() {};
        function setTheme(newTheme) {

          window.__theme = newTheme;
          preferredTheme = newTheme;
          document.body.setAttribute('data-theme', newTheme);
          document.documentElement.classList.remove('mode-light')
          document.documentElement.classList.remove('mode-dark')
          document.documentElement.classList.add('mode-'+newTheme)


          window.__onThemeChange(newTheme);
        }

        var preferredTheme;
        try {
          preferredTheme = localStorage.getItem('theme');
        } catch (err) { }

        window.__setPreferredTheme = function(newTheme) {
          setTheme(newTheme);
          try {
            localStorage.setItem('theme', newTheme);
          } catch (err) {}
        }

        var darkQuery = window.matchMedia('(prefers-color-scheme: dark)');

        darkQuery.addListener(function(e) {
          window.__setPreferredTheme(e.matches ? 'dark' : 'light');
        });

        setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'));
      })();
    </script>

    <div id="app" data-server-rendered="true" class="dark:bg-black"><div class="h-16 dark:bg-black bg-white"><div style="height:px;"><div class="headroom bg-white dark:bg-black border-b dark:border-gray-900" style="position:relative;top:0;left:0;right:0;z-index:9999;"><nav class="hidden md:block lg:block xl:block flex items-center justify-between flex-wrap container mx-auto py-3 z-20 dark:text-gray-400"><div class="block flex-grow flex items-center w-auto mx-4"><div class="flex items-center flex-shrink-0 mr-6"><span class="font-semibold text-xl tracking-tight">指间须臾</span></div><div class="flex-grow"><ul class="list-none flex justify-left"><li class="px-4 py-1"><a href="/" title="主页" class="block py-1 active">主页</a><!----><!----></li><li class="px-4 py-1"><a href="/category/technology" title="编程" class="block py-1">编程</a><!----><!----></li><li class="px-4 py-1"><a href="/category/photography" title="摄影" class="block py-1">摄影</a><!----><!----></li><li class="px-4 py-1"><a href="/category/writing" title="随笔" class="block py-1">随笔</a><!----><!----></li><li class="px-4 py-1"><a href="/category/thinking" title="思考" class="block py-1">思考</a><!----><!----></li><li class="px-4 py-1"><a href="/about" title="关于" class="block py-1">关于</a><!----><!----></li><li class="px-4 py-1"><!----><!----><!----></li><li class="px-4 py-1"><a role="button" aria-label="Open Subnavigation" title="Open Subnavigation" class="block px-4 py-1"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="ellipsis-h" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-ellipsis-h fa-w-16 fa-lg"><path fill="currentColor" d="M328 256c0 39.8-32.2 72-72 72s-72-32.2-72-72 32.2-72 72-72 72 32.2 72 72zm104-72c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm-352 0c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72z"></path></svg></a><div class="py-4 mega-menu mb-16 border-t border-gray-200 shadow-xl bg-white dark:bg-black dark:border-gray-900 hidden"><div><div class="container mx-auto"><div class="flex flex-wrap md:my-4 md:mx-4"><div class="w-full mb-2"><h2 class="text-xl mt-0 mb-2">Recent articles</h2><div class="w-full"><div class="-mx-4 slick-slider slick-initialized" data-v-3d1a4f76><div class="slick-list" data-v-3d1a4f76><div class="slick-track" style="width:100%;left:0%;" data-v-e4caeaf8 data-v-3d1a4f76><div tabIndex="-1" data-index="0" aria-hidden="false" class="slick-slide slick-active slick-current" style="outline:none;width:25%;" data-v-e4caeaf8><div data-v-e4caeaf8><div tabIndex="-1" class="px-4" style="width:100%;display:inline-block;" data-v-e4caeaf8><a href="/posts/scalene-python-cpu/"><div id="e9ad36fa4b1168cbff692317669a35cd"><img alt="(翻译)Scalene - 一个 Python 的高性能 CPU 内存分析器" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 230 130' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-f01982a1c32d42246db5b85a4f3488f9'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-f01982a1c32d42246db5b85a4f3488f9)' width='230' height='130' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAkAEADASIAAhEBAxEB/8QAGwAAAQUBAQAAAAAAAAAAAAAAAAEDBAUGAgf/xAAzEAACAQMDAgQDBQkAAAAAAAABAgMABBEFEiExQQYTUWEiI3EUFlKRoTIzQmKBkrHB8P/EABcBAQEBAQAAAAAAAAAAAAAAAAMEAgX/xAAiEQACAgECBwEAAAAAAAAAAAAAAQIDEQQSISIjMkFRYRP/2gAMAwEAAhEDEQA/AMHDrciYwCSfTPFWWk6pqd5MRHLGvtINo/OqCOWCFfgTzCSAM8CpSai4MgiAj/hGw/7NT2Rj4Q1cpZ4mtub3U7aJWaa0Qfi83PPsKZ%2b808cfzJDIw7ocD9ayk11FuJeR5vh4JJwSfc1wuyS3AkaMBxhRuI5Hc4qf815Kd78GjPi2c/vLgxgdFADGoNz4quTIGhmumPcs4UfkKoZNNVRHunVHZN%2b1jzz0GMdaYmsTDIym8gJB7t/k1tV1mHZYbC38QXV0vyrpkk/AwGT9D3qXFrN1HIUu5ZWP8pCkfrXn4mWF8CRH9wTipjawzpuk8t2Axlhz7dDRy0/pG43%2b2ZxLqZekr/3VLj1KYIQ4SQE7juHfGKq6UGug4pkKk0aSyuEuoyBvjihAc4AJ9D1/4UkO24uUDlkAODtVdoGfr0FVejXBh1CAlsKWCsCeCDxz7VZHel7DGVilYtgYUDv60ElhseLzFE7xFKDqs5B3xKQikR5VVwAME/0ri%2be3iMP2hY2MsQ3/AAkHrg8j9k8dMGk11mk1NwLdJPMAYfKJHTBxg9Pemp72G1tMSQQxXBJ%2bX5eTtJ75%2bn1oY52xHljdNsZv9FdHQ2En2iOUb4wCNxX1qqmiuIDiWJ0I7EU/Nq8stv5TpGSH3LJjDAenHahtYuJQwuMTBgFO7uB0Bx6VRBWJcxPN1t8vAqhSjrRRTAHSMyMGU4IOQa0ulW0YdZgDvSbYPTGcUUUV3axae5B4suXj1uUR4jAXI2ZGOMVmpHaRyzsWYnkk5oorOmXSi/hvVPqyX04zRRRTk5//2Q==' /%3e%3c/svg%3e" width="230" data-src="/assets/static/sergio-souza-mvb51ThjvRA-unsplash.33d4da4.21c81be30c0705f173d0a2b3e99d5aff.jpg" data-srcset="/assets/static/sergio-souza-mvb51ThjvRA-unsplash.33d4da4.21c81be30c0705f173d0a2b3e99d5aff.jpg 230w" data-sizes="(max-width: 230px) 100vw, 230px" class="rounded-lg h-32 object-cover w-full g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/sergio-souza-mvb51ThjvRA-unsplash.33d4da4.21c81be30c0705f173d0a2b3e99d5aff.jpg" class="rounded-lg h-32 object-cover w-full g-image g-image--loaded" width="230" alt="(翻译)Scalene - 一个 Python 的高性能 CPU 内存分析器"></noscript><div class="post-card-content"><h3 class="tracking-wider mt-3 mb-3 text-lg font-light max-w-xl">(翻译)Scalene - 一个 Python 的高性能 CPU 内存分析器</h3></div><div class="post-card-footer"><p class="text-xs"><time datetime="2020-04-16T00:00:00.000Z">16 Apr 2020</time>
                     • 
                    7 min read
                  </p></div></div></a></div></div></div><div tabIndex="-1" data-index="1" aria-hidden="false" class="slick-slide slick-active" style="outline:none;width:25%;" data-v-e4caeaf8><div data-v-e4caeaf8><div tabIndex="-1" class="px-4" style="width:100%;display:inline-block;" data-v-e4caeaf8><a href="/posts/python-memory-profiler/" aria-current="page" class="active--exact active"><div id="1630615bec60cbe6ff4e80fc7133d8f9"><img alt="Python memory profiler 上手实践" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 230 130' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-7ef2973e9be55bcc8875f84d6c0db049'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-7ef2973e9be55bcc8875f84d6c0db049)' width='230' height='130' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAkAEADASIAAhEBAxEB/8QAGwAAAgMBAQEAAAAAAAAAAAAABQYAAwQCBwj/xAAsEAACAQMCBAUDBQAAAAAAAAABAgMABBEhMQUSUWEGIkFxkRQVoRNigcHw/8QAGQEAAwEBAQAAAAAAAAAAAAAAAAIDAQQG/8QAHhEAAgIBBQEAAAAAAAAAAAAAAAECEgMREyExUQT/2gAMAwEAAhEDEQA/APRoH0U5ADbb5ohGcHVlB968rtPE6gpyzylcakkHPvTLYcciZWdZlUnoutScn4U3Mb6kh2DNzOqpIeVebOBhuwPWuhMyx8zxyK4UMyBSxGT23/ilO34ouWVLoKGbJ8mM/miH3lkBVZUCgZyDrnPfSi6NTi%2bmMKNIzSJyMChxll0Pt1qq5uRbsgfd3EYz1P8AjQiLigmYSGZmJHKAsmm/Tr3q1%2bKOzBUGSMgHQ5rLoaoVLmTk5CCCfQ%2blcXi%2biAcwA3oLJxkhwV0C4yMVWOMPOXMUbh1QsygZJxgnTpuKdSQVZ8z20svpIQKO2t9coAFc67AUmW96Rs3yKKW3E2A0bGKo%2bTzkm0OsF9eggrqB80S%2b43mcFW9qTbfixUDzeb8Vsj44RuwxWNE9zQZXvZWRo5I5F/dqufYjWsf1305JiXkJPMWDNk%2b%2btDPvu2T8VRNxmNgNtaWhWOZ%2bhObxHJHGwARQdTgYJ71u8GeK5U8U8MjuJD9NNKYXB10ZSM/OKULi9ilGy6b0NHEBaXMdwgAEDrKo7qQf6raI6MX0OMlyKqu3OgBwCK0rIwVTnJI3NSpTEpl7Xc0aIA2QfMQRucV2t1ISuo9KlSmRFpaFv67jlwd81W7sCACcDWpUoFicvIwYMCcnvWO8kYLnroalShlo9n//2Q==' /%3e%3c/svg%3e" width="230" data-src="/assets/static/josh-spires-dronenr-sQalFlXIsLs-unsplash.33d4da4.033fae86f3b02df16933a32c19ebf5e9.jpg" data-srcset="/assets/static/josh-spires-dronenr-sQalFlXIsLs-unsplash.33d4da4.033fae86f3b02df16933a32c19ebf5e9.jpg 230w" data-sizes="(max-width: 230px) 100vw, 230px" class="rounded-lg h-32 object-cover w-full g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/josh-spires-dronenr-sQalFlXIsLs-unsplash.33d4da4.033fae86f3b02df16933a32c19ebf5e9.jpg" class="rounded-lg h-32 object-cover w-full g-image g-image--loaded" width="230" alt="Python memory profiler 上手实践"></noscript><div class="post-card-content"><h3 class="tracking-wider mt-3 mb-3 text-lg font-light max-w-xl">Python memory profiler 上手实践</h3></div><div class="post-card-footer"><p class="text-xs"><time datetime="2020-03-20T00:00:00.000Z">20 Mar 2020</time>
                     • 
                    12 min read
                  </p></div></div></a></div></div></div><div tabIndex="-1" data-index="2" aria-hidden="false" class="slick-slide slick-active" style="outline:none;width:25%;" data-v-e4caeaf8><div data-v-e4caeaf8><div tabIndex="-1" class="px-4" style="width:100%;display:inline-block;" data-v-e4caeaf8><a href="/posts/py-spark-udf/"><div id="86b07dd34b54f9bb9419aa1c1c3d0aaa"><img alt="PySpark UDF的坑与绕" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 230 130' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-e1e98bca5c128579e75a9d45d02b8db4'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-e1e98bca5c128579e75a9d45d02b8db4)' width='230' height='130' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAkAEADASIAAhEBAxEB/8QAGwAAAgMBAQEAAAAAAAAAAAAAAAcEBQYDAgj/xAAzEAACAQMDAgMFBgcAAAAAAAABAgMABBEFEiEGMRNBURQiYXGBBxUjMpGhM0JygrHB8P/EABgBAAMBAQAAAAAAAAAAAAAAAAMEBQEC/8QAJhEAAgICAQIFBQAAAAAAAAAAAQIAEQMhBBIyEyIxQcFSYYHh8P/aAAwDAQACEQMRAD8A%2bfemLeO66tsIZy6xvKMmP8wHqKaPUUSwdRz2iSXUitrWn%2b5dS73ZPDwCx5HfjnsOPKlv0W5i6ysJQcCNi5OQMAKeeeKYGsXon1O/uLRWmmbVNOkid/hvGCfifpQuQx8Wvavmbjqo2Oq7ON%2bj9dDwxHbbqUI7oQw7fT6fKlpfbpJg6IrJHLbxqAQOfZwAQPof386bnWrRR6Dq8QK/iWrYyc9sng%2bdKzTpbb7zh3xGRmntpNoGchbd%2bP1Gaj4cnkY%2btfqO56uQNWuZLdkR7d2mHKFYeAeM4GRntWTleUySLLZ7Px0JBB/MFXjHy/zTC168M%2bp285mijRIyCQQdp4AHPnxWYvwt3Z3aE7pheRSKV4BXw1UnP0pvA4AGopkA%2bqYfUo917pYwPf8AD8vWrG7iHiSgZJaNeP7q568ns99onIyqRBjnjIxmrzUwgui0eJFWKPGBkHn1p18nbX9uCrcyfS8yQa7vkCFfCZffGQM4GatdQv8AF40sUi58aBhtHBKNwfl8MVkSSk%2b4d8etdVlYRnd3JGBTTYrbqg7IM%2bhtbv8AUr3QJbmfYY5Inw8ZARl285P%2bvWlxa6pLZ6nZTN/CWFXIQ8nKsoP7136c1GCTpu%2biuGVVETeGFOcOR8e3lmqWJYpLtPFmjVViRXYN/KFHYHzzUzj8cIHRhqHZiwuaaOY61qMiKCiLblysh4wGA5x8xXqW0ggt9SZmWEJJGyBMlBlMkDPnmomkLpa9RPb2d9cSWlxZtGJXj2nee4I8wMZzVtr0EcriytY3dZPxRM2GCjt8h50N2CMEFgfH5nQW1%2b8XPU9wJp7aW3DMIVXcfiPOon3vcI5wWwxHDHNSda0yZr0pbEvCrbS4Axu9ABUeTS5oW3m4QFcHBHP6VURU6QIAoxlUkrPhTjGalbz2YBsds0UUwZgjA%2bznR7XWbaX2sOGR9m6NtpII8/WmlB0dokSYNmkhAxlwM/sKKKi8x2DGjK3GUdA1PFxommWbA2tjBE6/lZRyMiqDVMOEBVQZF5KjH/dqKKTxksbbcdKgDQmNv0jSSZVjXai7v6iecn1rOrcSNBl23k8%2b95fCiirOLtkrNpqE/9k=' /%3e%3c/svg%3e" width="230" data-src="/assets/static/lukasz-szmigiel-jFCViYFYcus-unsplash.33d4da4.ee538618820ced4104708b9d6bd84fa6.jpg" data-srcset="/assets/static/lukasz-szmigiel-jFCViYFYcus-unsplash.33d4da4.ee538618820ced4104708b9d6bd84fa6.jpg 230w" data-sizes="(max-width: 230px) 100vw, 230px" class="rounded-lg h-32 object-cover w-full g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/lukasz-szmigiel-jFCViYFYcus-unsplash.33d4da4.ee538618820ced4104708b9d6bd84fa6.jpg" class="rounded-lg h-32 object-cover w-full g-image g-image--loaded" width="230" alt="PySpark UDF的坑与绕"></noscript><div class="post-card-content"><h3 class="tracking-wider mt-3 mb-3 text-lg font-light max-w-xl">PySpark UDF的坑与绕</h3></div><div class="post-card-footer"><p class="text-xs"><time datetime="2019-02-22T00:00:00.000Z">22 Feb 2019</time>
                     • 
                    3 min read
                  </p></div></div></a></div></div></div><div tabIndex="-1" data-index="3" aria-hidden="false" class="slick-slide slick-active" style="outline:none;width:25%;" data-v-e4caeaf8><div data-v-e4caeaf8><div tabIndex="-1" class="px-4" style="width:100%;display:inline-block;" data-v-e4caeaf8><a href="/posts/neo4j-schema/"><div id="e9bfcd206e13e037e6f86466b5e9395c"><img alt="Neo4j schema 索引对查询的影响" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 230 130' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-b377b946a0dfc7b6c3e2907fb46df142'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-b377b946a0dfc7b6c3e2907fb46df142)' width='230' height='130' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAkAEADASIAAhEBAxEB/8QAGwAAAgMBAQEAAAAAAAAAAAAAAAMCBAUBBgf/xAAvEAACAQMDAwEGBgMAAAAAAAABAgMABBESITEFE0FRIjJxkbHwBhQjQmHRcoHB/8QAGAEAAwEBAAAAAAAAAAAAAAAAAQIDAAT/xAAfEQACAgMAAgMAAAAAAAAAAAAAAQIRAyExIjJBUWH/2gAMAwEAAhEDEQA/APlPS%2bqC2maa5UTBkERVsgEZ3GR9%2byKv2cdvPNKhf9OTGsNyvI2%2bP9VkWIEtkyuVAdyWbQD2xgZI9OadL1pmSOGGPs28JLJGD5yNyfJwOai4pOxK3bC76fFHIYrZm7LYPPut4B9ahc28bwJJ39TE%2bmkgcH/VHUL38xdGSNUiGBsp21Y3NIhugsJEgGgEAKRkH%2bvjWTf2Y0bW0JbB7MxVgAjOAWG%2b%2beABitD8U3NteWdjbW5gDqCCkbs2H9QSBnf5fCsaHtzRqxCl4yTnOEcejHlcfzt/NVDcq16v6P5dlf2kAOAR8fpRcXdsDh5FiVe5%2bHIbhnYzxSaQC3uqOdv8qjfXVwl9DdPM0jsOT4B3A%2btUTeSmzntiU0FjJvzuRnFOuNUnTrbfIGDnPG2KWMZJ%2bX6GicNwkXRniILB7hSyg4Jwp3pU%2bgtIY9JxjbyRtUJI5Ft4AkbCQlpM4OQPFJjJDk51Z9fnVHsZ9GTJoSFVOSw17D79Ki6ExM2vBUhSpOCaZLcDShX2ZhGACODz8qIFunuhNo1yjDgkZzx86F10Vnbezu0lWWOGVDnIJGPsUzqQZ3guTF2tS6ZFXgOo/wCjB%2bdbtz1A3pSW67YkUEOsMejRvt9%2bN6q3DQXHT7m2R2WRV1BJDn2h6HG%2b2ecVOOWTnVaBGb%2bTzk2VK8%2b7pO1NY6bQLnJbwDXZsS20bIpBDYI58VWGTtxgVcc2ss7xrrZQF/acZ2zWdxLGfO1FFTj1gXSzaRqblSw1aYtQDbjOCadZyMQkoOlkG2naiip5la2TydNi6uDMk0kyrJI4KamJyAAON%2baxTKwnjwBluTjneiitj9IsGMzyStvgHbXj60rUWILHgUUV0FUf/9k=' /%3e%3c/svg%3e" width="230" data-src="/assets/static/marco-marques-dJ_Zl5LpPto-unsplash.33d4da4.f5f25fa347e1db017704f0851aca4ca7.jpg" data-srcset="/assets/static/marco-marques-dJ_Zl5LpPto-unsplash.33d4da4.f5f25fa347e1db017704f0851aca4ca7.jpg 230w" data-sizes="(max-width: 230px) 100vw, 230px" class="rounded-lg h-32 object-cover w-full g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/marco-marques-dJ_Zl5LpPto-unsplash.33d4da4.f5f25fa347e1db017704f0851aca4ca7.jpg" class="rounded-lg h-32 object-cover w-full g-image g-image--loaded" width="230" alt="Neo4j schema 索引对查询的影响"></noscript><div class="post-card-content"><h3 class="tracking-wider mt-3 mb-3 text-lg font-light max-w-xl">Neo4j schema 索引对查询的影响</h3></div><div class="post-card-footer"><p class="text-xs"><time datetime="2018-06-15T00:00:00.000Z">15 Jun 2018</time>
                     • 
                    5 min read
                  </p></div></div></a></div></div></div></div></div></div></div></div><div class="w-full mb-8"><h2 class="text-xl mt-2 mb-2">Tags</h2><ul class="flex flex-wrap"><li class="text-xs bg-transparent hover:text-blue-700 py-2 px-4 mr-4 mb-4 border hover:border-blue-500 border-gray-600 text-gray-700 dark:text-gray-400 rounded-full"><a href="/tags/styles/">Styles</a></li><li class="text-xs bg-transparent hover:text-blue-700 py-2 px-4 mr-4 mb-4 border hover:border-blue-500 border-gray-600 text-gray-700 dark:text-gray-400 rounded-full"><a href="/tags/profile/">Profile</a></li><li class="text-xs bg-transparent hover:text-blue-700 py-2 px-4 mr-4 mb-4 border hover:border-blue-500 border-gray-600 text-gray-700 dark:text-gray-400 rounded-full"><a href="/tags/python/">Python</a></li><li class="text-xs bg-transparent hover:text-blue-700 py-2 px-4 mr-4 mb-4 border hover:border-blue-500 border-gray-600 text-gray-700 dark:text-gray-400 rounded-full"><a href="/tags/spark/">Spark</a></li><li class="text-xs bg-transparent hover:text-blue-700 py-2 px-4 mr-4 mb-4 border hover:border-blue-500 border-gray-600 text-gray-700 dark:text-gray-400 rounded-full"><a href="/tags/neo4j/">Neo4j</a></li></ul></div></div></div></div></div></li></ul></div><div class="inline-block"><ul class="list-none flex justify-center md:justify-end"><li class="mr-6"><a role="button" aria-label="Open Search" title="Open Search"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-search fa-w-16"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg></a></li><li><a role="button" aria-label="Toggle dark" title="Toggle dark" class="toggle-theme"><!----><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="moon" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-moon fa-w-16"><path fill="currentColor" d="M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"></path></svg></a></li></ul></div></div></nav><nav class="block md:hidden flex items-center justify-between flex-wrap container mx-auto py-4 dark:text-gray-400"><div class="block flex-grow flex items-center w-auto mx-4"><div class="flex items-center flex-shrink-0 mr-6"><a role="button" aria-label="Open Navigation" title="Open Navigation"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="bars" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="svg-inline--fa fa-bars fa-w-14"><path fill="currentColor" d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"></path></svg></a></div><div class="flex-grow text-center font-bold text-lg"><span class="font-semibold text-xl tracking-tight">指间须臾</span></div><div class="inline-block"><ul class="list-none flex justify-center md:justify-end"><li class="mr-6"><a role="button" aria-label="Open Search" title="Open Search"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-search fa-w-16"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg></a></li><li><a role="button" aria-label="Toggle dark" title="Toggle dark" class="toggle-theme"><!----><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="moon" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-moon fa-w-16"><path fill="currentColor" d="M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"></path></svg></a></li></ul></div></div></nav></div></div><!----><!----></div><div><!----><div class="z-100 relative mt-0 h-auto"><!----><img src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1600 800' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-e4a56daf83daf6a40719aef386847469'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-e4a56daf83daf6a40719aef386847469)' width='1600' height='800' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAgAEADASIAAhEBAxEB/8QAGgAAAgMBAQAAAAAAAAAAAAAABQYDBAcACP/EAC8QAAEDAwMCBAQHAQAAAAAAAAECAxEABCEFEjEGEyJBQlFhcYGxBxQkMjNicuH/xAAZAQADAAMAAAAAAAAAAAAAAAABAgMABAb/xAAfEQACAQQCAwAAAAAAAAAAAAAAAQIDERJRBDFBQmH/2gAMAwEAAhEDEQA/AH21uELnYvA9R4NE2HUYCnEhR8jzWG6Z1WhKDKiVn1SQPlzTZo/VjLgTvWobcCFTU25LwFcmi/Y1JDkubE%2bKEyTuGPgRzUja3e2CppW7EhBChkxzjjk0gs9QW61Elx0BUTC/%2bUROvtpT4XjtAwMc/Shl8Cq1J9SHJHcVIUkoIURmPEPcZqH8wpNz2lJUPDO4pMTMRPvSqnqSxaT3Hn20FUSpcgmOPnXN9V2zqS63eNKgTGZI%2bAiaGY947Q3plW9SiNsYqi6ShRIjaeKWldSbFAB1slXpcPP0rr3VlsN2zrsLYcR3Uq3%2bYMEH706mhrX6Z5ptVJgAkCjdooBOFBJnAnFJTFwUjkY5q/b3hTkHFVZz0k0aBbEED9QQR7cUUQVHi5kxWesantR/IAMCD51YRrBEQsfCDihYg5PQ/KW8Ekd5KhyAJECqFzcXST4Vmf8AVKitacCcKMgcVCrWnFKUCfKhgUjUYZvNRvArKlx77uKJahfPXf4aMukq3afqKmVEH0OiR9Jikt/Uy42f3A%2b05o10jejUNC6q0k5LtkLppP8Adoz9qzGxucabbcdo/9k=' /%3e%3c/svg%3e" width="1600" data-src="/assets/static/josh-spires-dronenr-sQalFlXIsLs-unsplash.872e63c.033fae86f3b02df16933a32c19ebf5e9.jpg" data-srcset="/assets/static/josh-spires-dronenr-sQalFlXIsLs-unsplash.bb17b12.033fae86f3b02df16933a32c19ebf5e9.jpg 480w, /assets/static/josh-spires-dronenr-sQalFlXIsLs-unsplash.b28baf0.033fae86f3b02df16933a32c19ebf5e9.jpg 1024w, /assets/static/josh-spires-dronenr-sQalFlXIsLs-unsplash.872e63c.033fae86f3b02df16933a32c19ebf5e9.jpg 1600w" data-sizes="(max-width: 1600px) 100vw, 1600px" class="object-cover absolute -z-10 h-full w-full g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/josh-spires-dronenr-sQalFlXIsLs-unsplash.872e63c.033fae86f3b02df16933a32c19ebf5e9.jpg" class="object-cover absolute -z-10 h-full w-full g-image g-image--loaded" width="1600"></noscript><div class="text-center text-white bg-gray-800 lg:py-48 md:py-32 py-24 bg-opacity-0"><!----><!----></div></div></div><div class="container sm:pxi-0 mx-auto overflow-x-hidden text-gray-800 dark:text-gray-500"><div class="lg:mx-32 md:mx-16 sm:mx-8 mx-4 pt-8"><section class="post-header container mx-auto px-0 mb-16 text-center"><h1 class="text-gray-800 dark:text-gray-400 font-extrabold tracking-wider mb-6">Python memory profiler 上手实践</h1><span class="tracking-wide text-sm"><a href="/category/technology/" class="font-medium">Technology</a> · 
          <time datetime="Fri Mar 20 2020 12:00:00 UTC+00:00">20 March 2020</time>
           · 
          12 min read
        </span></section></div><div class="lg:mx-32 md:mx-16 px-4"><section class="post-content container mx-auto relative"><div><h2 id="说在前面"><a href="#%E8%AF%B4%E5%9C%A8%E5%89%8D%E9%9D%A2" aria-hidden="true"><span class="icon icon-link"></span></a>说在前面</h2>
<p>这篇文章的有一部分来自 memory_profiler 官方文档，是在我亲自实践之后，做整理和总结。</p>
<h2 id="为什么"><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88" aria-hidden="true"><span class="icon icon-link"></span></a>为什么</h2>
<p>相比起 C ，Python 有自己的内存管理，不需开发者自己管理内存。虽然方便，但有时候，我们可能会遇到内存占用过高，内存泄漏，甚至 OOM 的情况。这时，就需要我们做内存诊断，了解自己的代码：内存主要被分配在哪里，是否有无法释放的内存，又有多少内存会很快被释放，进程在高峰时占用多少内存，在低谷时占用多少内存。</p>
<h2 id="怎么办"><a href="#%E6%80%8E%E4%B9%88%E5%8A%9E" aria-hidden="true"><span class="icon icon-link"></span></a>怎么办</h2>
<p>要了解进程的内存使用情况，我们可能首先会想到使用 TOP 命令，查看进程内存的使用情况。TOP 命令能够实时查看到进程对各种资源的使用情况，也是我们经常会使用的Linux命令。而在 Python 中，通过 psutil 模块也能很好的获取到这些信息。</p>
<p>这两个工具十分的强大，但是也很基础。TOP命令不方便从更多的维度诊断问题，比如难以从时间维度诊断内存，只能统计当前整个进程的内存使用情况，与代码脱离。而 psutil 十分强大，可以和代码结合，但是对逻辑代码侵入性太强，比如想在某个函数前后统计内存的使用情况，就需要在原有代码的基础上插桩，产生不必要的耦合，而不侵入逻辑代码则又和使用命令行没有太大区别。</p>
<p>这个时候，有经验的朋友可能会想到 line_profiler。line_profiler 是用于对函数进行逐行分析的模块，只需要通过装饰器，就可以计算出函数内每一行代码的执行时间，以提供时间维度的性能诊断。那么在内存维度上，是不是也有类似的模块呢？bingo~答案是肯定的，在 Python 众多功能强大的模块中，有一个叫做 memory_profiler 的模块，只需要给目标函数装上profile装饰器，就可以逐行分析函数代码的内存使用情况。不仅如此，这个模块还有更加强大的功能等待大家发掘。</p>
<h2 id="memory_profiler-是什么"><a href="#memory_profiler-%E6%98%AF%E4%BB%80%E4%B9%88" aria-hidden="true"><span class="icon icon-link"></span></a>memory_profiler 是什么</h2>
<p>首先我们简单介绍下 memory_profiler 是什么。这部分主要来自 memory_profiler 的 PyPI 介绍。</p>
<blockquote>
<p>This is a python module for monitoring memory consumption of a process as well as line-by-line analysis of memory consumption for python programs. It is a pure python module which depends on the psutil module.</p>
</blockquote>
<p>memory_profiler 是一个监控进程内存消耗的模块，也可以逐行分析 Python 程序的内存消耗。它是一个依赖 psutil 模块的纯 Python 模块。</p>
<p>memory_profiler 有两种应用场景，三种使用方式。</p>
<p>两种应用场景分别是：逐行的内存使用分析，时间维度的内存使用分析。后面再详细说。</p>
<p>三种使用方式中，前两种是针对逐行的内存使用分析，另外一种针对时间维度的内存使用分析。</p>
<p><strong>只使用装饰器，不 import memory_profiler</strong>。给目标函数加上 @profile 装饰器，执行代码时，给 Python 解释器传递参数 -m memory_profiler ，来加载 memory_profiler 模块。</p>
<div class="gridsome-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token decorator annotation punctuation">@profile</span>
<span class="token keyword">def</span> <span class="token function">my_func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">**</span> <span class="token number">6</span><span class="token punctuation">)</span>
    b <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> <span class="token number">10</span> <span class="token operator">**</span> <span class="token number">7</span><span class="token punctuation">)</span>
    <span class="token keyword">del</span> b
    <span class="token keyword">return</span> a

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    my_func<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></div>
<div class="gridsome-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">python -m memory_profiler example.py</code></pre></div>
<p><strong>使用装饰器，import memory_profiler。</strong>给目标函数加上 @profile 装饰器，import memory_profiler，执行时不需要传递参数。</p>
<div class="gridsome-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> memory_profiler <span class="token keyword">import</span> profile

<span class="token decorator annotation punctuation">@profile</span>
<span class="token keyword">def</span> <span class="token function">my_func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">**</span> <span class="token number">6</span><span class="token punctuation">)</span>
    b <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> <span class="token number">10</span> <span class="token operator">**</span> <span class="token number">7</span><span class="token punctuation">)</span>
    <span class="token keyword">del</span> b
    <span class="token keyword">return</span> a</code></pre></div>
<div class="gridsome-highlight" data-language="python"><pre class="language-python"><code class="language-python">python example<span class="token punctuation">.</span>py</code></pre></div>
<p><strong>时间维度的内存使用分析。</strong>使用 mprof 执行程序在时间维度分析进程的内存使用情况。下面介绍了一共有四种情况，分别是：单进程，多进程，记录子进程内存占用，多进程并记录子进程内存占用。</p>
<div class="gridsome-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">mprof run <span class="token operator">&lt;</span>executable<span class="token operator">></span>
mprof run --multiprocess <span class="token operator">&lt;</span>executable<span class="token operator">></span>
mprof run --include-children <span class="token operator">&lt;</span>executable<span class="token operator">></span>
mprof run --include-children --multiprocess <span class="token operator">&lt;</span>executable<span class="token operator">></span></code></pre></div>
<p>执行完成后，会生成一个 .dat 文件，类似：</p>
<div class="gridsome-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">mprofile_20200329173152.dat</code></pre></div>
<p>要绘制内存在时间维度的使用情况，需要安装 matplotlib，然后执行 mprof plot (直接执行会读取最新的 .dat 文件)：</p>
<div class="gridsome-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">pip <span class="token function">install</span> matplotlib
mprof plot
mprof plot mprofile_20200329173152.dat</code></pre></div>
<p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b16fa4d8-5ca3-4e77-85c9-ce591a1036f7/68747470733a2f2f662e636c6f75642e6769746875622e636f6d2f6173736574732f313930383631382f3836313332302f63623865376337382d663563632d313165322d386531652d3539373237623636663462322e706e67.png" alt="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b16fa4d8-5ca3-4e77-85c9-ce591a1036f7/68747470733a2f2f662e636c6f75642e6769746875622e636f6d2f6173736574732f313930383631382f3836313332302f63623865376337382d663563632d313165322d386531652d3539373237623636663462322e706e67.png"></p>
<p>也可以查看火焰图：</p>
<div class="gridsome-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">mprof plot --flame mprofile_20200329173152.dat</code></pre></div>
<p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/7840bad5-07d4-46ba-8cbd-b7e9083c445b/flamegraph.png" alt="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/7840bad5-07d4-46ba-8cbd-b7e9083c445b/flamegraph.png"></p>
<h2 id="实践经验"><a href="#%E5%AE%9E%E8%B7%B5%E7%BB%8F%E9%AA%8C" aria-hidden="true"><span class="icon icon-link"></span></a>实践经验</h2>
<p>memory_profiler 只介绍了脚本程序的实践，曾让我以为他只能作为普通程序的实际上，他可以在任何场景下使用，包括服务，这里为了丰富示例，我使用服务来进行相关实践。</p>
<p>我们使用 mprof 启动一个服务后，服务进程会持续运行，在这期间，我们可以通过测试工具，模拟出服务在生产环境的运行情况，来分析服务的内存使用状况。下面列出了三种会遇到的使用场景，每种场景的表现都是不一样的。单进程服务我们使用了 Flask 和 Gevent，多进程服务我们使用了 Flask + Gunicorn 的 gevent worker。</p>
<h3 id="单进程无装饰器"><a href="#%E5%8D%95%E8%BF%9B%E7%A8%8B%E6%97%A0%E8%A3%85%E9%A5%B0%E5%99%A8" aria-hidden="true"><span class="icon icon-link"></span></a>单进程无装饰器</h3>
<p>因为收集每一行代码的内存使用情况是不现实的，所以，单进程不使用装饰器时，只能收集到整个进程的内存使用情况。这种场景是无侵入的，一般对应了我们自测的初始阶段，我们想对服务或者脚本内存的使用情况有一个初步的了解：是否会有内存泄漏，是否会占用过大的内存等等问题。</p>
<p><strong>服务代码：</strong></p>
<div class="gridsome-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> gevent <span class="token keyword">import</span> monkey
<span class="token keyword">from</span> gevent<span class="token punctuation">.</span>pywsgi <span class="token keyword">import</span> WSGIServer
monkey<span class="token punctuation">.</span>patch_all<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">from</span> flask <span class="token keyword">import</span> Flask<span class="token punctuation">,</span> render_template
<span class="token comment"># from memory_profiler import profile</span>
<span class="token keyword">from</span> gevent <span class="token keyword">import</span> time

app <span class="token operator">=</span> Flask<span class="token punctuation">(</span>__name__<span class="token punctuation">)</span>

<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">'/test'</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    list1 <span class="token operator">=</span> test1<span class="token punctuation">(</span><span class="token punctuation">)</span>
    list2 <span class="token operator">=</span> test2<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token string">"hello, world"</span>

<span class="token keyword">def</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    new_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token boolean">None</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">4096000</span> 
    new_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">4096000</span>
    big_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    big_list<span class="token punctuation">.</span>extend<span class="token punctuation">(</span>new_list<span class="token punctuation">)</span>
    delay<span class="token punctuation">(</span><span class="token number">0.3</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> big_list

<span class="token keyword">def</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    new_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token boolean">None</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">4096000</span> 
    new_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">4096000</span>
    big_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    big_list<span class="token punctuation">.</span>extend<span class="token punctuation">(</span>new_list<span class="token punctuation">)</span>
    delay<span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> big_list

<span class="token keyword">def</span> <span class="token function">delay</span><span class="token punctuation">(</span>delay_time<span class="token punctuation">)</span><span class="token punctuation">:</span>
    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span>delay_time<span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>app<span class="token punctuation">.</span>url_map<span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    http_server <span class="token operator">=</span> WSGIServer<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> app<span class="token punctuation">)</span>
    http_server<span class="token punctuation">.</span>serve_forever<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></div>
<p><strong>执行 mprof run:</strong></p>
<div class="gridsome-highlight" data-language="python"><pre class="language-python"><code class="language-python">mprof run server<span class="token punctuation">.</span>py</code></pre></div>
<p><strong>使用 curl 请求多次后，执行mporf plot：</strong></p>
<div class="gridsome-highlight" data-language="python"><pre class="language-python"><code class="language-python">mprof plot</code></pre></div>
<p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/607824df-8208-4e85-9dc0-ee8ba0001052/single_process.png" alt="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/607824df-8208-4e85-9dc0-ee8ba0001052/single_process.png"></p>
<p>在时间维度上的单进程内存使用情况，可以很清晰的体现出来。这时，如果我们发现了过大的内存消耗，长时间没有释放的大内存，可能就需要对单进程添加装饰器来进一步分析了。</p>
<h3 id="单进程加装饰器"><a href="#%E5%8D%95%E8%BF%9B%E7%A8%8B%E5%8A%A0%E8%A3%85%E9%A5%B0%E5%99%A8" aria-hidden="true"><span class="icon icon-link"></span></a>单进程加装饰器</h3>
<p>我们使用 mprof 直接 run server.py，发现了比较大的内存消耗，或者长时间没有释放的大内存，又或者在一轮请求中遇到耗时绝对值过大等性能问题，就需要考虑给服务相关的代码加上装饰器来定位了。</p>
<p><strong>加装饰器时，要注意一点。不要加入下面的代码：</strong></p>
<div class="gridsome-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> memory_profiler <span class="token keyword">import</span> profile</code></pre></div>
<p><strong>下面是服务代码，也就是在我们主要的函数上增加 profile 装饰器：</strong></p>
<div class="gridsome-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> gevent <span class="token keyword">import</span> monkey
<span class="token keyword">from</span> gevent<span class="token punctuation">.</span>pywsgi <span class="token keyword">import</span> WSGIServer
monkey<span class="token punctuation">.</span>patch_all<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">from</span> flask <span class="token keyword">import</span> Flask<span class="token punctuation">,</span> render_template
<span class="token comment"># from memory_profiler import profile</span>
<span class="token keyword">from</span> gevent <span class="token keyword">import</span> time

app <span class="token operator">=</span> Flask<span class="token punctuation">(</span>__name__<span class="token punctuation">)</span>

<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">'/test'</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    list1 <span class="token operator">=</span> test1<span class="token punctuation">(</span><span class="token punctuation">)</span>
    list2 <span class="token operator">=</span> test2<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token string">"hello, world"</span>

<span class="token decorator annotation punctuation">@profile</span>
<span class="token keyword">def</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    new_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token boolean">None</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">4096000</span> 
    new_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">4096000</span>
    big_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    big_list<span class="token punctuation">.</span>extend<span class="token punctuation">(</span>new_list<span class="token punctuation">)</span>
    delay<span class="token punctuation">(</span><span class="token number">0.3</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> big_list

<span class="token decorator annotation punctuation">@profile</span>
<span class="token keyword">def</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    new_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token boolean">None</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">4096000</span> 
    new_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">4096000</span>
    big_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    big_list<span class="token punctuation">.</span>extend<span class="token punctuation">(</span>new_list<span class="token punctuation">)</span>
    delay<span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> big_list

<span class="token decorator annotation punctuation">@profile</span>
<span class="token keyword">def</span> <span class="token function">delay</span><span class="token punctuation">(</span>delay_time<span class="token punctuation">)</span><span class="token punctuation">:</span>
    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span>delay_time<span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>app<span class="token punctuation">.</span>url_map<span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    http_server <span class="token operator">=</span> WSGIServer<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> app<span class="token punctuation">)</span>
    http_server<span class="token punctuation">.</span>serve_forever<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></div>
<p><strong>执行 mprof run:</strong></p>
<div class="gridsome-highlight" data-language="python"><pre class="language-python"><code class="language-python">mprof run server<span class="token punctuation">.</span>py</code></pre></div>
<p><strong>使用 curl 请求多次后，执行mporf plot：</strong></p>
<div class="gridsome-highlight" data-language="python"><pre class="language-python"><code class="language-python">mprof plot</code></pre></div>
<p>如果在服务代码中，你添加了 profile 装饰器的 import ：</p>
<div class="gridsome-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> memory_profiler <span class="token keyword">import</span> profile</code></pre></div>
<p>你会得到下面这样的图：</p>
<p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/22a4f39a-b5c5-4151-b1c4-afcd56789762/single_process_with_profile_decorator_and_import.png" alt="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/22a4f39a-b5c5-4151-b1c4-afcd56789762/single_process_with_profile_decorator_and_import.png"></p>
<p>和官方示例的图似乎不太一样？我们期待的函数执行时间和函数执行前后内存消耗的标记没有了？在我实践之后发现，这是一个坑，加入 import 的代码，只会对代码进行逐行的内存消耗分析，而不能得到内容丰富的图例。</p>
<p>我们去掉 profile 装饰器的 import 代码，再回到这里来看看，会得到类似下面这张图。</p>
<p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b722de99-ac8e-4626-ba86-96ae78207bb3/single_process_delay_with_profile_decorator.png" alt="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b722de99-ac8e-4626-ba86-96ae78207bb3/single_process_delay_with_profile_decorator.png"></p>
<p>这下是不是就清晰多了？我们能够看到在函数test1执行的期间，函数delay占用了大部分的时间，函数test1执行之后，内存回收了一部分，然后接着执行函数test2。哪些代码消耗内存多，哪些代码执行时间长，是不是就一目了然了？</p>
<p>然后我们还可以执行：</p>
<div class="gridsome-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">mprof plot --flame</code></pre></div>
<p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/4082b47a-d333-4ddb-8514-29079fec6c05/single_process_flame_with_profile_decorator.png" alt="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/4082b47a-d333-4ddb-8514-29079fec6c05/single_process_flame_with_profile_decorator.png"></p>
<p>能够清晰的看到火焰图的深度只有两层，看火焰图的平顶，函数test2 中的函数 delay 执行时间更长，“性能更差“，内存占用在函数 test2 执行的过程中达到了峰值。</p>
<h3 id="多进程"><a href="#%E5%A4%9A%E8%BF%9B%E7%A8%8B" aria-hidden="true"><span class="icon icon-link"></span></a>多进程</h3>
<p>我在实践的过程中发现，多进程无法在不 import memory_profiler 的情况下使用装饰器。所以多进程的场景，只能统计每个进程的内存使用情况。不会有函数执行时间，也不会有函数执行前后内存变化的标记，更不会有火焰图。看了官方的示例，也没有发现这些功能在多进程有得到支持的相关证据。索性我们就先不管这些高级的特性，毕竟能够支持多进程和子进程的内存监控，至少能让我们了解多进程程序运行的内存消耗了。</p>
<p>因为直接使用 gunicorn 作为 WSGI Server，服务代码和“单进程无装饰器”一样，就不做赘述了。</p>
<p><strong>下面是gunicorn的配置文件内容：</strong></p>
<div class="gridsome-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token comment"># gunicorn_config.py</span>
<span class="token keyword">import</span> os
<span class="token keyword">import</span> gevent<span class="token punctuation">.</span>monkey
gevent<span class="token punctuation">.</span>monkey<span class="token punctuation">.</span>patch_all<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">import</span> multiprocessing

loglevel <span class="token operator">=</span> <span class="token string">'debug'</span>
bind <span class="token operator">=</span> <span class="token string">"127.0.0.1:5000"</span>
pidfile <span class="token operator">=</span> <span class="token string">"logs/gunicorn.pid"</span>
accesslog <span class="token operator">=</span> <span class="token string">"logs/access.log"</span>
errorlog <span class="token operator">=</span> <span class="token string">"logs/debug.log"</span>
daemon <span class="token operator">=</span> <span class="token boolean">False</span>

workers <span class="token operator">=</span> <span class="token number">2</span>
worker_class <span class="token operator">=</span> <span class="token string">'gevent'</span>
x_forwarded_for_header <span class="token operator">=</span> <span class="token string">'X-FORWARDED-FOR'</span></code></pre></div>
<p>执行 mprof run 命令，这里需要添加相关的参数，不同的参数，结果图示也会相应有所不同：</p>
<div class="gridsome-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">mprof run gunicorn -c gunicorn_config.py profile_server:app
mprof run --multiprocess gunicorn -c gunicorn_config.py profile_server:app
mprof run --include-children gunicorn -c gunicorn_config.py profile_server:app
mprof run --include-children --multiprocess gunicorn -c gunicorn_config.py profile_server:app</code></pre></div>
<p>执行几次 curl 请求之后，执行 mprof plot:</p>
<div class="gridsome-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">mprof plot</code></pre></div>
<p>按照步骤2的不同命令，分别展示对应的图：</p>
<p><strong>不添加任何多进程相关的参数：</strong></p>
<p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b06d170c-4405-4b68-8ece-4923f55c187f/multi_process_without_option.png" alt="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b06d170c-4405-4b68-8ece-4923f55c187f/multi_process_without_option.png"></p>
<p>我们发现只有主进程的内存消耗统计。</p>
<p><strong>添加 --multiprocess 参数:</strong></p>
<p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/1361f499-91f2-4fd6-af0b-445b1a59a5c6/multi_process_delay_with_multi_process_option.png" alt="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/1361f499-91f2-4fd6-af0b-445b1a59a5c6/multi_process_delay_with_multi_process_option.png"></p>
<p>这种情况，我们就能看到我们多进程服务的两个worker的内存消耗了。</p>
<p><strong>添加 --include-children 参数：</strong></p>
<p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/3770c084-6dcc-40c1-96b0-d7bf13abbee6/multi_process_with_children_option.png" alt="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/3770c084-6dcc-40c1-96b0-d7bf13abbee6/multi_process_with_children_option.png"></p>
<p>这种情况，只统计了多进程服务的全部内存消耗。</p>
<p><strong>添加 --include-children 和 --multiprocess 参数：</strong></p>
<p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/e8770e8d-da4c-4843-ba71-575e79618278/multi_process_with_children_and_multi_process_option.png" alt="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/e8770e8d-da4c-4843-ba71-575e79618278/multi_process_with_children_and_multi_process_option.png"></p>
<p>这种情况，统计了多进程服务的全部内存消耗，也统计了两个 worker 进程的内存消耗。</p>
<h2 id="总结"><a href="#%E6%80%BB%E7%BB%93" aria-hidden="true"><span class="icon icon-link"></span></a>总结</h2>
<p>如果在开发中对代码的内存消耗有疑惑，或者想要更快定位出程序的性能瓶颈，绝对可以尝试使用 memory_profiler。除了上面介绍的内容和实践，memory_profiler 还支持通过设定内存大小来进行debug。如果感觉 memory_profiler 的功能不够强大，还可以使用它的 API 来自己扩展和实现更加强大的功能。</p>
<h2 id="相关资料"><a href="#%E7%9B%B8%E5%85%B3%E8%B5%84%E6%96%99" aria-hidden="true"><span class="icon icon-link"></span></a>相关资料</h2>
<p>memory_profiler 的 PyPI 链接: <a href="https://pypi.org/project/memory-profiler/" target="_blank" rel="nofollow noopener noreferrer">https://pypi.org/project/memory-profiler/</a></p>
<p>memory_profiler 的 github 链接: <a href="https://github.com/pythonprofilers/memory_profiler" target="_blank" rel="nofollow noopener noreferrer">https://github.com/pythonprofilers/memory_profiler</a></p>
</div></section><section class="post-tags container mx-auto relative py-10"><a href="/tags/python/" class="text-xs bg-transparent hover:text-blue-700 py-2 px-4 mr-2 border hover:border-blue-500 border-gray-600 text-gray-700 dark:text-gray-400 rounded-full">Python</a><a href="/tags/profile/" class="text-xs bg-transparent hover:text-blue-700 py-2 px-4 mr-2 border hover:border-blue-500 border-gray-600 text-gray-700 dark:text-gray-400 rounded-full">Profile</a></section></div></div><div class="border-t border-b bg-gray-100 dark:border-black dark:bg-gray-900 dark:text-gray-500"><div class="container mx-auto"><div class="lg:mx-32 md:mx-16 px-4 sm:px-0"><section class="container mx-auto py-10"><div class="flex flex-wrap justify-center"><div class="w-full flex justify-center md:w-10/12 mb-4 text-center"><div class="mb-2 sm:mb-0 w-full"><div class="md:flex p-6 pl-0 self-center"><img src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 400 374' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-9ba158a90cb545680afa9a5f3c8a4b2f'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-9ba158a90cb545680afa9a5f3c8a4b2f)' width='400' height='374' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAA8CAYAAADWibxkAAAACXBIWXMAAAsTAAALEwEAmpwYAAAPRUlEQVRo3tVbB1hUxxa%2buwsCgtgLoiAqRkUTgxp8ir0HJYkFC3ZQ0YiKxoai2BsqCMEawW6sqIgIdo2YqNEYjf0ZWxJLTGKJyO6dk3Nm76zXdfHxlDWw33e%2bubvsXmbOnPL/58yVJOu8NBY%2bK4/SASUC5SuU7Si7UL5GiUYZiVIPpZAir7tXnn5plfF9lFiULii7UZ6iQA7kIcofKKtQiudHJYjJLrewOBklC0WPYlBEr/rM/PvH8tvui8UXQ7mlLEKvCFMJ/I/3sqIcUFwm31mBLcp5ZQEGswXy3dVqNXzUaNTXGrzWMvpMsQoa481cK0%2b/dMoYrFo8U5u1VqMxXeu0WovXigXQ%2bBilTH60gGNmu2/aYbHY9s0%2b4tfDevtDF7%2bG/NqvSV3wb%2b7Dijg76m1tbeizhPy0%2b2KHKis7J3aSqU2%2bf5fWsGLWMICbe2DGyN5wLiUe4P4hWDJ1CBzdMAfgzl72%2bMymrFmj%2btD3h9MNnQra2%2bQn829lbv42Njq%2b%2bPc8XIFd3gnw636QL%2b3gI1zb9eL6%2bm7I%2bimJwe9H9N98PZd%2bM5RuWLF8mXylgJ6q6P%2bSz%2b9bNR13Pg2endsKcCUZDBd3oGwH/YXt8PynJNDjtYGUcX23/tdjq6F4kULr6Yb%2bzXx0%2bSEGCAX0EwpAn2di52MnhvDFw610gBt7%2bIKzLiTxa7779DeSq7sYuoGMbgCeFcpeUwXBfGMB7RSz57m/RDFnoN2Eh0cAbqfDnoSpEDNhACydHgrLUBZP%2bRw2x4XDD8lxcARjQFriVDZ6QCc2LiQAqni4PqM0qNNp%2b1MoQCmQ5yEwBrsW6rxfq1pFSFkeCVu%2bDOcBcMqwQDi9YyHMGxcMwQGtwLeOF2CQg/IuJcCjXGkoW6oY/61v7erQsXUDiiMVbW1sxit8IW9D46oVy1GwiiroYPckqHNLcHZy4C5wfnc8PDq9EVZHjYSMTVGAQQ4WjO/P40Lqiim4%2b7EwvM8ncO/4WmjRoBZXwM3DCYwURgQJ79cVxxp5OiVibhcTmzRtRE84mxxniIkYyN5/rwLcPb4GXeAonNi2ANITpwE8OAyX05fCkB7tMCakwffbY7hy4LcDkDg7DOImhTBMjXJIt7akgOYOdgUoHZbK29jXRicUsPHbLfMpr%2bu7t2/M4OdUkCn1Yd4/uysOVs4JA/jjKM8CcHsvwN2DHA/8hRbyCAMfAiG4kLqIQeZJGNClDcHh%2bQXt7YLyPCBC3xdBMAp3EODZCf2ZnbE8tfHFKjLzi95wcM1Mivb8/Vczh8EKlITZw%2bHktmjo06E5hA8KYIfWzmLN639AFrDmkxY%2b9vkBDovdqVfZvSxcSl9CKY/Jl3YyAj84cqDz8OQGiJ88GOZjEKSAyFEhpsJt8eN5kNyFARO/x46sn8M8ypcmBTRQ7psvwJBQAkVsmDum33P0d0Y5H3ebKwP%2bu5vgLjw/vw1xwHZ%2bza3jl31Gl0BlIBhi8OS4/vMefqSA8crW6/I%2bEFACIebtDYL0HFo3i4KbbFLC5Z2Moz1ygavJHPmRhRAoEmgwi76LcHh%2beDApYAndE%2bNAviBE4uVZwNZmAtUEihRyfEppEO4dNBD0JSXggpmICZwb8ICYzkkR3EhlZB2ogKyRQZ%2bRAqZyC9DkAwvI5tW7ZLHCPMAh1JWJ%2bMjKrovF0/tTSTFs3rggRimRGCHyBYMSAxrmJ0psigXoBuoJBzes4/VQifwypkSMBSkm8oMpkG2KHQdRY4Pg/nfrZMQMz4M7t6LFrxXRP3/Vw2x0NF9tJbcyArtrqlYqd/HvH7dA5vlt8r7VMxghQwI%2bnCP8%2bQ3A4%2bOMxgt7FkPbxnVo8Wlenm4OeTb94ST5OH1ELypYCDKUnZ%2bu2LhwLLE%2bPVkBcf0%2bHVog0GkNE4d0YxMGd2EDurZBXlCdgM8NivzHN8/T5lnTb1qvJh%2bRwGgsLdrJ0Z4obMvK7i5%2bzk4FF6GScPH7yP95FsCAx578sBm%2bjhkDYX0/ZYO6fyz369SSCNH1aWE9y6rvhawybyoBCYpp4ZXcXBxx%2bJjyP2rkWxwfFS5UECiKI6IjQCRT5FeCnjENXktRXOCo0QX%2bOibHRw6C6pXdTtkXsA0kBUrG5oqU1yxBg4vjPonU1cWlVLFoDHg3pVebGmz9gtEyQWL0e9PiReSnkdIi5n8OlDIp9T08Ki%2bfMdS8epyKUsGs5pB7LxudTmrl%2b6HpfVri1JwUPnnlR6PRPJBe7foYMGSbmhxJiyYwxAC81qdevNnIhGU08K7GO0bILdR9hDsoHla1hKLOTpr6H1bV1qtVVRs9vr8GkQj//FRStKWvf6laeJaq%2bmvq8ogdpGrwjiURBIR47U9WLV4IL43dPciIBCkIUt0lylTu%2bZ21soFFja5bMEqLuVmHnFyHKUynYnsxqqKnLFno%2bkhm3R%2bShFnDcZEHTKYvkCCHyKiczYgDzF1IdU/RJRqX666A5j8WI%2b9ZvHT%2bz4dVGyF0bYVSxNJ3HeztPlPaVuqOj8XFSxY6QeEhAUD1ARLadb7zuPiDa2eaSuca1fdV9xWK/hPFNTtsgPhDKl7UmV8XK%2bwkYQbi17ie7BXgUa5021VzRwAyr9Of92h3//ukGCpY3sTcnNapTYPJ6JO98cbN8KvuKCeNO6s1mE3wtUKLUhQHbRrVht8y1hjZH1pEWsJUsCtg%2b4rFWFCCsIK5lqwA7yF1bF1fXKMLA8kLoqZ7YegfVPWQEmeHmd67IG19uiUunLeo1s0fZTibHAfXD3wFVJq%2beTgBftgZCynLJz9Gd2CoTdHpydHi1YKT4GOp4kUgdcVkXgyx5C7ZKEFYwT2UEmorqOHpbloMAqzX1g1mjOylJeUE%2bjfRmpT4RVCHbcTLMQM8q%2b1VWR7Vv6N8OX2pgSO32%2bl6/JuBandIZtiNQwmsbePaOZn0a5WQnZu8RgGmZgvKIHMr8HQvq45ldpGh3VMGB/pNozdozba446%2bNG85ThvfIQIwOsZNCYEP0aP2G6DGGi3sWs79/3Mooj/%2bUukhOXzmNURX39xPrWcO6Xm%2bsBLFgjdIez%2bHvmPSi2XpQbQEInkQ80Hl7VQpEKz5DwTa0V/tQ86yPOx8a2rP94bEDOxPLDFNnAbv2zT6a49e07uM9CVPg6r5lQAwtY1OUjEGL8ciNIxUvqXIze1RfPjEbCztqJVEHW0qNVWjShZ0Kip2tgOn71MNTG3j3adYXfe7iZ22Qp9QuU6KoX9d2jSbNGd33PDVcIod2Bwz4T/DvC0SAUJtP%2baKFnUagRRzau3Ja5r1v1/JaHvy2n4l%2bHkFYKmJaiNrvQoQb9KHJLpseastr8aHd1lK5HV02kxjnnaMr9ed3x%2btPbF0g/3xwBY9lR9bPhi8jB2UGfOwrlyjqfBV/liR5e1Xmqy5ga6OZPDTQ3E88alWr2BEj9y9UzX12bqvMlBL3KcwW73jhwgqEApbRBAF%2b5EEvduLADCqxI9gycGRJm3b3gIw0Ww%2bPMgxUlqOyO%2bIbaNPQG9xcStJ95ovF8xG1IhVyctAgj7cByBRWUVIyntyC7YsjZF7EvJoMZGqlihc2HXN5hwowjwMSblI3XoW%2bsUdGBVAvguYpUyZLnBMGo4I7UIZ76lu7%2bq33PFzTypUpEUmNrFci4fSwXpJRqyChaesUrtAehYMf5PSM8jev9SOvb%2bJTUwmE2n9DARcRYtPOlURafV/hGzL6v%2bHBiXXQt2MLKOTosF8yHrJornAJu5ygYPNu71Dhe5za3k43Mjf8h8jjs01tVlSArPxPwgNOo/t3XMXb6leSs8gCfs1YDdUqlSci42dpUbS5bmVL6tBqtTniCGgJUfQ75P/6W0cSeauL43cMhIsmD37jVPg2SlD%2b312k4%2bHX9i8n06csRdmKkCYpyJfmjllN6%2bhgZ4NpV/smROqlGn9972p6weK4C2CqObZx7jsNgsqROhMoipsU8pwC37Nz26iZqqcKE34%2bW%2bEFto4O9lKbRt5vRpIwMHIF2BewXUT/MGJIVwOaPaNuDj/Tg9r%2b5dgqcCro8M6zAeZ21rTe%2b8Z5XElmvNKMm4NUnuoTpd%2b6kFrPu4rUr1NLHgMihwa2RvyMux1lQADERCeHguDf57ZCjSruOYWzb7HzxntX8XCF/atnsE0Lx8KZHbG8tqjQaT0dwhDApnAhR52aCP3fr8Yf1cC8GsIVED4oICQmYgARIz3V8kURgzc70Qpa%2bXpbOuiYqyKCLHIUjkJ5lelaChVXGBVa6TNkrpQdauZK1cjezlZCisxv0qB29ZmInoi%2b6jHQMFMcoMYm%2bl%2bPT5paPROIe1Pj5PC62RzVGeE55vxb6XpCeshS02i%2bGAc0RI3fstevRYJRXmhxJR1eEgoQdTxezLh/iAiH1RUgsszEId0ASRm3POog60kB9w8Zoo3HbYKU2JU71SKEvlwB7q6lNvMjLjfTDOqeXpZiAWMHdrK6CwgF0HkCyj7KPHghldwSER49X%2bCSq10kxM9cAZ3b%2bm7k9btrKXp1NfeFAjpbXQFC%2bAErhOJkifwMAVolNVNRQZtprv7NfbS5ZQCEmLgCggNapRP8xUUb1G1t4QJDe/tb1QUEzyji7AjX0df5maNLO03mHxnanf4ekOvF0hcKaH2YTnIqCoCXg%2bABCPRvYmUFGM2fzg/S8RoyeX7S5OoumTJRnRqVqZfopKBWTS4qwMgGe37aNIUfZ72SbLIAU2//HRAigS8qubkYzxGj33MkeveAns4eU7iieRK%2bF1XgXHld3ruUKwCh5BJqayO/Nij9PcYxAO4E7UiZkkWtSomFArw83XAOqTz48XSMbtnz02Z0lNbTKi30D6p6cH9CMjFYOfGl54GHWlg0AWSFVGGxduATGaBuTU%2be%2b/nu39mrv5i2mAjaSiPp8dGii1itY1Rt3rigx/DHUUJdpASZiqQYgBgdbyV2pmQAZg0RPUJUAOMKoIIHxqT%2bXVpTRae61fqF/s18pDlj%2bvEbV3AtNf/4pnnGY%2b1UEXp4BC6lLZGRlPDH3zQvngzLqRiklx%2bby1bQBfiInEPGmEOELPP45nmk8Fk0N3SNd3J4SoOLHYYRP2NhxMAHsRMHPlEOMFmVBKnv71q6uPHZAuQACM9PS8Yn0/6V4zPuSnkpAif3DY7pkvHJUHoUdhPKGsn4aGy8ws6In09HmYwyUTI%2bBzheJfR%2bkmQ8DjdDaX0tRFmMkojBleoRO5v61LyKgfh7ZH1UyKyUW6b/D5iHXD7Pi%2bNmAAAAAElFTkSuQmCC' /%3e%3c/svg%3e" width="400" data-src="/assets/static/author1.fac0014.f32b3d6345829593250abc8f3b922256.png" data-srcset="/assets/static/author1.fac0014.f32b3d6345829593250abc8f3b922256.png 400w" data-sizes="(max-width: 400px) 100vw, 400px" class="h-16 w-16 md:h-24 md:w-24 mx-auto md:mx-0 md:mr-6 rounded-full bg-gray-200 g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/author1.fac0014.f32b3d6345829593250abc8f3b922256.png" class="h-16 w-16 md:h-24 md:w-24 mx-auto md:mx-0 md:mr-6 rounded-full bg-gray-200 g-image g-image--loaded" width="400"></noscript><div class="text-center md:text-left"><a href="/author/insutanto/" class="text-black dark:text-white"><h2 class="text-lg my-1 mt-2 md:mt-0">许臾insutanto</h2></a><!----><div class="font-light tracking-wider leading-relaxed py-4">又一个喜欢摄影和音乐的程序员。Java、Python双修，A6000系列、A7系列的索尼玩家，最近痴迷Rap。</div><div><a target="_blank" rel="noopener noreferrer" class="hover:text-blue-500"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="facebook" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-facebook fa-w-16"><path fill="currentColor" d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"></path></svg></a>
                       
                      <a target="_blank" rel="noopener noreferrer" class="hover:text-blue-500"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-twitter fa-w-16"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a>
                       
                      <a target="_blank" rel="noopener noreferrer" class="hover:text-blue-500"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="svg-inline--fa fa-linkedin fa-w-14"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></a></div></div></div></div></div></div></section></div></div></div><section class="post-related pt-10 border-b border-b-gray-900"><div class="container mx-auto"><div class="text-center"><h4 class="font-light my-0">Recommended for you</h4></div><div class="flex flex-wrap justify-center pt-8 pb-8"><div class="w-full md:w-1/2 lg:w-1/3 px-4 my-4"><div class="post-card border-gray-200 dark:border-gray-900 bg-white dark:bg-black rounded-lg hover:shadow-xl z-100 dark:bg-gray-900"><div class="post-card-author pt-4 pl-4"><a href="/author/insutanto/"><img alt="许臾insutanto" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 400 374' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-9ba158a90cb545680afa9a5f3c8a4b2f'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-9ba158a90cb545680afa9a5f3c8a4b2f)' width='400' height='374' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAA8CAYAAADWibxkAAAACXBIWXMAAAsTAAALEwEAmpwYAAAPRUlEQVRo3tVbB1hUxxa%2buwsCgtgLoiAqRkUTgxp8ir0HJYkFC3ZQ0YiKxoai2BsqCMEawW6sqIgIdo2YqNEYjf0ZWxJLTGKJyO6dk3Nm76zXdfHxlDWw33e%2bubvsXmbOnPL/58yVJOu8NBY%2bK4/SASUC5SuU7Si7UL5GiUYZiVIPpZAir7tXnn5plfF9lFiULii7UZ6iQA7kIcofKKtQiudHJYjJLrewOBklC0WPYlBEr/rM/PvH8tvui8UXQ7mlLEKvCFMJ/I/3sqIcUFwm31mBLcp5ZQEGswXy3dVqNXzUaNTXGrzWMvpMsQoa481cK0%2b/dMoYrFo8U5u1VqMxXeu0WovXigXQ%2bBilTH60gGNmu2/aYbHY9s0%2b4tfDevtDF7%2bG/NqvSV3wb%2b7Dijg76m1tbeizhPy0%2b2KHKis7J3aSqU2%2bf5fWsGLWMICbe2DGyN5wLiUe4P4hWDJ1CBzdMAfgzl72%2bMymrFmj%2btD3h9MNnQra2%2bQn829lbv42Njq%2b%2bPc8XIFd3gnw636QL%2b3gI1zb9eL6%2bm7I%2bimJwe9H9N98PZd%2bM5RuWLF8mXylgJ6q6P%2bSz%2b9bNR13Pg2endsKcCUZDBd3oGwH/YXt8PynJNDjtYGUcX23/tdjq6F4kULr6Yb%2bzXx0%2bSEGCAX0EwpAn2di52MnhvDFw610gBt7%2bIKzLiTxa7779DeSq7sYuoGMbgCeFcpeUwXBfGMB7RSz57m/RDFnoN2Eh0cAbqfDnoSpEDNhACydHgrLUBZP%2bRw2x4XDD8lxcARjQFriVDZ6QCc2LiQAqni4PqM0qNNp%2b1MoQCmQ5yEwBrsW6rxfq1pFSFkeCVu%2bDOcBcMqwQDi9YyHMGxcMwQGtwLeOF2CQg/IuJcCjXGkoW6oY/61v7erQsXUDiiMVbW1sxit8IW9D46oVy1GwiiroYPckqHNLcHZy4C5wfnc8PDq9EVZHjYSMTVGAQQ4WjO/P40Lqiim4%2b7EwvM8ncO/4WmjRoBZXwM3DCYwURgQJ79cVxxp5OiVibhcTmzRtRE84mxxniIkYyN5/rwLcPb4GXeAonNi2ANITpwE8OAyX05fCkB7tMCakwffbY7hy4LcDkDg7DOImhTBMjXJIt7akgOYOdgUoHZbK29jXRicUsPHbLfMpr%2bu7t2/M4OdUkCn1Yd4/uysOVs4JA/jjKM8CcHsvwN2DHA/8hRbyCAMfAiG4kLqIQeZJGNClDcHh%2bQXt7YLyPCBC3xdBMAp3EODZCf2ZnbE8tfHFKjLzi95wcM1Mivb8/Vczh8EKlITZw%2bHktmjo06E5hA8KYIfWzmLN639AFrDmkxY%2b9vkBDovdqVfZvSxcSl9CKY/Jl3YyAj84cqDz8OQGiJ88GOZjEKSAyFEhpsJt8eN5kNyFARO/x46sn8M8ypcmBTRQ7psvwJBQAkVsmDum33P0d0Y5H3ebKwP%2bu5vgLjw/vw1xwHZ%2bza3jl31Gl0BlIBhi8OS4/vMefqSA8crW6/I%2bEFACIebtDYL0HFo3i4KbbFLC5Z2Moz1ygavJHPmRhRAoEmgwi76LcHh%2beDApYAndE%2bNAviBE4uVZwNZmAtUEihRyfEppEO4dNBD0JSXggpmICZwb8ICYzkkR3EhlZB2ogKyRQZ%2bRAqZyC9DkAwvI5tW7ZLHCPMAh1JWJ%2bMjKrovF0/tTSTFs3rggRimRGCHyBYMSAxrmJ0psigXoBuoJBzes4/VQifwypkSMBSkm8oMpkG2KHQdRY4Pg/nfrZMQMz4M7t6LFrxXRP3/Vw2x0NF9tJbcyArtrqlYqd/HvH7dA5vlt8r7VMxghQwI%2bnCP8%2bQ3A4%2bOMxgt7FkPbxnVo8Wlenm4OeTb94ST5OH1ELypYCDKUnZ%2bu2LhwLLE%2bPVkBcf0%2bHVog0GkNE4d0YxMGd2EDurZBXlCdgM8NivzHN8/T5lnTb1qvJh%2bRwGgsLdrJ0Z4obMvK7i5%2bzk4FF6GScPH7yP95FsCAx578sBm%2bjhkDYX0/ZYO6fyz369SSCNH1aWE9y6rvhawybyoBCYpp4ZXcXBxx%2bJjyP2rkWxwfFS5UECiKI6IjQCRT5FeCnjENXktRXOCo0QX%2bOibHRw6C6pXdTtkXsA0kBUrG5oqU1yxBg4vjPonU1cWlVLFoDHg3pVebGmz9gtEyQWL0e9PiReSnkdIi5n8OlDIp9T08Ki%2bfMdS8epyKUsGs5pB7LxudTmrl%2b6HpfVri1JwUPnnlR6PRPJBe7foYMGSbmhxJiyYwxAC81qdevNnIhGU08K7GO0bILdR9hDsoHla1hKLOTpr6H1bV1qtVVRs9vr8GkQj//FRStKWvf6laeJaq%2bmvq8ogdpGrwjiURBIR47U9WLV4IL43dPciIBCkIUt0lylTu%2bZ21soFFja5bMEqLuVmHnFyHKUynYnsxqqKnLFno%2bkhm3R%2bShFnDcZEHTKYvkCCHyKiczYgDzF1IdU/RJRqX666A5j8WI%2b9ZvHT%2bz4dVGyF0bYVSxNJ3HeztPlPaVuqOj8XFSxY6QeEhAUD1ARLadb7zuPiDa2eaSuca1fdV9xWK/hPFNTtsgPhDKl7UmV8XK%2bwkYQbi17ie7BXgUa5021VzRwAyr9Of92h3//ukGCpY3sTcnNapTYPJ6JO98cbN8KvuKCeNO6s1mE3wtUKLUhQHbRrVht8y1hjZH1pEWsJUsCtg%2b4rFWFCCsIK5lqwA7yF1bF1fXKMLA8kLoqZ7YegfVPWQEmeHmd67IG19uiUunLeo1s0fZTibHAfXD3wFVJq%2beTgBftgZCynLJz9Gd2CoTdHpydHi1YKT4GOp4kUgdcVkXgyx5C7ZKEFYwT2UEmorqOHpbloMAqzX1g1mjOylJeUE%2bjfRmpT4RVCHbcTLMQM8q%2b1VWR7Vv6N8OX2pgSO32%2bl6/JuBandIZtiNQwmsbePaOZn0a5WQnZu8RgGmZgvKIHMr8HQvq45ldpGh3VMGB/pNozdozba446%2bNG85ThvfIQIwOsZNCYEP0aP2G6DGGi3sWs79/3Mooj/%2bUukhOXzmNURX39xPrWcO6Xm%2bsBLFgjdIez%2bHvmPSi2XpQbQEInkQ80Hl7VQpEKz5DwTa0V/tQ86yPOx8a2rP94bEDOxPLDFNnAbv2zT6a49e07uM9CVPg6r5lQAwtY1OUjEGL8ciNIxUvqXIze1RfPjEbCztqJVEHW0qNVWjShZ0Kip2tgOn71MNTG3j3adYXfe7iZ22Qp9QuU6KoX9d2jSbNGd33PDVcIod2Bwz4T/DvC0SAUJtP%2baKFnUagRRzau3Ja5r1v1/JaHvy2n4l%2bHkFYKmJaiNrvQoQb9KHJLpseastr8aHd1lK5HV02kxjnnaMr9ed3x%2btPbF0g/3xwBY9lR9bPhi8jB2UGfOwrlyjqfBV/liR5e1Xmqy5ga6OZPDTQ3E88alWr2BEj9y9UzX12bqvMlBL3KcwW73jhwgqEApbRBAF%2b5EEvduLADCqxI9gycGRJm3b3gIw0Ww%2bPMgxUlqOyO%2bIbaNPQG9xcStJ95ovF8xG1IhVyctAgj7cByBRWUVIyntyC7YsjZF7EvJoMZGqlihc2HXN5hwowjwMSblI3XoW%2bsUdGBVAvguYpUyZLnBMGo4I7UIZ76lu7%2bq33PFzTypUpEUmNrFci4fSwXpJRqyChaesUrtAehYMf5PSM8jev9SOvb%2bJTUwmE2n9DARcRYtPOlURafV/hGzL6v%2bHBiXXQt2MLKOTosF8yHrJornAJu5ygYPNu71Dhe5za3k43Mjf8h8jjs01tVlSArPxPwgNOo/t3XMXb6leSs8gCfs1YDdUqlSci42dpUbS5bmVL6tBqtTniCGgJUfQ75P/6W0cSeauL43cMhIsmD37jVPg2SlD%2b312k4%2bHX9i8n06csRdmKkCYpyJfmjllN6%2bhgZ4NpV/smROqlGn9972p6weK4C2CqObZx7jsNgsqROhMoipsU8pwC37Nz26iZqqcKE34%2bW%2bEFto4O9lKbRt5vRpIwMHIF2BewXUT/MGJIVwOaPaNuDj/Tg9r%2b5dgqcCro8M6zAeZ21rTe%2b8Z5XElmvNKMm4NUnuoTpd%2b6kFrPu4rUr1NLHgMihwa2RvyMux1lQADERCeHguDf57ZCjSruOYWzb7HzxntX8XCF/atnsE0Lx8KZHbG8tqjQaT0dwhDApnAhR52aCP3fr8Yf1cC8GsIVED4oICQmYgARIz3V8kURgzc70Qpa%2bXpbOuiYqyKCLHIUjkJ5lelaChVXGBVa6TNkrpQdauZK1cjezlZCisxv0qB29ZmInoi%2b6jHQMFMcoMYm%2bl%2bPT5paPROIe1Pj5PC62RzVGeE55vxb6XpCeshS02i%2bGAc0RI3fstevRYJRXmhxJR1eEgoQdTxezLh/iAiH1RUgsszEId0ASRm3POog60kB9w8Zoo3HbYKU2JU71SKEvlwB7q6lNvMjLjfTDOqeXpZiAWMHdrK6CwgF0HkCyj7KPHghldwSER49X%2bCSq10kxM9cAZ3b%2bm7k9btrKXp1NfeFAjpbXQFC%2bAErhOJkifwMAVolNVNRQZtprv7NfbS5ZQCEmLgCggNapRP8xUUb1G1t4QJDe/tb1QUEzyji7AjX0df5maNLO03mHxnanf4ekOvF0hcKaH2YTnIqCoCXg%2bABCPRvYmUFGM2fzg/S8RoyeX7S5OoumTJRnRqVqZfopKBWTS4qwMgGe37aNIUfZ72SbLIAU2//HRAigS8qubkYzxGj33MkeveAns4eU7iieRK%2bF1XgXHld3ruUKwCh5BJqayO/Nij9PcYxAO4E7UiZkkWtSomFArw83XAOqTz48XSMbtnz02Z0lNbTKi30D6p6cH9CMjFYOfGl54GHWlg0AWSFVGGxduATGaBuTU%2be%2b/nu39mrv5i2mAjaSiPp8dGii1itY1Rt3rigx/DHUUJdpASZiqQYgBgdbyV2pmQAZg0RPUJUAOMKoIIHxqT%2bXVpTRae61fqF/s18pDlj%2bvEbV3AtNf/4pnnGY%2b1UEXp4BC6lLZGRlPDH3zQvngzLqRiklx%2bby1bQBfiInEPGmEOELPP45nmk8Fk0N3SNd3J4SoOLHYYRP2NhxMAHsRMHPlEOMFmVBKnv71q6uPHZAuQACM9PS8Yn0/6V4zPuSnkpAif3DY7pkvHJUHoUdhPKGsn4aGy8ws6In09HmYwyUTI%2bBzheJfR%2bkmQ8DjdDaX0tRFmMkojBleoRO5v61LyKgfh7ZH1UyKyUW6b/D5iHXD7Pi%2bNmAAAAAElFTkSuQmCC' /%3e%3c/svg%3e" width="400" data-src="/assets/static/author1.fac0014.f32b3d6345829593250abc8f3b922256.png" data-srcset="/assets/static/author1.fac0014.f32b3d6345829593250abc8f3b922256.png 400w" data-sizes="(max-width: 400px) 100vw, 400px" class="w-8 h-8 rounded-full bg-gray-200 border-2 border-white g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/author1.fac0014.f32b3d6345829593250abc8f3b922256.png" class="w-8 h-8 rounded-full bg-gray-200 border-2 border-white g-image g-image--loaded" width="400" alt="许臾insutanto"></noscript></a></div><a href="/posts/scalene-python-cpu/" class="post-card-image-link"><!----><img alt="(翻译)Scalene - 一个 Python 的高性能 CPU 内存分析器" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1600 800' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-ad20debd6b78d594c0aee06ced1b8022'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-ad20debd6b78d594c0aee06ced1b8022)' width='1600' height='800' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAgAEADASIAAhEBAxEB/8QAGgAAAgMBAQAAAAAAAAAAAAAABAUCAwYBB//EACwQAAIBAwMCAwgDAAAAAAAAAAECAwAEEQUSIRMxQVGRBhUiMmFxgaFi0eH/xAAXAQEBAQEAAAAAAAAAAAAAAAADBAIB/8QAHBEAAwEAAwEBAAAAAAAAAAAAAAECEQMSMSFh/9oADAMBAAIRAxEAPwDzeG8ujjpk48STTTSLd5JS15LLGO%2b5H5/dJU1FcYgkjTJ5wwzVpuZG6rSMWUtsyRk%2bYoOT8E4009ZpL65s44wI9Qu5SONq4/ZBoRtaeCA9NyFHi/xGlDXbbVeGLCuNgJOTnuaitykaIkhl6jDDeG0eQ44%2b1B0KewQdebJL5lb%2bRIFCzaxNKRtMUYznCJz61O9trW2aOKaFzJ0wx2AY3EZ58cChLuCzhlkCw3QROS3kOP7rcqH4jNd16NbTU0mXZc8N4OpOPyKaLdPZS7UYMhG7JUspHrWHN3GrZh3qv1OSasXU3WPAdwfoxArNcG%2bHZ5s9Eu6rormSMYjkdfsaFroNWNaRp4aDS7g3bOsoieRVHTjbsxHgB9vWrLcEXKG4i3Luzko2TyM854NJtMmMN9bv5OPTPNNISj6jbpau43NnJznvQ3ONlEVqQd7Rl/e1y/RKkvyCGLEEdjjjH%2bVKeacCA2kE7hIgH%2bYDg9sHgjt3BqOuCb3owMohDAbt8jLg48fril99qhigNusgnfduMoY4yfIfihhOpnB6amqb%2bBuq6faS9OaMNaCUZfKEpG3Yrkfmld7pNxa7vjSTaAx2nuD2I86AN3N0jEJX6Rbdtzxnzrkd1LH8kjLzniniLlZpPfJFPUsP/9k=' /%3e%3c/svg%3e" width="1600" data-src="/assets/static/sergio-souza-mvb51ThjvRA-unsplash.872e63c.21c81be30c0705f173d0a2b3e99d5aff.jpg" data-srcset="/assets/static/sergio-souza-mvb51ThjvRA-unsplash.bb17b12.21c81be30c0705f173d0a2b3e99d5aff.jpg 480w, /assets/static/sergio-souza-mvb51ThjvRA-unsplash.b28baf0.21c81be30c0705f173d0a2b3e99d5aff.jpg 1024w, /assets/static/sergio-souza-mvb51ThjvRA-unsplash.872e63c.21c81be30c0705f173d0a2b3e99d5aff.jpg 1600w" data-sizes="(max-width: 1600px) 100vw, 1600px" class="post-card-image g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/sergio-souza-mvb51ThjvRA-unsplash.872e63c.21c81be30c0705f173d0a2b3e99d5aff.jpg" class="post-card-image g-image g-image--loaded" width="1600" alt="(翻译)Scalene - 一个 Python 的高性能 CPU 内存分析器"></noscript></a><div class="post-card-content bg-white dark:bg-gray-900 h-full rounded-b-lg"><div class="flex-col relative flex justify-between px-6 pt-4"><p class="text-xs tracking-wide font-medium mt-3 dark:text-white"><a href="/category/technology/">Technology</a></p></div><a href="/posts/scalene-python-cpu/" class="flex-col relative flex justify-between rounded-b-lg px-6 h-40 mt-2 dark:text-white"><h3 class="post-card-title tracking-wide mt-0">(翻译)Scalene - 一个 Python 的高性能 CPU 内存分析器</h3><div class="text-xs leading-none absolute bottom-0 pb-6"><p><time datetime="Thu Apr 16 2020 12:00:00 UTC+00:00">16 April 2020</time>
             • 
            7 min read
          </p></div></a></div></div></div></div></div></section><div class="bg-blue-900 dark:bg-gray-900 text-white dark:text-gray-400 text-center text-sm"><div class="container mx-auto py-16"><div class="mb-4"><p>
        Copyright 2020 by 指间须臾 · Powered by
        <a href="https://www.gridsome.org" target="_blank">Gridsome</a></p><p>备案号：粤ICP备19087193号-1</p></div><div class="mb-4"><ul class="list-reset flex justify-center"><li class="px-4"><a href="#" target="_blank" title="Weibo"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="weibo" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-weibo fa-w-16 fa-lg"><path fill="currentColor" d="M407 177.6c7.6-24-13.4-46.8-37.4-41.7-22 4.8-28.8-28.1-7.1-32.8 50.1-10.9 92.3 37.1 76.5 84.8-6.8 21.2-38.8 10.8-32-10.3zM214.8 446.7C108.5 446.7 0 395.3 0 310.4c0-44.3 28-95.4 76.3-143.7C176 67 279.5 65.8 249.9 161c-4 13.1 12.3 5.7 12.3 6 79.5-33.6 140.5-16.8 114 51.4-3.7 9.4 1.1 10.9 8.3 13.1 135.7 42.3 34.8 215.2-169.7 215.2zm143.7-146.3c-5.4-55.7-78.5-94-163.4-85.7-84.8 8.6-148.8 60.3-143.4 116s78.5 94 163.4 85.7c84.8-8.6 148.8-60.3 143.4-116zM347.9 35.1c-25.9 5.6-16.8 43.7 8.3 38.3 72.3-15.2 134.8 52.8 111.7 124-7.4 24.2 29.1 37 37.4 12 31.9-99.8-55.1-195.9-157.4-174.3zm-78.5 311c-17.1 38.8-66.8 60-109.1 46.3-40.8-13.1-58-53.4-40.3-89.7 17.7-35.4 63.1-55.4 103.4-45.1 42 10.8 63.1 50.2 46 88.5zm-86.3-30c-12.9-5.4-30 .3-38 12.9-8.3 12.9-4.3 28 8.6 34 13.1 6 30.8.3 39.1-12.9 8-13.1 3.7-28.3-9.7-34zm32.6-13.4c-5.1-1.7-11.4.6-14.3 5.4-2.9 5.1-1.4 10.6 3.7 12.9 5.1 2 11.7-.3 14.6-5.4 2.8-5.2 1.1-10.9-4-12.9z"></path></svg></a></li><li class="px-4"><a href="#" target="_blank" title="Github"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" class="svg-inline--fa fa-github fa-w-16 fa-lg"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a></li><li class="px-4"><a href="#" target="_blank" title="Instagram"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="instagram" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="svg-inline--fa fa-instagram fa-w-14 fa-lg"><path fill="currentColor" d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"></path></svg></a></li><li class="px-4"><a href="#" target="_blank" title="Twitter"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-twitter fa-w-16 fa-lg"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a></li></ul></div><div class="mb-4"><ul class="list-reset flex justify-center"><li class="px-4"><a href="/" title="Latest Posts" class="active">Latest Posts</a><!----></li><li class="px-4"><!----><a href="https://www.facebook.com" target="_blank" title="Facebook">Facebook</a></li><li class="px-4"><!----><a href="https://www.gridsome.org" target="_blank" title="Gridsome">Gridsome</a></li><li class="px-4"><a href="/rss.xml" title="RSS">RSS</a><!----></li></ul></div></div></div></div>
    <script src="/assets/js/app.a8ef14bf.js" defer></script><script src="/assets/js/page--src--templates--blog-post-vue.7aadcd63.js" defer></script>
  </body>
</html>