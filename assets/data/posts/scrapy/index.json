{"hash":"53b314447cb24ae1a7848b5936b53351cfcdebf4","data":{"blog":{"title":"Scrapyåˆ†å¸ƒå¼çˆ¬è™«ï¼Œåˆ†å¸ƒå¼é˜Ÿåˆ—å’Œå¸ƒéš†è¿‡æ»¤å™¨ï¼Œä¸€åˆ†é’Ÿæå®šï¼Ÿ","path":"/posts/scrapy/","image":{"type":"image","mimeType":"image/jpeg","src":"/assets/static/sergio-souza-mvb51ThjvRA-unsplash.872e63c.21c81be30c0705f173d0a2b3e99d5aff.jpg","size":{"width":1600,"height":800},"sizes":"(max-width: 1600px) 100vw, 1600px","srcset":["/assets/static/sergio-souza-mvb51ThjvRA-unsplash.bb17b12.21c81be30c0705f173d0a2b3e99d5aff.jpg 480w","/assets/static/sergio-souza-mvb51ThjvRA-unsplash.b28baf0.21c81be30c0705f173d0a2b3e99d5aff.jpg 1024w","/assets/static/sergio-souza-mvb51ThjvRA-unsplash.872e63c.21c81be30c0705f173d0a2b3e99d5aff.jpg 1600w"],"dataUri":"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1600 800' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-ad20debd6b78d594c0aee06ced1b8022'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-ad20debd6b78d594c0aee06ced1b8022)' width='1600' height='800' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAgAEADASIAAhEBAxEB/8QAGgAAAgMBAQAAAAAAAAAAAAAABAUCAwYBB//EACwQAAIBAwMCAwgDAAAAAAAAAAECAwAEEQUSIRMxQVGRBhUiMmFxgaFi0eH/xAAXAQEBAQEAAAAAAAAAAAAAAAADBAIB/8QAHBEAAwEAAwEBAAAAAAAAAAAAAAECEQMSMSFh/9oADAMBAAIRAxEAPwDzeG8ujjpk48STTTSLd5JS15LLGO%2b5H5/dJU1FcYgkjTJ5wwzVpuZG6rSMWUtsyRk%2bYoOT8E4009ZpL65s44wI9Qu5SONq4/ZBoRtaeCA9NyFHi/xGlDXbbVeGLCuNgJOTnuaitykaIkhl6jDDeG0eQ44%2b1B0KewQdebJL5lb%2bRIFCzaxNKRtMUYznCJz61O9trW2aOKaFzJ0wx2AY3EZ58cChLuCzhlkCw3QROS3kOP7rcqH4jNd16NbTU0mXZc8N4OpOPyKaLdPZS7UYMhG7JUspHrWHN3GrZh3qv1OSasXU3WPAdwfoxArNcG%2bHZ5s9Eu6rormSMYjkdfsaFroNWNaRp4aDS7g3bOsoieRVHTjbsxHgB9vWrLcEXKG4i3Luzko2TyM854NJtMmMN9bv5OPTPNNISj6jbpau43NnJznvQ3ONlEVqQd7Rl/e1y/RKkvyCGLEEdjjjH%2bVKeacCA2kE7hIgH%2bYDg9sHgjt3BqOuCb3owMohDAbt8jLg48fril99qhigNusgnfduMoY4yfIfihhOpnB6amqb%2bBuq6faS9OaMNaCUZfKEpG3Yrkfmld7pNxa7vjSTaAx2nuD2I86AN3N0jEJX6Rbdtzxnzrkd1LH8kjLzniniLlZpPfJFPUsP/9k=' /%3e%3c/svg%3e"},"image_caption":"Photo by Steven Wong on Unsplash","excerpt":"ä½¿ç”¨Scrapyæœ€å¿«é€Ÿçš„å¼€å‘ä¸€ä¸ªåˆ†å¸ƒå¼çˆ¬è™«ï¼ŒåŸºäºScrapyï¼ŒRabbitmq å’Œ RedisBloom","content":"<p>ä½¿ç”¨Scrapyå¼€å‘ä¸€ä¸ªåˆ†å¸ƒå¼çˆ¬è™«ï¼Ÿä½ çŸ¥é“æœ€å¿«çš„æ–¹æ³•æ˜¯ä»€ä¹ˆå—ï¼Ÿä¸€åˆ†é’ŸçœŸçš„èƒ½ å¼€å‘å¥½æˆ–è€…ä¿®æ”¹å‡º ä¸€ä¸ªåˆ†å¸ƒå¼çˆ¬è™«å—ï¼Ÿ</p>\n<p>è¯ä¸å¤šè¯´ï¼Œå…ˆè®©æˆ‘ä»¬çœ‹çœ‹æ€ä¹ˆå®è·µï¼Œå†è¯¦ç»†èŠèŠç»†èŠ‚~</p>\n<h2 id=\"å¿«é€Ÿä¸Šæ‰‹\"><a href=\"#%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>å¿«é€Ÿä¸Šæ‰‹</h2>\n<h3 id=\"step-0\"><a href=\"#step-0\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>Step 0:</strong></h3>\n<p>é¦–å…ˆå®‰è£… Scrapy-Distributed :</p>\n<div class=\"gridsome-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">pip install scrapy-distributed</code></pre></div>\n<p>(éå¿…é¡»)å¦‚æœä½ æ²¡æœ‰æ‰€éœ€è¦çš„è¿è¡Œæ¡ä»¶ï¼Œä½ å¯ä»¥å¯åŠ¨ä¸¤ä¸ª Docker é•œåƒè¿›è¡Œæµ‹è¯• (RabbitMQ å’Œ RedisBloom):</p>\n<div class=\"gridsome-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># pull and run a RabbitMQ container.</span>\ndocker run -d --name rabbitmq -p <span class=\"token number\">0.0</span>.0.0:15672:15672 -p <span class=\"token number\">0.0</span>.0.0:5672:5672 rabbitmq:3\n<span class=\"token comment\"># pull and run a RedisBloom container.</span>\ndocker run -d --name redis-redisbloom -p <span class=\"token number\">0.0</span>.0.0:6379:6379 redislabs/rebloom:latest</code></pre></div>\n<h3 id=\"step-1-éå¿…é¡»\"><a href=\"#step-1-%E9%9D%9E%E5%BF%85%E9%A1%BB\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Step 1 (éå¿…é¡»):</h3>\n<p>å¦‚æœä½ æœ‰ä¸€ä¸ªç°æˆçš„çˆ¬è™«ï¼Œå¯ä»¥è·³è¿‡è¿™ä¸ª Stepï¼Œç›´æ¥åˆ° Step 2ã€‚</p>\n<p>åˆ›å»ºä¸€ä¸ªçˆ¬è™«å·¥ç¨‹ï¼Œæˆ‘è¿™é‡Œä»¥ä¸€ä¸ª sitemap çˆ¬è™«ä¸ºä¾‹:</p>\n<div class=\"gridsome-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">scrapy startproject simple_example</code></pre></div>\n<p>ç„¶åä¿®æ”¹ spiders æ–‡ä»¶å¤¹ä¸‹çš„çˆ¬è™«ç¨‹åºæ–‡ä»¶:</p>\n<div class=\"gridsome-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> scrapy_distributed<span class=\"token punctuation\">.</span>spiders<span class=\"token punctuation\">.</span>sitemap <span class=\"token keyword\">import</span> SitemapSpider\n<span class=\"token keyword\">from</span> scrapy_distributed<span class=\"token punctuation\">.</span>queues<span class=\"token punctuation\">.</span>amqp <span class=\"token keyword\">import</span> QueueConfig\n<span class=\"token keyword\">from</span> scrapy_distributed<span class=\"token punctuation\">.</span>dupefilters<span class=\"token punctuation\">.</span>redis_bloom <span class=\"token keyword\">import</span> RedisBloomConfig\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MySpider</span><span class=\"token punctuation\">(</span>SitemapSpider<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    name <span class=\"token operator\">=</span> <span class=\"token string\">\"example\"</span>\n    sitemap_urls <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"http://www.people.com.cn/robots.txt\"</span><span class=\"token punctuation\">]</span>\n    queue_conf<span class=\"token punctuation\">:</span> QueueConfig <span class=\"token operator\">=</span> QueueConfig<span class=\"token punctuation\">(</span>\n        name<span class=\"token operator\">=</span><span class=\"token string\">\"example\"</span><span class=\"token punctuation\">,</span> durable<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> arguments<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"x-queue-mode\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"lazy\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"x-max-priority\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">255</span><span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">)</span>\n    redis_bloom_conf<span class=\"token punctuation\">:</span> RedisBloomConfig <span class=\"token operator\">=</span> RedisBloomConfig<span class=\"token punctuation\">(</span>key<span class=\"token operator\">=</span><span class=\"token string\">\"example:dupefilter\"</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        self<span class=\"token punctuation\">.</span>logger<span class=\"token punctuation\">.</span>info<span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"parse response, url: </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>response<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">}</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"step-2\"><a href=\"#step-2\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>Step 2:</strong></h3>\n<p>åªéœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ settings.py ä¸‹çš„<code class=\"language-text\">SCHEDULER</code>,Â <code class=\"language-text\">DUPEFILTER_CLASS</code>Â å¹¶ä¸”æ·»åŠ  RabbitMQ å’Œ Redis çš„ç›¸å…³é…ç½®ï¼Œä½ å°±å¯ä»¥é©¬ä¸Šè·å¾—ä¸€ä¸ªåˆ†å¸ƒå¼çˆ¬è™«ï¼ŒScrapy-Distributed ä¼šå¸®ä½ åˆå§‹åŒ–ä¸€ä¸ªé»˜è®¤é…ç½®çš„ RabbitMQ é˜Ÿåˆ—å’Œä¸€ä¸ªé»˜è®¤é…ç½®çš„ RedisBloom å¸ƒéš†è¿‡æ»¤å™¨ã€‚</p>\n<div class=\"gridsome-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">SCHEDULER = &quot;scrapy_distributed.schedulers.DistributedScheduler&quot;\nSCHEDULER_QUEUE_CLASS = &quot;scrapy_distributed.queues.amqp.RabbitQueue&quot;\nRABBITMQ_CONNECTION_PARAMETERS = &quot;amqp://guest:guest@localhost:5672/example/?heartbeat=0&quot;\nDUPEFILTER_CLASS = &quot;scrapy_distributed.dupefilters.redis_bloom.RedisBloomDupeFilter&quot;\nBLOOM_DUPEFILTER_REDIS_URL = &quot;redis://:@localhost:6379/0&quot;\nBLOOM_DUPEFILTER_REDIS_HOST = &quot;localhost&quot;\nBLOOM_DUPEFILTER_REDIS_PORT = 6379\nREDIS_BLOOM_PARAMS = {\n    &quot;redis_cls&quot;: &quot;redisbloom.client.Client&quot;\n}\nBLOOM_DUPEFILTER_ERROR_RATE = 0.001\nBLOOM_DUPEFILTER_CAPACITY = 100_0000</code></pre></div>\n<p>ä½ ä¹Ÿå¯ä»¥ç»™ä½ çš„ Spider ç±»ï¼Œå¢åŠ ä¸¤ä¸ªç±»å±æ€§ï¼Œæ¥åˆå§‹åŒ–ä½ çš„ RabbitMQ é˜Ÿåˆ—æˆ– RedisBloom å¸ƒéš†è¿‡æ»¤å™¨:</p>\n<div class=\"gridsome-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">MySpider</span><span class=\"token punctuation\">(</span>SitemapSpider<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\t\t<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n    queue_conf<span class=\"token punctuation\">:</span> QueueConfig <span class=\"token operator\">=</span> QueueConfig<span class=\"token punctuation\">(</span>\n        name<span class=\"token operator\">=</span><span class=\"token string\">\"example\"</span><span class=\"token punctuation\">,</span> durable<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> arguments<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"x-queue-mode\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"lazy\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"x-max-priority\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">255</span><span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">)</span>\n    redis_bloom_conf<span class=\"token punctuation\">:</span> RedisBloomConfig <span class=\"token operator\">=</span> RedisBloomConfig<span class=\"token punctuation\">(</span>key<span class=\"token operator\">=</span><span class=\"token string\">\"example:dupefilter\"</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n<h3 id=\"step-3\"><a href=\"#step-3\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><strong>Step 3:</strong></h3>\n<div class=\"gridsome-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">scrapy crawl &lt;your_spider&gt;</code></pre></div>\n<p>æ£€æŸ¥ä¸€ä¸‹ä½ çš„ RabbitMQ é˜Ÿåˆ— å’Œ RedisBloom è¿‡æ»¤å™¨ï¼Œæ˜¯ä¸æ˜¯å·²ç»æ­£å¸¸è¿è¡Œäº†ï¼Ÿ</p>\n<p>å¯ä»¥çœ‹åˆ°ï¼ŒScrapy-Distributed çš„åŠ æŒä¸‹ï¼Œæˆ‘ä»¬åªéœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå°±å¯ä»¥å°†æ™®é€šçˆ¬è™«ä¿®æ”¹æˆæ”¯æŒ RabbitMQ é˜Ÿåˆ— å’Œ RedisBloom å¸ƒéš†è¿‡æ»¤å™¨çš„åˆ†å¸ƒå¼çˆ¬è™«ã€‚åœ¨æ‹¥æœ‰ RabbitMQ å’Œ RedisBloom ç¯å¢ƒçš„æƒ…å†µä¸‹ï¼Œä¿®æ”¹é…ç½®çš„æ—¶é—´ä¹Ÿå°±ä¸€åˆ†é’Ÿã€‚ğŸ˜‚</p>\n<h2 id=\"å…³äºscrapy-distributed\"><a href=\"#%E5%85%B3%E4%BA%8Escrapy-distributed\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>å…³äºScrapy-Distributed</h2>\n<p>ç›®å‰ Scrapy-Distributed ä¸»è¦å‚è€ƒäº†Scrapy-Redis å’Œ scrapy-rabbitmq è¿™ä¸¤ä¸ªåº“ã€‚</p>\n<p>å¦‚æœä½ æœ‰è¿‡ Scrapy çš„ç›¸å…³ç»éªŒï¼Œå¯èƒ½ä¼šçŸ¥é“ Scrapy-Redis è¿™ä¸ªåº“ï¼Œå¯ä»¥å¾ˆå¿«é€Ÿçš„åšåˆ†å¸ƒå¼çˆ¬è™«ï¼Œå¦‚æœä½ å°è¯•è¿‡ä½¿ç”¨ RabbitMQ ä½œä¸ºçˆ¬è™«çš„ä»»åŠ¡é˜Ÿåˆ—ï¼Œä½ å¯èƒ½è¿˜è§åˆ°è¿‡ scrapy-rabbitmq è¿™ä¸ªé¡¹ç›®ã€‚è¯šç„¶ Scrapy-Redis å·²ç»å¾ˆæ–¹ä¾¿äº†ï¼Œscrapy-rabbitmq ä¹Ÿèƒ½å®ç° RabbitMQ ä½œä¸ºä»»åŠ¡é˜Ÿåˆ—ï¼Œä½†æ˜¯ä»–ä»¬å­˜åœ¨ä¸€äº›ç¼ºé™·ï¼Œæˆ‘è¿™é‡Œç®€å•æå‡ºå‡ ä¸ªé—®é¢˜ã€‚</p>\n<ol>\n<li>Scrapy-Redis ä½¿ç”¨ Redis çš„ set å»é‡ï¼Œé“¾æ¥æ•°é‡è¶Šå¤§å ç”¨çš„å†…å­˜å°±è¶Šå¤§ï¼Œä¸é€‚åˆä»»åŠ¡æ•°é‡å¤§çš„åˆ†å¸ƒå¼çˆ¬è™«ã€‚</li>\n<li>Scrapy-Redis ä½¿ç”¨ Redis çš„ list ä½œä¸ºé˜Ÿåˆ—ï¼Œå¾ˆå¤šåœºæ™¯ä¼šæœ‰ä»»åŠ¡ç§¯å‹ï¼Œä¼šå¯¼è‡´å†…å­˜èµ„æºæ¶ˆè€—è¿‡å¿«ï¼Œæ¯”å¦‚æˆ‘ä»¬çˆ¬å–ç½‘ç«™ sitemap æ—¶ï¼Œé“¾æ¥å…¥é˜Ÿçš„é€Ÿåº¦è¿œè¿œå¤§äºå‡ºé˜Ÿã€‚</li>\n<li>scrapy-rabbitmq ç­‰ RabbitMQ çš„ Scrapy ç»„ä»¶ï¼Œåœ¨åˆ›å»ºé˜Ÿåˆ—æ–¹é¢ï¼Œæ²¡æœ‰æä¾› RabbitMQ æ”¯æŒçš„å„ç§å‚æ•°ï¼Œæ— æ³•æ§åˆ¶é˜Ÿåˆ—çš„æŒä¹…åŒ–ç­‰å‚æ•°ã€‚</li>\n<li>scrapy-rabbitmq ç­‰ rabbitmq æ¡†æ¶çš„ Scheduler æš‚æœªæ”¯æŒåˆ†å¸ƒå¼çš„ dupefilter ï¼Œéœ€è¦ä½¿ç”¨è€…è‡ªè¡Œå¼€å‘æˆ–æ¥å…¥ç›¸å…³ç»„ä»¶ã€‚</li>\n<li>Scrapy-Redis å’Œ scrapy-rabbitmq ç­‰æ¡†æ¶éƒ½æ˜¯ä¾µå…¥å¼çš„ï¼Œå¦‚æœéœ€è¦ç”¨è¿™äº›æ¡†æ¶å¼€å‘åˆ†å¸ƒå¼çš„çˆ¬è™«ï¼Œéœ€è¦æˆ‘ä»¬ä¿®æ”¹è‡ªå·±çš„çˆ¬è™«ä»£ç ï¼Œé€šè¿‡ç»§æ‰¿æ¡†æ¶çš„ Spider ç±»ï¼Œæ‰èƒ½å®ç°åˆ†å¸ƒå¼åŠŸèƒ½ã€‚</li>\n</ol>\n<p>äºæ˜¯ï¼ŒScrapy-Distributed æ¡†æ¶å°±åœ¨è¿™ä¸ªæ—¶å€™è¯ç”Ÿäº†ï¼Œåœ¨éä¾µå…¥å¼è®¾è®¡ä¸‹ï¼Œä½ åªéœ€è¦é€šè¿‡ä¿®æ”¹ settings.py ä¸‹çš„é…ç½®ï¼Œæ¡†æ¶å°±å¯ä»¥æ ¹æ®é»˜è®¤é…ç½®å°†ä½ çš„çˆ¬è™«åˆ†å¸ƒå¼åŒ–ã€‚</p>\n<p>ä¸ºäº†è§£å†³Scrapy-Redis å’Œ scrapy-rabbitmq å­˜åœ¨çš„ä¸€äº›ç—›ç‚¹ï¼ŒScrapy-Distributed åšäº†ä¸‹é¢å‡ ä»¶äº‹:</p>\n<ol>\n<li>é‡‡ç”¨äº† RedisBloom çš„å¸ƒéš†è¿‡æ»¤å™¨ï¼Œå†…å­˜å ç”¨æ›´å°‘ã€‚</li>\n<li>æ”¯æŒäº† RabbitMQ é˜Ÿåˆ—å£°æ˜çš„æ‰€æœ‰å‚æ•°é…ç½®ï¼Œå¯ä»¥è®© RabbitMQ é˜Ÿåˆ—æ”¯æŒ lazy-mode æ¨¡å¼ï¼Œå°†å‡å°‘å†…å­˜å ç”¨ã€‚</li>\n<li>RabbitMQ çš„é˜Ÿåˆ—å£°æ˜æ›´åŠ çµæ´»ï¼Œä¸åŒçˆ¬è™«å¯ä»¥ä½¿ç”¨ç›¸åŒé˜Ÿåˆ—é…ç½®ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸åŒçš„é˜Ÿåˆ—é…ç½®ã€‚</li>\n<li>Scheduler çš„è®¾è®¡ä¸Šæ”¯æŒå¤šä¸ªç»„ä»¶çš„æ­é…ç»„åˆï¼Œå¯ä»¥å•ç‹¬ä½¿ç”¨ RedisBloom çš„DupeFilterï¼Œä¹Ÿå¯ä»¥å•ç‹¬ä½¿ç”¨ RabbitMQ çš„ Scheduler æ¨¡å—ã€‚</li>\n<li>å®ç°äº† Scrapy åˆ†å¸ƒå¼åŒ–çš„éä¾µå…¥å¼è®¾è®¡ï¼Œåªéœ€è¦ä¿®æ”¹é…ç½®ï¼Œå°±å¯ä»¥å°†æ™®é€šçˆ¬è™«åˆ†å¸ƒå¼åŒ–ã€‚</li>\n</ol>\n<p>ç›®å‰æ¡†æ¶è¿˜æœ‰å¾ˆå¤šåŠŸèƒ½æ­£åœ¨æ·»åŠ ï¼Œæ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥æŒç»­å…³æ³¨é¡¹ç›®ä»“åº“çš„åŠ¨å‘ï¼Œæœ‰ä»€ä¹ˆæƒ³æ³•ä¹Ÿå¯ä»¥ä¸€èµ·è®¨è®ºã€‚</p>\n<p>Scrapy-Distributed çš„ github ä»“åº“åœ°å€ï¼š<a href=\"https://github.com/Insutanto/scrapy-distributed\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://github.com/Insutanto/scrapy-distributed</a></p>\n","humanTime":"16 April 2020","datetime":"Thu Apr 16 2020 12:00:00 UTC+00:00","timeToRead":5,"tags":[{"id":"Python","title":"Python","path":"/tags/python/"},{"id":"Scrapy","title":"Scrapy","path":"/tags/scrapy/"},{"id":"Distributed","title":"Distributed","path":"/tags/distributed/"}],"category":{"id":"Technology","title":"Technology","path":"/category/technology/","belongsTo":{"totalCount":5,"edges":[{"node":{"title":"Neo4j schema ç´¢å¼•å¯¹æŸ¥è¯¢çš„å½±å“","path":"/posts/neo4j-schema/"}},{"node":{"title":"PySpark UDFçš„å‘ä¸ç»•","path":"/posts/py-spark-udf/"}},{"node":{"title":"Python memory profiler ä¸Šæ‰‹å®è·µ","path":"/posts/python-memory-profiler/"}},{"node":{"title":"(ç¿»è¯‘)Scalene - ä¸€ä¸ª Python çš„é«˜æ€§èƒ½ CPU å†…å­˜åˆ†æå™¨","path":"/posts/scalene-python-cpu/"}}]}},"author":[{"id":"insutanto","name":"è®¸è‡¾insutanto","image":{"type":"image","mimeType":"image/png","src":"/assets/static/author1.fac0014.f32b3d6345829593250abc8f3b922256.png","size":{"width":400,"height":374},"sizes":"(max-width: 400px) 100vw, 400px","srcset":["/assets/static/author1.fac0014.f32b3d6345829593250abc8f3b922256.png 400w"],"dataUri":"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 400 374' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-9ba158a90cb545680afa9a5f3c8a4b2f'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-9ba158a90cb545680afa9a5f3c8a4b2f)' width='400' height='374' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAA8CAYAAADWibxkAAAACXBIWXMAAAsTAAALEwEAmpwYAAAPRUlEQVRo3tVbB1hUxxa%2buwsCgtgLoiAqRkUTgxp8ir0HJYkFC3ZQ0YiKxoai2BsqCMEawW6sqIgIdo2YqNEYjf0ZWxJLTGKJyO6dk3Nm76zXdfHxlDWw33e%2bubvsXmbOnPL/58yVJOu8NBY%2bK4/SASUC5SuU7Si7UL5GiUYZiVIPpZAir7tXnn5plfF9lFiULii7UZ6iQA7kIcofKKtQiudHJYjJLrewOBklC0WPYlBEr/rM/PvH8tvui8UXQ7mlLEKvCFMJ/I/3sqIcUFwm31mBLcp5ZQEGswXy3dVqNXzUaNTXGrzWMvpMsQoa481cK0%2b/dMoYrFo8U5u1VqMxXeu0WovXigXQ%2bBilTH60gGNmu2/aYbHY9s0%2b4tfDevtDF7%2bG/NqvSV3wb%2b7Dijg76m1tbeizhPy0%2b2KHKis7J3aSqU2%2bf5fWsGLWMICbe2DGyN5wLiUe4P4hWDJ1CBzdMAfgzl72%2bMymrFmj%2btD3h9MNnQra2%2bQn829lbv42Njq%2b%2bPc8XIFd3gnw636QL%2b3gI1zb9eL6%2bm7I%2bimJwe9H9N98PZd%2bM5RuWLF8mXylgJ6q6P%2bSz%2b9bNR13Pg2endsKcCUZDBd3oGwH/YXt8PynJNDjtYGUcX23/tdjq6F4kULr6Yb%2bzXx0%2bSEGCAX0EwpAn2di52MnhvDFw610gBt7%2bIKzLiTxa7779DeSq7sYuoGMbgCeFcpeUwXBfGMB7RSz57m/RDFnoN2Eh0cAbqfDnoSpEDNhACydHgrLUBZP%2bRw2x4XDD8lxcARjQFriVDZ6QCc2LiQAqni4PqM0qNNp%2b1MoQCmQ5yEwBrsW6rxfq1pFSFkeCVu%2bDOcBcMqwQDi9YyHMGxcMwQGtwLeOF2CQg/IuJcCjXGkoW6oY/61v7erQsXUDiiMVbW1sxit8IW9D46oVy1GwiiroYPckqHNLcHZy4C5wfnc8PDq9EVZHjYSMTVGAQQ4WjO/P40Lqiim4%2b7EwvM8ncO/4WmjRoBZXwM3DCYwURgQJ79cVxxp5OiVibhcTmzRtRE84mxxniIkYyN5/rwLcPb4GXeAonNi2ANITpwE8OAyX05fCkB7tMCakwffbY7hy4LcDkDg7DOImhTBMjXJIt7akgOYOdgUoHZbK29jXRicUsPHbLfMpr%2bu7t2/M4OdUkCn1Yd4/uysOVs4JA/jjKM8CcHsvwN2DHA/8hRbyCAMfAiG4kLqIQeZJGNClDcHh%2bQXt7YLyPCBC3xdBMAp3EODZCf2ZnbE8tfHFKjLzi95wcM1Mivb8/Vczh8EKlITZw%2bHktmjo06E5hA8KYIfWzmLN639AFrDmkxY%2b9vkBDovdqVfZvSxcSl9CKY/Jl3YyAj84cqDz8OQGiJ88GOZjEKSAyFEhpsJt8eN5kNyFARO/x46sn8M8ypcmBTRQ7psvwJBQAkVsmDum33P0d0Y5H3ebKwP%2bu5vgLjw/vw1xwHZ%2bza3jl31Gl0BlIBhi8OS4/vMefqSA8crW6/I%2bEFACIebtDYL0HFo3i4KbbFLC5Z2Moz1ygavJHPmRhRAoEmgwi76LcHh%2beDApYAndE%2bNAviBE4uVZwNZmAtUEihRyfEppEO4dNBD0JSXggpmICZwb8ICYzkkR3EhlZB2ogKyRQZ%2bRAqZyC9DkAwvI5tW7ZLHCPMAh1JWJ%2bMjKrovF0/tTSTFs3rggRimRGCHyBYMSAxrmJ0psigXoBuoJBzes4/VQifwypkSMBSkm8oMpkG2KHQdRY4Pg/nfrZMQMz4M7t6LFrxXRP3/Vw2x0NF9tJbcyArtrqlYqd/HvH7dA5vlt8r7VMxghQwI%2bnCP8%2bQ3A4%2bOMxgt7FkPbxnVo8Wlenm4OeTb94ST5OH1ELypYCDKUnZ%2bu2LhwLLE%2bPVkBcf0%2bHVog0GkNE4d0YxMGd2EDurZBXlCdgM8NivzHN8/T5lnTb1qvJh%2bRwGgsLdrJ0Z4obMvK7i5%2bzk4FF6GScPH7yP95FsCAx578sBm%2bjhkDYX0/ZYO6fyz369SSCNH1aWE9y6rvhawybyoBCYpp4ZXcXBxx%2bJjyP2rkWxwfFS5UECiKI6IjQCRT5FeCnjENXktRXOCo0QX%2bOibHRw6C6pXdTtkXsA0kBUrG5oqU1yxBg4vjPonU1cWlVLFoDHg3pVebGmz9gtEyQWL0e9PiReSnkdIi5n8OlDIp9T08Ki%2bfMdS8epyKUsGs5pB7LxudTmrl%2b6HpfVri1JwUPnnlR6PRPJBe7foYMGSbmhxJiyYwxAC81qdevNnIhGU08K7GO0bILdR9hDsoHla1hKLOTpr6H1bV1qtVVRs9vr8GkQj//FRStKWvf6laeJaq%2bmvq8ogdpGrwjiURBIR47U9WLV4IL43dPciIBCkIUt0lylTu%2bZ21soFFja5bMEqLuVmHnFyHKUynYnsxqqKnLFno%2bkhm3R%2bShFnDcZEHTKYvkCCHyKiczYgDzF1IdU/RJRqX666A5j8WI%2b9ZvHT%2bz4dVGyF0bYVSxNJ3HeztPlPaVuqOj8XFSxY6QeEhAUD1ARLadb7zuPiDa2eaSuca1fdV9xWK/hPFNTtsgPhDKl7UmV8XK%2bwkYQbi17ie7BXgUa5021VzRwAyr9Of92h3//ukGCpY3sTcnNapTYPJ6JO98cbN8KvuKCeNO6s1mE3wtUKLUhQHbRrVht8y1hjZH1pEWsJUsCtg%2b4rFWFCCsIK5lqwA7yF1bF1fXKMLA8kLoqZ7YegfVPWQEmeHmd67IG19uiUunLeo1s0fZTibHAfXD3wFVJq%2beTgBftgZCynLJz9Gd2CoTdHpydHi1YKT4GOp4kUgdcVkXgyx5C7ZKEFYwT2UEmorqOHpbloMAqzX1g1mjOylJeUE%2bjfRmpT4RVCHbcTLMQM8q%2b1VWR7Vv6N8OX2pgSO32%2bl6/JuBandIZtiNQwmsbePaOZn0a5WQnZu8RgGmZgvKIHMr8HQvq45ldpGh3VMGB/pNozdozba446%2bNG85ThvfIQIwOsZNCYEP0aP2G6DGGi3sWs79/3Mooj/%2bUukhOXzmNURX39xPrWcO6Xm%2bsBLFgjdIez%2bHvmPSi2XpQbQEInkQ80Hl7VQpEKz5DwTa0V/tQ86yPOx8a2rP94bEDOxPLDFNnAbv2zT6a49e07uM9CVPg6r5lQAwtY1OUjEGL8ciNIxUvqXIze1RfPjEbCztqJVEHW0qNVWjShZ0Kip2tgOn71MNTG3j3adYXfe7iZ22Qp9QuU6KoX9d2jSbNGd33PDVcIod2Bwz4T/DvC0SAUJtP%2baKFnUagRRzau3Ja5r1v1/JaHvy2n4l%2bHkFYKmJaiNrvQoQb9KHJLpseastr8aHd1lK5HV02kxjnnaMr9ed3x%2btPbF0g/3xwBY9lR9bPhi8jB2UGfOwrlyjqfBV/liR5e1Xmqy5ga6OZPDTQ3E88alWr2BEj9y9UzX12bqvMlBL3KcwW73jhwgqEApbRBAF%2b5EEvduLADCqxI9gycGRJm3b3gIw0Ww%2bPMgxUlqOyO%2bIbaNPQG9xcStJ95ovF8xG1IhVyctAgj7cByBRWUVIyntyC7YsjZF7EvJoMZGqlihc2HXN5hwowjwMSblI3XoW%2bsUdGBVAvguYpUyZLnBMGo4I7UIZ76lu7%2bq33PFzTypUpEUmNrFci4fSwXpJRqyChaesUrtAehYMf5PSM8jev9SOvb%2bJTUwmE2n9DARcRYtPOlURafV/hGzL6v%2bHBiXXQt2MLKOTosF8yHrJornAJu5ygYPNu71Dhe5za3k43Mjf8h8jjs01tVlSArPxPwgNOo/t3XMXb6leSs8gCfs1YDdUqlSci42dpUbS5bmVL6tBqtTniCGgJUfQ75P/6W0cSeauL43cMhIsmD37jVPg2SlD%2b312k4%2bHX9i8n06csRdmKkCYpyJfmjllN6%2bhgZ4NpV/smROqlGn9972p6weK4C2CqObZx7jsNgsqROhMoipsU8pwC37Nz26iZqqcKE34%2bW%2bEFto4O9lKbRt5vRpIwMHIF2BewXUT/MGJIVwOaPaNuDj/Tg9r%2b5dgqcCro8M6zAeZ21rTe%2b8Z5XElmvNKMm4NUnuoTpd%2b6kFrPu4rUr1NLHgMihwa2RvyMux1lQADERCeHguDf57ZCjSruOYWzb7HzxntX8XCF/atnsE0Lx8KZHbG8tqjQaT0dwhDApnAhR52aCP3fr8Yf1cC8GsIVED4oICQmYgARIz3V8kURgzc70Qpa%2bXpbOuiYqyKCLHIUjkJ5lelaChVXGBVa6TNkrpQdauZK1cjezlZCisxv0qB29ZmInoi%2b6jHQMFMcoMYm%2bl%2bPT5paPROIe1Pj5PC62RzVGeE55vxb6XpCeshS02i%2bGAc0RI3fstevRYJRXmhxJR1eEgoQdTxezLh/iAiH1RUgsszEId0ASRm3POog60kB9w8Zoo3HbYKU2JU71SKEvlwB7q6lNvMjLjfTDOqeXpZiAWMHdrK6CwgF0HkCyj7KPHghldwSER49X%2bCSq10kxM9cAZ3b%2bm7k9btrKXp1NfeFAjpbXQFC%2bAErhOJkifwMAVolNVNRQZtprv7NfbS5ZQCEmLgCggNapRP8xUUb1G1t4QJDe/tb1QUEzyji7AjX0df5maNLO03mHxnanf4ekOvF0hcKaH2YTnIqCoCXg%2bABCPRvYmUFGM2fzg/S8RoyeX7S5OoumTJRnRqVqZfopKBWTS4qwMgGe37aNIUfZ72SbLIAU2//HRAigS8qubkYzxGj33MkeveAns4eU7iieRK%2bF1XgXHld3ruUKwCh5BJqayO/Nij9PcYxAO4E7UiZkkWtSomFArw83XAOqTz48XSMbtnz02Z0lNbTKi30D6p6cH9CMjFYOfGl54GHWlg0AWSFVGGxduATGaBuTU%2be%2b/nu39mrv5i2mAjaSiPp8dGii1itY1Rt3rigx/DHUUJdpASZiqQYgBgdbyV2pmQAZg0RPUJUAOMKoIIHxqT%2bXVpTRae61fqF/s18pDlj%2bvEbV3AtNf/4pnnGY%2b1UEXp4BC6lLZGRlPDH3zQvngzLqRiklx%2bby1bQBfiInEPGmEOELPP45nmk8Fk0N3SNd3J4SoOLHYYRP2NhxMAHsRMHPlEOMFmVBKnv71q6uPHZAuQACM9PS8Yn0/6V4zPuSnkpAif3DY7pkvHJUHoUdhPKGsn4aGy8ws6In09HmYwyUTI%2bBzheJfR%2bkmQ8DjdDaX0tRFmMkojBleoRO5v61LyKgfh7ZH1UyKyUW6b/D5iHXD7Pi%2bNmAAAAAElFTkSuQmCC' /%3e%3c/svg%3e"},"path":"/author/insutanto/","bio":"åˆä¸€ä¸ªå–œæ¬¢æ‘„å½±å’ŒéŸ³ä¹çš„ç¨‹åºå‘˜ã€‚Javaã€PythonåŒä¿®ï¼ŒA6000ç³»åˆ—ã€A7ç³»åˆ—çš„ç´¢å°¼ç©å®¶ï¼Œæœ€è¿‘ç—´è¿·Rapã€‚"}]},"related":{"edges":[{"node":{"title":"(ç¿»è¯‘)Scalene - ä¸€ä¸ª Python çš„é«˜æ€§èƒ½ CPU å†…å­˜åˆ†æå™¨","path":"/posts/scalene-python-cpu/","image":{"type":"image","mimeType":"image/jpeg","src":"/assets/static/sergio-souza-mvb51ThjvRA-unsplash.872e63c.21c81be30c0705f173d0a2b3e99d5aff.jpg","size":{"width":1600,"height":800},"sizes":"(max-width: 1600px) 100vw, 1600px","srcset":["/assets/static/sergio-souza-mvb51ThjvRA-unsplash.bb17b12.21c81be30c0705f173d0a2b3e99d5aff.jpg 480w","/assets/static/sergio-souza-mvb51ThjvRA-unsplash.b28baf0.21c81be30c0705f173d0a2b3e99d5aff.jpg 1024w","/assets/static/sergio-souza-mvb51ThjvRA-unsplash.872e63c.21c81be30c0705f173d0a2b3e99d5aff.jpg 1600w"],"dataUri":"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1600 800' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-ad20debd6b78d594c0aee06ced1b8022'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-ad20debd6b78d594c0aee06ced1b8022)' width='1600' height='800' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAgAEADASIAAhEBAxEB/8QAGgAAAgMBAQAAAAAAAAAAAAAABAUCAwYBB//EACwQAAIBAwMCAwgDAAAAAAAAAAECAwAEEQUSIRMxQVGRBhUiMmFxgaFi0eH/xAAXAQEBAQEAAAAAAAAAAAAAAAADBAIB/8QAHBEAAwEAAwEBAAAAAAAAAAAAAAECEQMSMSFh/9oADAMBAAIRAxEAPwDzeG8ujjpk48STTTSLd5JS15LLGO%2b5H5/dJU1FcYgkjTJ5wwzVpuZG6rSMWUtsyRk%2bYoOT8E4009ZpL65s44wI9Qu5SONq4/ZBoRtaeCA9NyFHi/xGlDXbbVeGLCuNgJOTnuaitykaIkhl6jDDeG0eQ44%2b1B0KewQdebJL5lb%2bRIFCzaxNKRtMUYznCJz61O9trW2aOKaFzJ0wx2AY3EZ58cChLuCzhlkCw3QROS3kOP7rcqH4jNd16NbTU0mXZc8N4OpOPyKaLdPZS7UYMhG7JUspHrWHN3GrZh3qv1OSasXU3WPAdwfoxArNcG%2bHZ5s9Eu6rormSMYjkdfsaFroNWNaRp4aDS7g3bOsoieRVHTjbsxHgB9vWrLcEXKG4i3Luzko2TyM854NJtMmMN9bv5OPTPNNISj6jbpau43NnJznvQ3ONlEVqQd7Rl/e1y/RKkvyCGLEEdjjjH%2bVKeacCA2kE7hIgH%2bYDg9sHgjt3BqOuCb3owMohDAbt8jLg48fril99qhigNusgnfduMoY4yfIfihhOpnB6amqb%2bBuq6faS9OaMNaCUZfKEpG3Yrkfmld7pNxa7vjSTaAx2nuD2I86AN3N0jEJX6Rbdtzxnzrkd1LH8kjLzniniLlZpPfJFPUsP/9k=' /%3e%3c/svg%3e"},"image_caption":"Photo by Steven Wong on Unsplash","excerpt":"Anxius nec ibimus utque illa circa video est fuit labores alas. Vincere ferociaarva.","content":"<p>by <a href=\"https://emeryberger.com\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Emery Berger</a></p>\n<hr>\n<h1 id=\"å…³äº-scalene\"><a href=\"#%E5%85%B3%E4%BA%8E-scalene\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>å…³äº Scalene</h1>\n<p>Scalene æ˜¯ä¸€ä¸ª Python çš„é«˜æ€§èƒ½ CPU <em>å’Œ</em> å†…å­˜åˆ†æå™¨ï¼Œå®ƒå¯ä»¥åšåˆ°å¾ˆå¤šå…¶ä»–Pythonåˆ†æå™¨ä¸èƒ½åšåˆ°çš„äº‹æƒ…ã€‚å®ƒåœ¨èƒ½æä¾›æ›´å¤šè¯¦ç»†ä¿¡æ¯çš„åŒæ—¶ï¼Œæ¯”å…¶ä»–çš„åˆ†æå™¨è¦å¿«å‡ ä¸ªæ•°é‡çº§ã€‚</p>\n<ol>\n<li>Scalene æ˜¯ <em>å¾ˆå¿«çš„</em>ã€‚ å®ƒä½¿ç”¨é‡‡æ ·çš„æ–¹å¼è€Œä¸æ˜¯ç›´æ¥æµ‹é‡æˆ–è€…ä¾é Pythonçš„è¿½è¸ªå·¥å…·ã€‚å®ƒçš„å¼€é”€ä¸€èˆ¬ä¸è¶…è¿‡10-20% (é€šå¸¸æ›´å°‘)ã€‚</li>\n<li>Scalene æ˜¯ <em>ç²¾ç¡®çš„</em>ã€‚å’Œå¤§éƒ¨åˆ†å…¶ä»–çš„Pythonåˆ†æå™¨ä¸åŒï¼ŒScalene åœ¨ <em>è¡Œçº§åˆ«</em> ä¸‹æ‰§è¡ŒCPUåˆ†æï¼Œåœ¨ä½ çš„ç¨‹åºä¸­æŒ‡å‡ºå¯¹åº”ä»£ç è¡Œçš„æ‰§è¡Œæ—¶é—´ã€‚å’Œå¤§å¤šæ•°åˆ†æå™¨æ‰€è¿”å›çš„åŠŸèƒ½çº§åˆ†æç»“æœç›¸æ¯”ï¼Œè¿™ç§ç¨‹åº¦çš„ç»†èŠ‚å¯èƒ½ä¼šæ›´æœ‰ç”¨ã€‚</li>\n<li>Scalane å¯ä»¥åŒºåˆ†åœ¨Pythonä¸­è¿è¡Œçš„æ—¶é—´å’Œåœ¨nativeä»£ç (åŒ…æ‹¬åº“)ä¸­èŠ±è´¹çš„æ—¶é—´ã€‚å¤§å¤šæ•°çš„Pythonç¨‹åºå‘˜å¹¶ä¸ä¼šå»ä¼˜åŒ–nativeä»£ç (é€šå¸¸åœ¨Pythonå®ç°ä¸­æˆ–è€…æ‰€ä¾èµ–çš„å¤–éƒ¨åº“)ï¼Œæ‰€ä»¥åŒºåˆ†è¿™ä¸¤ç§è¿è¡Œæ—¶é—´ï¼Œæœ‰åŠ©äºå¼€å‘è€…èƒ½å¤Ÿå°†ä¼˜åŒ–çš„å·¥ä½œä¸“æ³¨äºä»–ä»¬èƒ½å¤Ÿå®é™…æ”¹å–„çš„ä»£ç ä¸Šã€‚</li>\n<li>Scalene å¯ä»¥ <em>åˆ†æå†…å­˜ä½¿ç”¨æƒ…å†µ</em>ã€‚é™¤äº†è¿½è¸ªCPUä½¿ç”¨æƒ…å†µï¼ŒScaleneè¿˜æŒ‡å‡ºå¯¹åº”ä»£ç è¡Œçš„å†…å­˜å¢é•¿ã€‚è¿™æ˜¯é€šè¿‡æŒ‡å®šå†…å­˜åˆ†é…å™¨æ¥å®ç°çš„ã€‚</li>\n<li><strong>NEW!</strong> Scalene ä¼šç”Ÿæˆ <em>æ¯è¡Œ</em> çš„å†…å­˜åˆ†æï¼Œä»¥æ­¤æ›´å®¹æ˜“çš„è¿½è¸ªå†…å­˜æ³„éœ²ã€‚</li>\n<li><strong>NEW!</strong> Scalene ä¼šåˆ†æ <em>å†…å­˜æ‹·è´é‡</em>, ä»è€Œæ˜“äºå‘ç°æ„å¤–çš„å†…å­˜æ‹·è´ã€‚ç‰¹åˆ«æ˜¯å› ä¸ºè·¨è¶ŠPythonå’Œåº•å±‚åº“çš„è¾¹ç•Œå¯¼è‡´çš„æ„å¤– (ä¾‹å¦‚ï¼šæ„å¤–çš„æŠŠ <code class=\"language-text\">numpy</code> æ•°ç»„è½¬åŒ–æˆäº†Pythonæ•°ç»„ï¼Œåä¹‹äº¦ç„¶)ã€‚</li>\n</ol>\n<h2 id=\"å®‰è£…\"><a href=\"#%E5%AE%89%E8%A3%85\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>å®‰è£…</h2>\n<p>Scalene é€šè¿‡ pip åŒ…çš„å½¢å¼è¿›è¡Œåˆ†å‘ï¼Œå¯ä»¥è¿è¡Œåœ¨Mac OS Xå’ŒLinuxå¹³å°(åŒ…æ‹¬åœ¨<a href=\"docs.microsoft.com/en-us/windows/wsl/wsl2-index\">Windows WSL2</a>ä¸­è¿è¡Œçš„Ubuntu)ã€‚ </p>\n<p>ä½ å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹å¼å®‰è£…ï¼š</p>\n<div class=\"gridsome-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">  % pip install scalene</code></pre></div>\n<p>æˆ–è€…</p>\n<div class=\"gridsome-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">  % python -m pip install scalene</code></pre></div>\n<p><em>æ³¨æ„</em>: ç°åœ¨è¿™æ ·å®‰è£…Scaleneï¼Œæ˜¯ä¸ä¼šå®‰è£…å†…å­˜åˆ†æçš„åº“ï¼Œæ‰€ä»¥ä½ åªèƒ½ç”¨å®ƒæ¥æ‰§è¡ŒCPUçš„åˆ†æã€‚å¦‚æœè¦ä½¿ç”¨å®ƒçš„å†…å­˜åˆ†æèƒ½åŠ›ï¼Œä½ éœ€è¦ä¸‹è½½è¿™ä¸ªä»£ç ä»“åº“ã€‚</p>\n<p><strong>NEW</strong>: ä½ ç°åœ¨å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤ï¼Œåœ¨ Mac OS X ä¸Šä½¿ç”¨ brew å®‰è£…å†…å­˜åˆ†æçš„éƒ¨åˆ†ï¼š</p>\n<div class=\"gridsome-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">  % brew tap emeryberger/scalene\n  % brew install --head libscalene</code></pre></div>\n<p>è¿™å°†ä¼šå®‰è£…ä¸€ä¸ªä½ å¯ä»¥ä½¿ç”¨çš„ <code class=\"language-text\">scalene</code> è„šæœ¬ï¼ˆä¸‹é¢ä¼šæåˆ°ï¼‰ã€‚</p>\n<h1 id=\"ä½¿ç”¨\"><a href=\"#%E4%BD%BF%E7%94%A8\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>ä½¿ç”¨</h1>\n<p>ä¸‹é¢çš„å‘½ä»¤ä¼šè®© Scalene åœ¨æä¾›çš„ç¤ºä¾‹ç¨‹åºä¸Šæ‰§è¡Œ è¡Œçº§åˆ«çš„CPUåˆ†æã€‚</p>\n<div class=\"gridsome-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">  % scalene test/testme.py</code></pre></div>\n<p>å¦‚æœä½ ä½¿ç”¨Homebrewå®‰è£… Scalene åº“ï¼Œä½ åªéœ€è¦æ‰§è¡Œ <code class=\"language-text\">scalene</code> å°±å¯ä»¥æ‰§è¡Œè¡Œçº§åˆ«çš„CPUå’Œå†…å­˜åˆ†æï¼š</p>\n<div class=\"gridsome-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">  % scalene test/testme.py</code></pre></div>\n<p>å¦åˆ™ï¼Œä½ éœ€è¦è¿è¡Œ <code class=\"language-text\">make</code> æ¥å…ˆæ„å»ºä¸€ä¸ªæŒ‡å®šçš„å†…å­˜åˆ†é…å™¨ï¼š</p>\n<div class=\"gridsome-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">  % make</code></pre></div>\n<p>åœ¨ Mac OS X ç³»ç»Ÿä¸Šè¿›è¡Œåˆ†æ(ä¸ä½¿ç”¨Homebrewå®‰è£…)ï¼š</p>\n<div class=\"gridsome-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">  % DYLD_INSERT_LIBRARIES=$PWD/libscalene.dylib PYTHONMALLOC=malloc scalene test/testme.py</code></pre></div>\n<p>åœ¨Linuxç³»ç»Ÿä¸Šåˆ†æï¼š</p>\n<div class=\"gridsome-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">  % LD_PRELOAD=$PWD/libscalene.so PYTHONMALLOC=malloc scalene test/testme.py</code></pre></div>\n<p>æ‰§è¡Œæ—¶å¢åŠ  <code class=\"language-text\">--help</code> æ¥æŸ¥çœ‹å…¨éƒ¨é…ç½®ï¼š</p>\n<div class=\"gridsome-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">% scalene --help\nusage: scalene [-h] [-o OUTFILE] [--profile-interval PROFILE_INTERVAL]\n               [--wallclock]\n               prog\n\nScalene: a high-precision CPU and memory profiler.\n            https://github.com/emeryberger/Scalene\n\n                for CPU profiling only:\n            % scalene yourprogram.py\n                for CPU and memory profiling (Mac OS X):\n            % DYLD_INSERT_LIBRARIES=$PWD/libscalene.dylib PYTHONMALLOC=malloc scalene yourprogram.py\n                for CPU and memory profiling (Linux):\n            % LD_PRELOAD=$PWD/libscalene.so PYTHONMALLOC=malloc scalene yourprogram.py\n\npositional arguments:\n  prog                  program to be profiled\n\noptional arguments:\n  -h, --help            show this help message and exit\n  -o OUTFILE, --outfile OUTFILE\n                        file to hold profiler output (default: stdout)\n  --profile-interval PROFILE_INTERVAL\n                        output profiles every so many seconds.\n  --wallclock           use wall clock time (default: virtual time)</code></pre></div>\n<h1 id=\"å¯¹æ¯”å…¶ä»–åˆ†æå™¨\"><a href=\"#%E5%AF%B9%E6%AF%94%E5%85%B6%E4%BB%96%E5%88%86%E6%9E%90%E5%99%A8\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>å¯¹æ¯”å…¶ä»–åˆ†æå™¨</h1>\n<h2 id=\"æ€§èƒ½å’ŒåŠŸèƒ½\"><a href=\"#%E6%80%A7%E8%83%BD%E5%92%8C%E5%8A%9F%E8%83%BD\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>æ€§èƒ½å’ŒåŠŸèƒ½</h2>\n<p>ä¸‹é¢çš„è¡¨æ ¼æŠŠ scalene å’Œä¸åŒåˆ†æå™¨çš„<strong>æ€§èƒ½</strong>åšäº†æ¯”è¾ƒã€‚è¿è¡Œçš„ç¤ºä¾‹ç¨‹åº  (<code class=\"language-text\">benchmarks/julia1_nopil.py</code>) æ¥è‡ªäº Gorelick å’Œ Ozsvald çš„ <em>ã€Šé«˜æ€§èƒ½Pythonç¼–ç¨‹ã€‹</em>ã€‚æ‰€æœ‰çš„è¿™äº›ç»“æœéƒ½æ˜¯åœ¨ 2016æ¬¾ MacBook Proä¸Šè¿è¡Œçš„ã€‚</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">Profiler</th>\n<th align=\"right\">Time</th>\n<th align=\"right\">Slowdown</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\"><em>original program</em></td>\n<td align=\"right\">6.71s</td>\n<td align=\"right\">1.0x</td>\n</tr>\n<tr>\n<td align=\"left\"></td>\n<td align=\"right\"></td>\n<td align=\"right\"></td>\n</tr>\n<tr>\n<td align=\"left\"><code class=\"language-text\">cProfile</code></td>\n<td align=\"right\">11.04s</td>\n<td align=\"right\">1.65x</td>\n</tr>\n<tr>\n<td align=\"left\"><code class=\"language-text\">Profile</code></td>\n<td align=\"right\">202.26s</td>\n<td align=\"right\">30.14x</td>\n</tr>\n<tr>\n<td align=\"left\"><code class=\"language-text\">pyinstrument</code></td>\n<td align=\"right\">9.83s</td>\n<td align=\"right\">1.46x</td>\n</tr>\n<tr>\n<td align=\"left\"><code class=\"language-text\">line_profiler</code></td>\n<td align=\"right\">78.0s</td>\n<td align=\"right\">11.62x</td>\n</tr>\n<tr>\n<td align=\"left\"><code class=\"language-text\">pprofile</code> <em>(deterministic)</em></td>\n<td align=\"right\">403.67s</td>\n<td align=\"right\">60.16x</td>\n</tr>\n<tr>\n<td align=\"left\"><code class=\"language-text\">pprofile</code> <em>(statistical)</em></td>\n<td align=\"right\">7.47s</td>\n<td align=\"right\">1.11x</td>\n</tr>\n<tr>\n<td align=\"left\"><code class=\"language-text\">yappi</code> <em>(CPU)</em></td>\n<td align=\"right\">127.53s</td>\n<td align=\"right\">19.01x</td>\n</tr>\n<tr>\n<td align=\"left\"><code class=\"language-text\">yappi</code> <em>(wallclock)</em></td>\n<td align=\"right\">21.45s</td>\n<td align=\"right\">3.2x</td>\n</tr>\n<tr>\n<td align=\"left\"><code class=\"language-text\">py-spy</code></td>\n<td align=\"right\">7.25s</td>\n<td align=\"right\">1.08x</td>\n</tr>\n<tr>\n<td align=\"left\"><code class=\"language-text\">memory_profiler</code></td>\n<td align=\"right\"><em>> 2 hours</em></td>\n<td align=\"right\"><strong>>1000x</strong></td>\n</tr>\n<tr>\n<td align=\"left\"></td>\n<td align=\"right\"></td>\n<td align=\"right\"></td>\n</tr>\n<tr>\n<td align=\"left\"><code class=\"language-text\">scalene</code> <em>(CPU only)</em></td>\n<td align=\"right\">6.98s</td>\n<td align=\"right\"><strong>1.04x</strong></td>\n</tr>\n<tr>\n<td align=\"left\"><code class=\"language-text\">scalene</code> <em>(CPU + memory)</em></td>\n<td align=\"right\">7.68s</td>\n<td align=\"right\"><strong>1.14x</strong></td>\n</tr>\n</tbody>\n</table>\n<p>è¿™ä¸ªè¡¨æ ¼æ˜¯å…¶ä»–åˆ†æå™¨ vs. Scalene çš„<strong>åŠŸèƒ½</strong>æ¯”è¾ƒã€‚</p>\n<table>\n<thead>\n<tr>\n<th align=\"right\">Profiler</th>\n<th align=\"center\">Line-level?</th>\n<th align=\"center\">CPU?</th>\n<th align=\"center\">Wall clock vs. CPU time?</th>\n<th align=\"center\">Python vs. native?</th>\n<th align=\"center\">Memory?</th>\n<th align=\"center\">Unmodified code?</th>\n<th align=\"center\">Threads?</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"right\"><code class=\"language-text\">cProfile</code></td>\n<td align=\"center\"></td>\n<td align=\"center\">âœ”</td>\n<td align=\"center\">wall clock</td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n<td align=\"center\">âœ”</td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"right\"><code class=\"language-text\">Profile</code></td>\n<td align=\"center\"></td>\n<td align=\"center\">âœ”</td>\n<td align=\"center\">CPU time</td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n<td align=\"center\">âœ”</td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"right\"><code class=\"language-text\">pyinstrument</code></td>\n<td align=\"center\"></td>\n<td align=\"center\">âœ”</td>\n<td align=\"center\">wall clock</td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n<td align=\"center\">âœ”</td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"right\"><code class=\"language-text\">line_profiler</code></td>\n<td align=\"center\">âœ”</td>\n<td align=\"center\">âœ”</td>\n<td align=\"center\">wall clock</td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"right\"><code class=\"language-text\">pprofile</code> <em>(deterministic)</em></td>\n<td align=\"center\">âœ”</td>\n<td align=\"center\">âœ”</td>\n<td align=\"center\">wall clock</td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n<td align=\"center\">âœ”</td>\n<td align=\"center\">âœ”</td>\n</tr>\n<tr>\n<td align=\"right\"><code class=\"language-text\">pprofile</code> <em>(statistical)</em></td>\n<td align=\"center\">âœ”</td>\n<td align=\"center\">âœ”</td>\n<td align=\"center\">wall clock</td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n<td align=\"center\">âœ”</td>\n<td align=\"center\">âœ”</td>\n</tr>\n<tr>\n<td align=\"right\"><code class=\"language-text\">yappi</code> <em>(CPU)</em></td>\n<td align=\"center\"></td>\n<td align=\"center\">âœ”</td>\n<td align=\"center\">CPU time</td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n<td align=\"center\">âœ”</td>\n<td align=\"center\">âœ”</td>\n</tr>\n<tr>\n<td align=\"right\"><code class=\"language-text\">yappi</code> <em>(wallclock)</em></td>\n<td align=\"center\"></td>\n<td align=\"center\">âœ”</td>\n<td align=\"center\">wall clock</td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n<td align=\"center\">âœ”</td>\n<td align=\"center\">âœ”</td>\n</tr>\n<tr>\n<td align=\"right\"><code class=\"language-text\">py-spy</code></td>\n<td align=\"center\">âœ”</td>\n<td align=\"center\">âœ”</td>\n<td align=\"center\"><strong>both</strong></td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n<td align=\"center\">âœ”</td>\n<td align=\"center\">âœ”</td>\n</tr>\n<tr>\n<td align=\"right\"><code class=\"language-text\">memory_profiler</code></td>\n<td align=\"center\">âœ”</td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n<td align=\"center\">âœ”</td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"right\"></td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"right\"><code class=\"language-text\">scalene</code> <em>(CPU only)</em></td>\n<td align=\"center\">âœ”</td>\n<td align=\"center\">âœ”</td>\n<td align=\"center\"><strong>both</strong></td>\n<td align=\"center\">âœ”</td>\n<td align=\"center\"></td>\n<td align=\"center\">âœ”</td>\n<td align=\"center\">âœ”</td>\n</tr>\n<tr>\n<td align=\"right\"><code class=\"language-text\">scalene</code> <em>(CPU + memory)</em></td>\n<td align=\"center\">âœ”</td>\n<td align=\"center\">âœ”</td>\n<td align=\"center\"><strong>both</strong></td>\n<td align=\"center\">âœ”</td>\n<td align=\"center\">âœ”</td>\n<td align=\"center\">âœ”</td>\n<td align=\"center\">âœ”</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"è¾“å‡º\"><a href=\"#%E8%BE%93%E5%87%BA\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>è¾“å‡º</h2>\n<p>Scalene æ‰“å°è¢«åˆ†æç¨‹åºä¸­å¸¦æ³¨é‡Šçš„æºä»£ç ï¼Œä»¥åŠç¨‹åºåœ¨åŒç›®å½•å’Œå­ç›®å½•ä½¿ç”¨åˆ°çš„ä»»ä½•æ¨¡å—ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªæ¥è‡ª pystone.py <code class=\"language-text\">pystone.py</code> çš„ç‰‡æ®µï¼Œåªä½¿ç”¨äº†CPUåˆ†æï¼š</p>\n<div class=\"gridsome-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">    benchmarks/pystone.py: % of CPU time = 100.00% out of   3.66s.\n          \t |     CPU % |     CPU % |   \n      Line\t |  (Python) |  (native) |  [benchmarks/pystone.py]\n    --------------------------------------------------------------------------------\n    [... lines omitted ...]\n       137\t |     0.27% |     0.14% | def Proc1(PtrParIn):\n       138\t |     1.37% |     0.11% |     PtrParIn.PtrComp = NextRecord = PtrGlb.copy()\n       139\t |     0.27% |     0.22% |     PtrParIn.IntComp = 5\n       140\t |     1.37% |     0.77% |     NextRecord.IntComp = PtrParIn.IntComp\n       141\t |     2.47% |     0.93% |     NextRecord.PtrComp = PtrParIn.PtrComp\n       142\t |     1.92% |     0.78% |     NextRecord.PtrComp = Proc3(NextRecord.PtrComp)\n       143\t |     0.27% |     0.17% |     if NextRecord.Discr == Ident1:\n       144\t |     0.82% |     0.30% |         NextRecord.IntComp = 6\n       145\t |     2.19% |     0.79% |         NextRecord.EnumComp = Proc6(PtrParIn.EnumComp)\n       146\t |     1.10% |     0.39% |         NextRecord.PtrComp = PtrGlb.PtrComp\n       147\t |     0.82% |     0.06% |         NextRecord.IntComp = Proc7(NextRecord.IntComp, 10)\n       148\t |           |           |     else:\n       149\t |           |           |         PtrParIn = NextRecord.copy()\n       150\t |     0.82% |     0.32% |     NextRecord.PtrComp = None\n       151\t |           |           |     return PtrParIn</code></pre></div>\n<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå¯ç”¨äº†å†…å­˜åˆ†æçš„ç¤ºä¾‹ï¼Œè¿è¡Œçš„æ˜¯Juliaçš„åŸºå‡†æµ‹è¯•ã€‚ç¬¬ä¸€è¡Œæ˜¯ä¸€ä¸ªâ€œsparklineâ€ï¼Œæ€»ç»“äº†ä¸€æ®µæ—¶é—´å†…çš„å†…å­˜æ¶ˆè€—ã€‚</p>\n<div class=\"gridsome-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">    Memory usage: â–â–â–„â–‡â–ˆâ–‡â–‡â–‡â–ˆâ–‡â–ˆâ–‡â–ˆâ–‡â–ˆâ–‡â–ˆâ–‡â–‡â–‡â–‡â–ˆâ–‡â–‡â–ˆâ–‡â–ˆâ–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–ˆ (max: 105.73MB)\n    benchmarks/julia1_nopil.py: % of CPU time = 100.00% out of   9.11s.\n          \t |     CPU % |     CPU % | Avg memory  | Memory      | \n      Line\t |  (Python) |  (native) | growth (MB) | usage (%)   | [benchmarks/julia1_nopil.py]\n    --------------------------------------------------------------------------------\n         1\t |           |           |             |             | import sys\n    [... lines omitted ...]\n        30\t |           |           |             |             | def calculate_z_serial_purepython(maxiter, zs, cs):\n        31\t |           |           |             |             |     &quot;&quot;&quot;Calculate output list using Julia update rule&quot;&quot;&quot;\n        32\t |           |           |          18 |       0.74% |     output = [0] * len(zs)\n        33\t |     0.44% |     0.06% |          16 |       1.32% |     for i in range(len(zs)):\n        34\t |           |           |             |             |         n = 0\n        35\t |     0.22% |     0.04% |         -16 |             |         z = zs[i]\n        36\t |     0.22% |     0.07% |             |             |         c = cs[i]\n        37\t |    26.12% |     5.57% |             |             |         while abs(z) &lt; 2 and n &lt; maxiter:\n        38\t |    36.04% |     7.74% |          16 |      85.09% |             z = z * z + c\n        39\t |    12.01% |     2.70% |         -16 |       3.96% |             n += 1\n        40\t |     0.33% |     0.10% |             |             |         output[i] = n\n        41\t |           |           |             |             |     return output\n        42\t |           |           |             |             | </code></pre></div>\n<p>æ­£çš„å†…å­˜æ•°ä»£è¡¨å†…å­˜çš„åˆ†é…é‡(ä»¥MBä¸ºå•ä½)ï¼Œè´Ÿçš„å†…å­˜æ•°ä»£è¡¨å†…å­˜çš„å›æ”¶é‡ã€‚\nå†…å­˜çš„ä½¿ç”¨ç‡ä»£è¡¨ç‰¹å®šè¡Œä¸­æ€»å†…å­˜åˆ†é…çš„æ´»åŠ¨ã€‚</p>\n<h1 id=\"è‡´è°¢\"><a href=\"#%E8%87%B4%E8%B0%A2\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>è‡´è°¢</h1>\n<p>Logoç”± <a href=\"https://www.linkedin.com/in/sophia-berger/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Sophia Berger</a> åˆ›ä½œã€‚</p>\n","humanTime":"16 April 2020","datetime":"Thu Apr 16 2020 12:00:00 UTC+00:00","timeToRead":7,"tags":[{"id":"Python","title":"Python","path":"/tags/python/"},{"id":"Profile","title":"Profile","path":"/tags/profile/"}],"category":{"id":"Technology","title":"Technology","path":"/category/technology/","belongsTo":{"totalCount":5,"edges":[{"node":{"title":"Neo4j schema ç´¢å¼•å¯¹æŸ¥è¯¢çš„å½±å“","path":"/posts/neo4j-schema/"}},{"node":{"title":"PySpark UDFçš„å‘ä¸ç»•","path":"/posts/py-spark-udf/"}},{"node":{"title":"Python memory profiler ä¸Šæ‰‹å®è·µ","path":"/posts/python-memory-profiler/"}},{"node":{"title":"(ç¿»è¯‘)Scalene - ä¸€ä¸ª Python çš„é«˜æ€§èƒ½ CPU å†…å­˜åˆ†æå™¨","path":"/posts/scalene-python-cpu/"}}]}},"author":[{"id":"insutanto","name":"è®¸è‡¾insutanto","image":{"type":"image","mimeType":"image/png","src":"/assets/static/author1.fac0014.f32b3d6345829593250abc8f3b922256.png","size":{"width":400,"height":374},"sizes":"(max-width: 400px) 100vw, 400px","srcset":["/assets/static/author1.fac0014.f32b3d6345829593250abc8f3b922256.png 400w"],"dataUri":"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 400 374' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-9ba158a90cb545680afa9a5f3c8a4b2f'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-9ba158a90cb545680afa9a5f3c8a4b2f)' width='400' height='374' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAA8CAYAAADWibxkAAAACXBIWXMAAAsTAAALEwEAmpwYAAAPRUlEQVRo3tVbB1hUxxa%2buwsCgtgLoiAqRkUTgxp8ir0HJYkFC3ZQ0YiKxoai2BsqCMEawW6sqIgIdo2YqNEYjf0ZWxJLTGKJyO6dk3Nm76zXdfHxlDWw33e%2bubvsXmbOnPL/58yVJOu8NBY%2bK4/SASUC5SuU7Si7UL5GiUYZiVIPpZAir7tXnn5plfF9lFiULii7UZ6iQA7kIcofKKtQiudHJYjJLrewOBklC0WPYlBEr/rM/PvH8tvui8UXQ7mlLEKvCFMJ/I/3sqIcUFwm31mBLcp5ZQEGswXy3dVqNXzUaNTXGrzWMvpMsQoa481cK0%2b/dMoYrFo8U5u1VqMxXeu0WovXigXQ%2bBilTH60gGNmu2/aYbHY9s0%2b4tfDevtDF7%2bG/NqvSV3wb%2b7Dijg76m1tbeizhPy0%2b2KHKis7J3aSqU2%2bf5fWsGLWMICbe2DGyN5wLiUe4P4hWDJ1CBzdMAfgzl72%2bMymrFmj%2btD3h9MNnQra2%2bQn829lbv42Njq%2b%2bPc8XIFd3gnw636QL%2b3gI1zb9eL6%2bm7I%2bimJwe9H9N98PZd%2bM5RuWLF8mXylgJ6q6P%2bSz%2b9bNR13Pg2endsKcCUZDBd3oGwH/YXt8PynJNDjtYGUcX23/tdjq6F4kULr6Yb%2bzXx0%2bSEGCAX0EwpAn2di52MnhvDFw610gBt7%2bIKzLiTxa7779DeSq7sYuoGMbgCeFcpeUwXBfGMB7RSz57m/RDFnoN2Eh0cAbqfDnoSpEDNhACydHgrLUBZP%2bRw2x4XDD8lxcARjQFriVDZ6QCc2LiQAqni4PqM0qNNp%2b1MoQCmQ5yEwBrsW6rxfq1pFSFkeCVu%2bDOcBcMqwQDi9YyHMGxcMwQGtwLeOF2CQg/IuJcCjXGkoW6oY/61v7erQsXUDiiMVbW1sxit8IW9D46oVy1GwiiroYPckqHNLcHZy4C5wfnc8PDq9EVZHjYSMTVGAQQ4WjO/P40Lqiim4%2b7EwvM8ncO/4WmjRoBZXwM3DCYwURgQJ79cVxxp5OiVibhcTmzRtRE84mxxniIkYyN5/rwLcPb4GXeAonNi2ANITpwE8OAyX05fCkB7tMCakwffbY7hy4LcDkDg7DOImhTBMjXJIt7akgOYOdgUoHZbK29jXRicUsPHbLfMpr%2bu7t2/M4OdUkCn1Yd4/uysOVs4JA/jjKM8CcHsvwN2DHA/8hRbyCAMfAiG4kLqIQeZJGNClDcHh%2bQXt7YLyPCBC3xdBMAp3EODZCf2ZnbE8tfHFKjLzi95wcM1Mivb8/Vczh8EKlITZw%2bHktmjo06E5hA8KYIfWzmLN639AFrDmkxY%2b9vkBDovdqVfZvSxcSl9CKY/Jl3YyAj84cqDz8OQGiJ88GOZjEKSAyFEhpsJt8eN5kNyFARO/x46sn8M8ypcmBTRQ7psvwJBQAkVsmDum33P0d0Y5H3ebKwP%2bu5vgLjw/vw1xwHZ%2bza3jl31Gl0BlIBhi8OS4/vMefqSA8crW6/I%2bEFACIebtDYL0HFo3i4KbbFLC5Z2Moz1ygavJHPmRhRAoEmgwi76LcHh%2beDApYAndE%2bNAviBE4uVZwNZmAtUEihRyfEppEO4dNBD0JSXggpmICZwb8ICYzkkR3EhlZB2ogKyRQZ%2bRAqZyC9DkAwvI5tW7ZLHCPMAh1JWJ%2bMjKrovF0/tTSTFs3rggRimRGCHyBYMSAxrmJ0psigXoBuoJBzes4/VQifwypkSMBSkm8oMpkG2KHQdRY4Pg/nfrZMQMz4M7t6LFrxXRP3/Vw2x0NF9tJbcyArtrqlYqd/HvH7dA5vlt8r7VMxghQwI%2bnCP8%2bQ3A4%2bOMxgt7FkPbxnVo8Wlenm4OeTb94ST5OH1ELypYCDKUnZ%2bu2LhwLLE%2bPVkBcf0%2bHVog0GkNE4d0YxMGd2EDurZBXlCdgM8NivzHN8/T5lnTb1qvJh%2bRwGgsLdrJ0Z4obMvK7i5%2bzk4FF6GScPH7yP95FsCAx578sBm%2bjhkDYX0/ZYO6fyz369SSCNH1aWE9y6rvhawybyoBCYpp4ZXcXBxx%2bJjyP2rkWxwfFS5UECiKI6IjQCRT5FeCnjENXktRXOCo0QX%2bOibHRw6C6pXdTtkXsA0kBUrG5oqU1yxBg4vjPonU1cWlVLFoDHg3pVebGmz9gtEyQWL0e9PiReSnkdIi5n8OlDIp9T08Ki%2bfMdS8epyKUsGs5pB7LxudTmrl%2b6HpfVri1JwUPnnlR6PRPJBe7foYMGSbmhxJiyYwxAC81qdevNnIhGU08K7GO0bILdR9hDsoHla1hKLOTpr6H1bV1qtVVRs9vr8GkQj//FRStKWvf6laeJaq%2bmvq8ogdpGrwjiURBIR47U9WLV4IL43dPciIBCkIUt0lylTu%2bZ21soFFja5bMEqLuVmHnFyHKUynYnsxqqKnLFno%2bkhm3R%2bShFnDcZEHTKYvkCCHyKiczYgDzF1IdU/RJRqX666A5j8WI%2b9ZvHT%2bz4dVGyF0bYVSxNJ3HeztPlPaVuqOj8XFSxY6QeEhAUD1ARLadb7zuPiDa2eaSuca1fdV9xWK/hPFNTtsgPhDKl7UmV8XK%2bwkYQbi17ie7BXgUa5021VzRwAyr9Of92h3//ukGCpY3sTcnNapTYPJ6JO98cbN8KvuKCeNO6s1mE3wtUKLUhQHbRrVht8y1hjZH1pEWsJUsCtg%2b4rFWFCCsIK5lqwA7yF1bF1fXKMLA8kLoqZ7YegfVPWQEmeHmd67IG19uiUunLeo1s0fZTibHAfXD3wFVJq%2beTgBftgZCynLJz9Gd2CoTdHpydHi1YKT4GOp4kUgdcVkXgyx5C7ZKEFYwT2UEmorqOHpbloMAqzX1g1mjOylJeUE%2bjfRmpT4RVCHbcTLMQM8q%2b1VWR7Vv6N8OX2pgSO32%2bl6/JuBandIZtiNQwmsbePaOZn0a5WQnZu8RgGmZgvKIHMr8HQvq45ldpGh3VMGB/pNozdozba446%2bNG85ThvfIQIwOsZNCYEP0aP2G6DGGi3sWs79/3Mooj/%2bUukhOXzmNURX39xPrWcO6Xm%2bsBLFgjdIez%2bHvmPSi2XpQbQEInkQ80Hl7VQpEKz5DwTa0V/tQ86yPOx8a2rP94bEDOxPLDFNnAbv2zT6a49e07uM9CVPg6r5lQAwtY1OUjEGL8ciNIxUvqXIze1RfPjEbCztqJVEHW0qNVWjShZ0Kip2tgOn71MNTG3j3adYXfe7iZ22Qp9QuU6KoX9d2jSbNGd33PDVcIod2Bwz4T/DvC0SAUJtP%2baKFnUagRRzau3Ja5r1v1/JaHvy2n4l%2bHkFYKmJaiNrvQoQb9KHJLpseastr8aHd1lK5HV02kxjnnaMr9ed3x%2btPbF0g/3xwBY9lR9bPhi8jB2UGfOwrlyjqfBV/liR5e1Xmqy5ga6OZPDTQ3E88alWr2BEj9y9UzX12bqvMlBL3KcwW73jhwgqEApbRBAF%2b5EEvduLADCqxI9gycGRJm3b3gIw0Ww%2bPMgxUlqOyO%2bIbaNPQG9xcStJ95ovF8xG1IhVyctAgj7cByBRWUVIyntyC7YsjZF7EvJoMZGqlihc2HXN5hwowjwMSblI3XoW%2bsUdGBVAvguYpUyZLnBMGo4I7UIZ76lu7%2bq33PFzTypUpEUmNrFci4fSwXpJRqyChaesUrtAehYMf5PSM8jev9SOvb%2bJTUwmE2n9DARcRYtPOlURafV/hGzL6v%2bHBiXXQt2MLKOTosF8yHrJornAJu5ygYPNu71Dhe5za3k43Mjf8h8jjs01tVlSArPxPwgNOo/t3XMXb6leSs8gCfs1YDdUqlSci42dpUbS5bmVL6tBqtTniCGgJUfQ75P/6W0cSeauL43cMhIsmD37jVPg2SlD%2b312k4%2bHX9i8n06csRdmKkCYpyJfmjllN6%2bhgZ4NpV/smROqlGn9972p6weK4C2CqObZx7jsNgsqROhMoipsU8pwC37Nz26iZqqcKE34%2bW%2bEFto4O9lKbRt5vRpIwMHIF2BewXUT/MGJIVwOaPaNuDj/Tg9r%2b5dgqcCro8M6zAeZ21rTe%2b8Z5XElmvNKMm4NUnuoTpd%2b6kFrPu4rUr1NLHgMihwa2RvyMux1lQADERCeHguDf57ZCjSruOYWzb7HzxntX8XCF/atnsE0Lx8KZHbG8tqjQaT0dwhDApnAhR52aCP3fr8Yf1cC8GsIVED4oICQmYgARIz3V8kURgzc70Qpa%2bXpbOuiYqyKCLHIUjkJ5lelaChVXGBVa6TNkrpQdauZK1cjezlZCisxv0qB29ZmInoi%2b6jHQMFMcoMYm%2bl%2bPT5paPROIe1Pj5PC62RzVGeE55vxb6XpCeshS02i%2bGAc0RI3fstevRYJRXmhxJR1eEgoQdTxezLh/iAiH1RUgsszEId0ASRm3POog60kB9w8Zoo3HbYKU2JU71SKEvlwB7q6lNvMjLjfTDOqeXpZiAWMHdrK6CwgF0HkCyj7KPHghldwSER49X%2bCSq10kxM9cAZ3b%2bm7k9btrKXp1NfeFAjpbXQFC%2bAErhOJkifwMAVolNVNRQZtprv7NfbS5ZQCEmLgCggNapRP8xUUb1G1t4QJDe/tb1QUEzyji7AjX0df5maNLO03mHxnanf4ekOvF0hcKaH2YTnIqCoCXg%2bABCPRvYmUFGM2fzg/S8RoyeX7S5OoumTJRnRqVqZfopKBWTS4qwMgGe37aNIUfZ72SbLIAU2//HRAigS8qubkYzxGj33MkeveAns4eU7iieRK%2bF1XgXHld3ruUKwCh5BJqayO/Nij9PcYxAO4E7UiZkkWtSomFArw83XAOqTz48XSMbtnz02Z0lNbTKi30D6p6cH9CMjFYOfGl54GHWlg0AWSFVGGxduATGaBuTU%2be%2b/nu39mrv5i2mAjaSiPp8dGii1itY1Rt3rigx/DHUUJdpASZiqQYgBgdbyV2pmQAZg0RPUJUAOMKoIIHxqT%2bXVpTRae61fqF/s18pDlj%2bvEbV3AtNf/4pnnGY%2b1UEXp4BC6lLZGRlPDH3zQvngzLqRiklx%2bby1bQBfiInEPGmEOELPP45nmk8Fk0N3SNd3J4SoOLHYYRP2NhxMAHsRMHPlEOMFmVBKnv71q6uPHZAuQACM9PS8Yn0/6V4zPuSnkpAif3DY7pkvHJUHoUdhPKGsn4aGy8ws6In09HmYwyUTI%2bBzheJfR%2bkmQ8DjdDaX0tRFmMkojBleoRO5v61LyKgfh7ZH1UyKyUW6b/D5iHXD7Pi%2bNmAAAAAElFTkSuQmCC' /%3e%3c/svg%3e"},"path":"/author/insutanto/"}]}},{"node":{"title":"Python memory profiler ä¸Šæ‰‹å®è·µ","path":"/posts/python-memory-profiler/","image":{"type":"image","mimeType":"image/jpeg","src":"/assets/static/josh-spires-dronenr-sQalFlXIsLs-unsplash.872e63c.033fae86f3b02df16933a32c19ebf5e9.jpg","size":{"width":1600,"height":800},"sizes":"(max-width: 1600px) 100vw, 1600px","srcset":["/assets/static/josh-spires-dronenr-sQalFlXIsLs-unsplash.bb17b12.033fae86f3b02df16933a32c19ebf5e9.jpg 480w","/assets/static/josh-spires-dronenr-sQalFlXIsLs-unsplash.b28baf0.033fae86f3b02df16933a32c19ebf5e9.jpg 1024w","/assets/static/josh-spires-dronenr-sQalFlXIsLs-unsplash.872e63c.033fae86f3b02df16933a32c19ebf5e9.jpg 1600w"],"dataUri":"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1600 800' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-e4a56daf83daf6a40719aef386847469'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-e4a56daf83daf6a40719aef386847469)' width='1600' height='800' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAgAEADASIAAhEBAxEB/8QAGgAAAgMBAQAAAAAAAAAAAAAABQYDBAcACP/EAC8QAAEDAwMCBAQHAQAAAAAAAAECAxEABCEFEjEGEyJBQlFhcYGxBxQkMjNicuH/xAAZAQADAAMAAAAAAAAAAAAAAAABAgMABAb/xAAfEQACAQQCAwAAAAAAAAAAAAAAAQIDERJRBDFBQmH/2gAMAwEAAhEDEQA/AH21uELnYvA9R4NE2HUYCnEhR8jzWG6Z1WhKDKiVn1SQPlzTZo/VjLgTvWobcCFTU25LwFcmi/Y1JDkubE%2bKEyTuGPgRzUja3e2CppW7EhBChkxzjjk0gs9QW61Elx0BUTC/%2bUROvtpT4XjtAwMc/Shl8Cq1J9SHJHcVIUkoIURmPEPcZqH8wpNz2lJUPDO4pMTMRPvSqnqSxaT3Hn20FUSpcgmOPnXN9V2zqS63eNKgTGZI%2bAiaGY947Q3plW9SiNsYqi6ShRIjaeKWldSbFAB1slXpcPP0rr3VlsN2zrsLYcR3Uq3%2bYMEH706mhrX6Z5ptVJgAkCjdooBOFBJnAnFJTFwUjkY5q/b3hTkHFVZz0k0aBbEED9QQR7cUUQVHi5kxWesantR/IAMCD51YRrBEQsfCDihYg5PQ/KW8Ekd5KhyAJECqFzcXST4Vmf8AVKitacCcKMgcVCrWnFKUCfKhgUjUYZvNRvArKlx77uKJahfPXf4aMukq3afqKmVEH0OiR9Jikt/Uy42f3A%2b05o10jejUNC6q0k5LtkLppP8Adoz9qzGxucabbcdo/9k=' /%3e%3c/svg%3e"},"image_caption":"Photo by Josh Spires on Unsplash","excerpt":"Python memory_profiler ä¸Šæ‰‹å®è·µï¼Œä½¿ç”¨æœåŠ¡ä½œä¸ºç¤ºä¾‹ã€‚å°† memory_profiler ç”¨åœ¨ Flask + gevent çš„æœåŠ¡å’Œ Flask + gunicorn gevent worker çš„æœåŠ¡ä¸Šã€‚","content":"<h2 id=\"è¯´åœ¨å‰é¢\"><a href=\"#%E8%AF%B4%E5%9C%A8%E5%89%8D%E9%9D%A2\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>è¯´åœ¨å‰é¢</h2>\n<p>è¿™ç¯‡æ–‡ç« çš„æœ‰ä¸€éƒ¨åˆ†æ¥è‡ª memory_profiler å®˜æ–¹æ–‡æ¡£ï¼Œæ˜¯åœ¨æˆ‘äº²è‡ªå®è·µä¹‹åï¼Œåšæ•´ç†å’Œæ€»ç»“ã€‚</p>\n<h2 id=\"ä¸ºä»€ä¹ˆ\"><a href=\"#%E4%B8%BA%E4%BB%80%E4%B9%88\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>ä¸ºä»€ä¹ˆ</h2>\n<p>ç›¸æ¯”èµ· C ï¼ŒPython æœ‰è‡ªå·±çš„å†…å­˜ç®¡ç†ï¼Œä¸éœ€å¼€å‘è€…è‡ªå·±ç®¡ç†å†…å­˜ã€‚è™½ç„¶æ–¹ä¾¿ï¼Œä½†æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šé‡åˆ°å†…å­˜å ç”¨è¿‡é«˜ï¼Œå†…å­˜æ³„æ¼ï¼Œç”šè‡³ OOM çš„æƒ…å†µã€‚è¿™æ—¶ï¼Œå°±éœ€è¦æˆ‘ä»¬åšå†…å­˜è¯Šæ–­ï¼Œäº†è§£è‡ªå·±çš„ä»£ç ï¼šå†…å­˜ä¸»è¦è¢«åˆ†é…åœ¨å“ªé‡Œï¼Œæ˜¯å¦æœ‰æ— æ³•é‡Šæ”¾çš„å†…å­˜ï¼Œåˆæœ‰å¤šå°‘å†…å­˜ä¼šå¾ˆå¿«è¢«é‡Šæ”¾ï¼Œè¿›ç¨‹åœ¨é«˜å³°æ—¶å ç”¨å¤šå°‘å†…å­˜ï¼Œåœ¨ä½è°·æ—¶å ç”¨å¤šå°‘å†…å­˜ã€‚</p>\n<h2 id=\"æ€ä¹ˆåŠ\"><a href=\"#%E6%80%8E%E4%B9%88%E5%8A%9E\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>æ€ä¹ˆåŠ</h2>\n<p>è¦äº†è§£è¿›ç¨‹çš„å†…å­˜ä½¿ç”¨æƒ…å†µï¼Œæˆ‘ä»¬å¯èƒ½é¦–å…ˆä¼šæƒ³åˆ°ä½¿ç”¨ TOP å‘½ä»¤ï¼ŒæŸ¥çœ‹è¿›ç¨‹å†…å­˜çš„ä½¿ç”¨æƒ…å†µã€‚TOP å‘½ä»¤èƒ½å¤Ÿå®æ—¶æŸ¥çœ‹åˆ°è¿›ç¨‹å¯¹å„ç§èµ„æºçš„ä½¿ç”¨æƒ…å†µï¼Œä¹Ÿæ˜¯æˆ‘ä»¬ç»å¸¸ä¼šä½¿ç”¨çš„Linuxå‘½ä»¤ã€‚è€Œåœ¨ Python ä¸­ï¼Œé€šè¿‡ psutil æ¨¡å—ä¹Ÿèƒ½å¾ˆå¥½çš„è·å–åˆ°è¿™äº›ä¿¡æ¯ã€‚</p>\n<p>è¿™ä¸¤ä¸ªå·¥å…·ååˆ†çš„å¼ºå¤§ï¼Œä½†æ˜¯ä¹Ÿå¾ˆåŸºç¡€ã€‚TOPå‘½ä»¤ä¸æ–¹ä¾¿ä»æ›´å¤šçš„ç»´åº¦è¯Šæ–­é—®é¢˜ï¼Œæ¯”å¦‚éš¾ä»¥ä»æ—¶é—´ç»´åº¦è¯Šæ–­å†…å­˜ï¼Œåªèƒ½ç»Ÿè®¡å½“å‰æ•´ä¸ªè¿›ç¨‹çš„å†…å­˜ä½¿ç”¨æƒ…å†µï¼Œä¸ä»£ç è„±ç¦»ã€‚è€Œ psutil ååˆ†å¼ºå¤§ï¼Œå¯ä»¥å’Œä»£ç ç»“åˆï¼Œä½†æ˜¯å¯¹é€»è¾‘ä»£ç ä¾µå…¥æ€§å¤ªå¼ºï¼Œæ¯”å¦‚æƒ³åœ¨æŸä¸ªå‡½æ•°å‰åç»Ÿè®¡å†…å­˜çš„ä½¿ç”¨æƒ…å†µï¼Œå°±éœ€è¦åœ¨åŸæœ‰ä»£ç çš„åŸºç¡€ä¸Šæ’æ¡©ï¼Œäº§ç”Ÿä¸å¿…è¦çš„è€¦åˆï¼Œè€Œä¸ä¾µå…¥é€»è¾‘ä»£ç åˆ™åˆå’Œä½¿ç”¨å‘½ä»¤è¡Œæ²¡æœ‰å¤ªå¤§åŒºåˆ«ã€‚</p>\n<p>è¿™ä¸ªæ—¶å€™ï¼Œæœ‰ç»éªŒçš„æœ‹å‹å¯èƒ½ä¼šæƒ³åˆ° line_profilerã€‚line_profiler æ˜¯ç”¨äºå¯¹å‡½æ•°è¿›è¡Œé€è¡Œåˆ†æçš„æ¨¡å—ï¼Œåªéœ€è¦é€šè¿‡è£…é¥°å™¨ï¼Œå°±å¯ä»¥è®¡ç®—å‡ºå‡½æ•°å†…æ¯ä¸€è¡Œä»£ç çš„æ‰§è¡Œæ—¶é—´ï¼Œä»¥æä¾›æ—¶é—´ç»´åº¦çš„æ€§èƒ½è¯Šæ–­ã€‚é‚£ä¹ˆåœ¨å†…å­˜ç»´åº¦ä¸Šï¼Œæ˜¯ä¸æ˜¯ä¹Ÿæœ‰ç±»ä¼¼çš„æ¨¡å—å‘¢ï¼Ÿbingo~ç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œåœ¨ Python ä¼—å¤šåŠŸèƒ½å¼ºå¤§çš„æ¨¡å—ä¸­ï¼Œæœ‰ä¸€ä¸ªå«åš memory_profiler çš„æ¨¡å—ï¼Œåªéœ€è¦ç»™ç›®æ ‡å‡½æ•°è£…ä¸Šprofileè£…é¥°å™¨ï¼Œå°±å¯ä»¥é€è¡Œåˆ†æå‡½æ•°ä»£ç çš„å†…å­˜ä½¿ç”¨æƒ…å†µã€‚ä¸ä»…å¦‚æ­¤ï¼Œè¿™ä¸ªæ¨¡å—è¿˜æœ‰æ›´åŠ å¼ºå¤§çš„åŠŸèƒ½ç­‰å¾…å¤§å®¶å‘æ˜ã€‚</p>\n<h2 id=\"memory_profiler-æ˜¯ä»€ä¹ˆ\"><a href=\"#memory_profiler-%E6%98%AF%E4%BB%80%E4%B9%88\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>memory_profiler æ˜¯ä»€ä¹ˆ</h2>\n<p>é¦–å…ˆæˆ‘ä»¬ç®€å•ä»‹ç»ä¸‹ memory_profiler æ˜¯ä»€ä¹ˆã€‚è¿™éƒ¨åˆ†ä¸»è¦æ¥è‡ª memory_profiler çš„ PyPI ä»‹ç»ã€‚</p>\n<blockquote>\n<p>This is a python module for monitoring memory consumption of a process as well as line-by-line analysis of memory consumption for python programs. It is a pure python module which depends on the psutil module.</p>\n</blockquote>\n<p>memory_profiler æ˜¯ä¸€ä¸ªç›‘æ§è¿›ç¨‹å†…å­˜æ¶ˆè€—çš„æ¨¡å—ï¼Œä¹Ÿå¯ä»¥é€è¡Œåˆ†æ Python ç¨‹åºçš„å†…å­˜æ¶ˆè€—ã€‚å®ƒæ˜¯ä¸€ä¸ªä¾èµ– psutil æ¨¡å—çš„çº¯ Python æ¨¡å—ã€‚</p>\n<p>memory_profiler æœ‰ä¸¤ç§åº”ç”¨åœºæ™¯ï¼Œä¸‰ç§ä½¿ç”¨æ–¹å¼ã€‚</p>\n<p>ä¸¤ç§åº”ç”¨åœºæ™¯åˆ†åˆ«æ˜¯ï¼šé€è¡Œçš„å†…å­˜ä½¿ç”¨åˆ†æï¼Œæ—¶é—´ç»´åº¦çš„å†…å­˜ä½¿ç”¨åˆ†æã€‚åé¢å†è¯¦ç»†è¯´ã€‚</p>\n<p>ä¸‰ç§ä½¿ç”¨æ–¹å¼ä¸­ï¼Œå‰ä¸¤ç§æ˜¯é’ˆå¯¹é€è¡Œçš„å†…å­˜ä½¿ç”¨åˆ†æï¼Œå¦å¤–ä¸€ç§é’ˆå¯¹æ—¶é—´ç»´åº¦çš„å†…å­˜ä½¿ç”¨åˆ†æã€‚</p>\n<p><strong>åªä½¿ç”¨è£…é¥°å™¨ï¼Œä¸ import memory_profiler</strong>ã€‚ç»™ç›®æ ‡å‡½æ•°åŠ ä¸Š @profile è£…é¥°å™¨ï¼Œæ‰§è¡Œä»£ç æ—¶ï¼Œç»™ Python è§£é‡Šå™¨ä¼ é€’å‚æ•° -m memory_profiler ï¼Œæ¥åŠ è½½ memory_profiler æ¨¡å—ã€‚</p>\n<div class=\"gridsome-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token decorator annotation punctuation\">@profile</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">my_func</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    a <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token number\">10</span> <span class=\"token operator\">**</span> <span class=\"token number\">6</span><span class=\"token punctuation\">)</span>\n    b <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token number\">2</span> <span class=\"token operator\">*</span> <span class=\"token number\">10</span> <span class=\"token operator\">**</span> <span class=\"token number\">7</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">del</span> b\n    <span class=\"token keyword\">return</span> a\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span>\n    my_func<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gridsome-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">python -m memory_profiler example.py</code></pre></div>\n<p><strong>ä½¿ç”¨è£…é¥°å™¨ï¼Œimport memory_profilerã€‚</strong>ç»™ç›®æ ‡å‡½æ•°åŠ ä¸Š @profile è£…é¥°å™¨ï¼Œimport memory_profilerï¼Œæ‰§è¡Œæ—¶ä¸éœ€è¦ä¼ é€’å‚æ•°ã€‚</p>\n<div class=\"gridsome-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> memory_profiler <span class=\"token keyword\">import</span> profile\n\n<span class=\"token decorator annotation punctuation\">@profile</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">my_func</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    a <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token number\">10</span> <span class=\"token operator\">**</span> <span class=\"token number\">6</span><span class=\"token punctuation\">)</span>\n    b <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token number\">2</span> <span class=\"token operator\">*</span> <span class=\"token number\">10</span> <span class=\"token operator\">**</span> <span class=\"token number\">7</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">del</span> b\n    <span class=\"token keyword\">return</span> a</code></pre></div>\n<div class=\"gridsome-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">python example<span class=\"token punctuation\">.</span>py</code></pre></div>\n<p><strong>æ—¶é—´ç»´åº¦çš„å†…å­˜ä½¿ç”¨åˆ†æã€‚</strong>ä½¿ç”¨ mprof æ‰§è¡Œç¨‹åºåœ¨æ—¶é—´ç»´åº¦åˆ†æè¿›ç¨‹çš„å†…å­˜ä½¿ç”¨æƒ…å†µã€‚ä¸‹é¢ä»‹ç»äº†ä¸€å…±æœ‰å››ç§æƒ…å†µï¼Œåˆ†åˆ«æ˜¯ï¼šå•è¿›ç¨‹ï¼Œå¤šè¿›ç¨‹ï¼Œè®°å½•å­è¿›ç¨‹å†…å­˜å ç”¨ï¼Œå¤šè¿›ç¨‹å¹¶è®°å½•å­è¿›ç¨‹å†…å­˜å ç”¨ã€‚</p>\n<div class=\"gridsome-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">mprof run <span class=\"token operator\">&lt;</span>executable<span class=\"token operator\">></span>\nmprof run --multiprocess <span class=\"token operator\">&lt;</span>executable<span class=\"token operator\">></span>\nmprof run --include-children <span class=\"token operator\">&lt;</span>executable<span class=\"token operator\">></span>\nmprof run --include-children --multiprocess <span class=\"token operator\">&lt;</span>executable<span class=\"token operator\">></span></code></pre></div>\n<p>æ‰§è¡Œå®Œæˆåï¼Œä¼šç”Ÿæˆä¸€ä¸ª .dat æ–‡ä»¶ï¼Œç±»ä¼¼ï¼š</p>\n<div class=\"gridsome-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">mprofile_20200329173152.dat</code></pre></div>\n<p>è¦ç»˜åˆ¶å†…å­˜åœ¨æ—¶é—´ç»´åº¦çš„ä½¿ç”¨æƒ…å†µï¼Œéœ€è¦å®‰è£… matplotlibï¼Œç„¶åæ‰§è¡Œ mprof plot (ç›´æ¥æ‰§è¡Œä¼šè¯»å–æœ€æ–°çš„ .dat æ–‡ä»¶)ï¼š</p>\n<div class=\"gridsome-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">pip <span class=\"token function\">install</span> matplotlib\nmprof plot\nmprof plot mprofile_20200329173152.dat</code></pre></div>\n<p><img src=\"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b16fa4d8-5ca3-4e77-85c9-ce591a1036f7/68747470733a2f2f662e636c6f75642e6769746875622e636f6d2f6173736574732f313930383631382f3836313332302f63623865376337382d663563632d313165322d386531652d3539373237623636663462322e706e67.png\" alt=\"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b16fa4d8-5ca3-4e77-85c9-ce591a1036f7/68747470733a2f2f662e636c6f75642e6769746875622e636f6d2f6173736574732f313930383631382f3836313332302f63623865376337382d663563632d313165322d386531652d3539373237623636663462322e706e67.png\"></p>\n<p>ä¹Ÿå¯ä»¥æŸ¥çœ‹ç«ç„°å›¾ï¼š</p>\n<div class=\"gridsome-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">mprof plot --flame mprofile_20200329173152.dat</code></pre></div>\n<p><img src=\"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/7840bad5-07d4-46ba-8cbd-b7e9083c445b/flamegraph.png\" alt=\"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/7840bad5-07d4-46ba-8cbd-b7e9083c445b/flamegraph.png\"></p>\n<h2 id=\"å®è·µç»éªŒ\"><a href=\"#%E5%AE%9E%E8%B7%B5%E7%BB%8F%E9%AA%8C\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>å®è·µç»éªŒ</h2>\n<p>memory_profiler åªä»‹ç»äº†è„šæœ¬ç¨‹åºçš„å®è·µï¼Œæ›¾è®©æˆ‘ä»¥ä¸ºä»–åªèƒ½ä½œä¸ºæ™®é€šç¨‹åºçš„å®é™…ä¸Šï¼Œä»–å¯ä»¥åœ¨ä»»ä½•åœºæ™¯ä¸‹ä½¿ç”¨ï¼ŒåŒ…æ‹¬æœåŠ¡ï¼Œè¿™é‡Œä¸ºäº†ä¸°å¯Œç¤ºä¾‹ï¼Œæˆ‘ä½¿ç”¨æœåŠ¡æ¥è¿›è¡Œç›¸å…³å®è·µã€‚</p>\n<p>æˆ‘ä»¬ä½¿ç”¨ mprof å¯åŠ¨ä¸€ä¸ªæœåŠ¡åï¼ŒæœåŠ¡è¿›ç¨‹ä¼šæŒç»­è¿è¡Œï¼Œåœ¨è¿™æœŸé—´ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æµ‹è¯•å·¥å…·ï¼Œæ¨¡æ‹Ÿå‡ºæœåŠ¡åœ¨ç”Ÿäº§ç¯å¢ƒçš„è¿è¡Œæƒ…å†µï¼Œæ¥åˆ†ææœåŠ¡çš„å†…å­˜ä½¿ç”¨çŠ¶å†µã€‚ä¸‹é¢åˆ—å‡ºäº†ä¸‰ç§ä¼šé‡åˆ°çš„ä½¿ç”¨åœºæ™¯ï¼Œæ¯ç§åœºæ™¯çš„è¡¨ç°éƒ½æ˜¯ä¸ä¸€æ ·çš„ã€‚å•è¿›ç¨‹æœåŠ¡æˆ‘ä»¬ä½¿ç”¨äº† Flask å’Œ Geventï¼Œå¤šè¿›ç¨‹æœåŠ¡æˆ‘ä»¬ä½¿ç”¨äº† Flask + Gunicorn çš„ gevent workerã€‚</p>\n<h3 id=\"å•è¿›ç¨‹æ— è£…é¥°å™¨\"><a href=\"#%E5%8D%95%E8%BF%9B%E7%A8%8B%E6%97%A0%E8%A3%85%E9%A5%B0%E5%99%A8\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>å•è¿›ç¨‹æ— è£…é¥°å™¨</h3>\n<p>å› ä¸ºæ”¶é›†æ¯ä¸€è¡Œä»£ç çš„å†…å­˜ä½¿ç”¨æƒ…å†µæ˜¯ä¸ç°å®çš„ï¼Œæ‰€ä»¥ï¼Œå•è¿›ç¨‹ä¸ä½¿ç”¨è£…é¥°å™¨æ—¶ï¼Œåªèƒ½æ”¶é›†åˆ°æ•´ä¸ªè¿›ç¨‹çš„å†…å­˜ä½¿ç”¨æƒ…å†µã€‚è¿™ç§åœºæ™¯æ˜¯æ— ä¾µå…¥çš„ï¼Œä¸€èˆ¬å¯¹åº”äº†æˆ‘ä»¬è‡ªæµ‹çš„åˆå§‹é˜¶æ®µï¼Œæˆ‘ä»¬æƒ³å¯¹æœåŠ¡æˆ–è€…è„šæœ¬å†…å­˜çš„ä½¿ç”¨æƒ…å†µæœ‰ä¸€ä¸ªåˆæ­¥çš„äº†è§£ï¼šæ˜¯å¦ä¼šæœ‰å†…å­˜æ³„æ¼ï¼Œæ˜¯å¦ä¼šå ç”¨è¿‡å¤§çš„å†…å­˜ç­‰ç­‰é—®é¢˜ã€‚</p>\n<p><strong>æœåŠ¡ä»£ç ï¼š</strong></p>\n<div class=\"gridsome-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> gevent <span class=\"token keyword\">import</span> monkey\n<span class=\"token keyword\">from</span> gevent<span class=\"token punctuation\">.</span>pywsgi <span class=\"token keyword\">import</span> WSGIServer\nmonkey<span class=\"token punctuation\">.</span>patch_all<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">from</span> flask <span class=\"token keyword\">import</span> Flask<span class=\"token punctuation\">,</span> render_template\n<span class=\"token comment\"># from memory_profiler import profile</span>\n<span class=\"token keyword\">from</span> gevent <span class=\"token keyword\">import</span> time\n\napp <span class=\"token operator\">=</span> Flask<span class=\"token punctuation\">(</span>__name__<span class=\"token punctuation\">)</span>\n\n<span class=\"token decorator annotation punctuation\">@app<span class=\"token punctuation\">.</span>route</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/test'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">hello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    list1 <span class=\"token operator\">=</span> test1<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    list2 <span class=\"token operator\">=</span> test2<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string\">\"hello, world\"</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">test1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    new_list <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">]</span><span class=\"token operator\">*</span><span class=\"token number\">4096000</span> \n    new_list <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">*</span><span class=\"token number\">4096000</span>\n    big_list <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    big_list<span class=\"token punctuation\">.</span>extend<span class=\"token punctuation\">(</span>new_list<span class=\"token punctuation\">)</span>\n    delay<span class=\"token punctuation\">(</span><span class=\"token number\">0.3</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> big_list\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">test2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    new_list <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">]</span><span class=\"token operator\">*</span><span class=\"token number\">4096000</span> \n    new_list <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">*</span><span class=\"token number\">4096000</span>\n    big_list <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    big_list<span class=\"token punctuation\">.</span>extend<span class=\"token punctuation\">(</span>new_list<span class=\"token punctuation\">)</span>\n    delay<span class=\"token punctuation\">(</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> big_list\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span>delay_time<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    time<span class=\"token punctuation\">.</span>sleep<span class=\"token punctuation\">(</span>delay_time<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>url_map<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">\"__main__\"</span><span class=\"token punctuation\">:</span>\n    http_server <span class=\"token operator\">=</span> WSGIServer<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> app<span class=\"token punctuation\">)</span>\n    http_server<span class=\"token punctuation\">.</span>serve_forever<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><strong>æ‰§è¡Œ mprof run:</strong></p>\n<div class=\"gridsome-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">mprof run server<span class=\"token punctuation\">.</span>py</code></pre></div>\n<p><strong>ä½¿ç”¨ curl è¯·æ±‚å¤šæ¬¡åï¼Œæ‰§è¡Œmporf plotï¼š</strong></p>\n<div class=\"gridsome-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">mprof plot</code></pre></div>\n<p><img src=\"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/607824df-8208-4e85-9dc0-ee8ba0001052/single_process.png\" alt=\"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/607824df-8208-4e85-9dc0-ee8ba0001052/single_process.png\"></p>\n<p>åœ¨æ—¶é—´ç»´åº¦ä¸Šçš„å•è¿›ç¨‹å†…å­˜ä½¿ç”¨æƒ…å†µï¼Œå¯ä»¥å¾ˆæ¸…æ™°çš„ä½“ç°å‡ºæ¥ã€‚è¿™æ—¶ï¼Œå¦‚æœæˆ‘ä»¬å‘ç°äº†è¿‡å¤§çš„å†…å­˜æ¶ˆè€—ï¼Œé•¿æ—¶é—´æ²¡æœ‰é‡Šæ”¾çš„å¤§å†…å­˜ï¼Œå¯èƒ½å°±éœ€è¦å¯¹å•è¿›ç¨‹æ·»åŠ è£…é¥°å™¨æ¥è¿›ä¸€æ­¥åˆ†æäº†ã€‚</p>\n<h3 id=\"å•è¿›ç¨‹åŠ è£…é¥°å™¨\"><a href=\"#%E5%8D%95%E8%BF%9B%E7%A8%8B%E5%8A%A0%E8%A3%85%E9%A5%B0%E5%99%A8\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>å•è¿›ç¨‹åŠ è£…é¥°å™¨</h3>\n<p>æˆ‘ä»¬ä½¿ç”¨ mprof ç›´æ¥ run server.pyï¼Œå‘ç°äº†æ¯”è¾ƒå¤§çš„å†…å­˜æ¶ˆè€—ï¼Œæˆ–è€…é•¿æ—¶é—´æ²¡æœ‰é‡Šæ”¾çš„å¤§å†…å­˜ï¼Œåˆæˆ–è€…åœ¨ä¸€è½®è¯·æ±‚ä¸­é‡åˆ°è€—æ—¶ç»å¯¹å€¼è¿‡å¤§ç­‰æ€§èƒ½é—®é¢˜ï¼Œå°±éœ€è¦è€ƒè™‘ç»™æœåŠ¡ç›¸å…³çš„ä»£ç åŠ ä¸Šè£…é¥°å™¨æ¥å®šä½äº†ã€‚</p>\n<p><strong>åŠ è£…é¥°å™¨æ—¶ï¼Œè¦æ³¨æ„ä¸€ç‚¹ã€‚ä¸è¦åŠ å…¥ä¸‹é¢çš„ä»£ç ï¼š</strong></p>\n<div class=\"gridsome-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> memory_profiler <span class=\"token keyword\">import</span> profile</code></pre></div>\n<p><strong>ä¸‹é¢æ˜¯æœåŠ¡ä»£ç ï¼Œä¹Ÿå°±æ˜¯åœ¨æˆ‘ä»¬ä¸»è¦çš„å‡½æ•°ä¸Šå¢åŠ  profile è£…é¥°å™¨ï¼š</strong></p>\n<div class=\"gridsome-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> gevent <span class=\"token keyword\">import</span> monkey\n<span class=\"token keyword\">from</span> gevent<span class=\"token punctuation\">.</span>pywsgi <span class=\"token keyword\">import</span> WSGIServer\nmonkey<span class=\"token punctuation\">.</span>patch_all<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">from</span> flask <span class=\"token keyword\">import</span> Flask<span class=\"token punctuation\">,</span> render_template\n<span class=\"token comment\"># from memory_profiler import profile</span>\n<span class=\"token keyword\">from</span> gevent <span class=\"token keyword\">import</span> time\n\napp <span class=\"token operator\">=</span> Flask<span class=\"token punctuation\">(</span>__name__<span class=\"token punctuation\">)</span>\n\n<span class=\"token decorator annotation punctuation\">@app<span class=\"token punctuation\">.</span>route</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/test'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">hello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    list1 <span class=\"token operator\">=</span> test1<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    list2 <span class=\"token operator\">=</span> test2<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string\">\"hello, world\"</span>\n\n<span class=\"token decorator annotation punctuation\">@profile</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">test1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    new_list <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">]</span><span class=\"token operator\">*</span><span class=\"token number\">4096000</span> \n    new_list <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">*</span><span class=\"token number\">4096000</span>\n    big_list <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    big_list<span class=\"token punctuation\">.</span>extend<span class=\"token punctuation\">(</span>new_list<span class=\"token punctuation\">)</span>\n    delay<span class=\"token punctuation\">(</span><span class=\"token number\">0.3</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> big_list\n\n<span class=\"token decorator annotation punctuation\">@profile</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">test2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    new_list <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">]</span><span class=\"token operator\">*</span><span class=\"token number\">4096000</span> \n    new_list <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">*</span><span class=\"token number\">4096000</span>\n    big_list <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    big_list<span class=\"token punctuation\">.</span>extend<span class=\"token punctuation\">(</span>new_list<span class=\"token punctuation\">)</span>\n    delay<span class=\"token punctuation\">(</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> big_list\n\n<span class=\"token decorator annotation punctuation\">@profile</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span>delay_time<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    time<span class=\"token punctuation\">.</span>sleep<span class=\"token punctuation\">(</span>delay_time<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>url_map<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">\"__main__\"</span><span class=\"token punctuation\">:</span>\n    http_server <span class=\"token operator\">=</span> WSGIServer<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> app<span class=\"token punctuation\">)</span>\n    http_server<span class=\"token punctuation\">.</span>serve_forever<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><strong>æ‰§è¡Œ mprof run:</strong></p>\n<div class=\"gridsome-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">mprof run server<span class=\"token punctuation\">.</span>py</code></pre></div>\n<p><strong>ä½¿ç”¨ curl è¯·æ±‚å¤šæ¬¡åï¼Œæ‰§è¡Œmporf plotï¼š</strong></p>\n<div class=\"gridsome-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">mprof plot</code></pre></div>\n<p>å¦‚æœåœ¨æœåŠ¡ä»£ç ä¸­ï¼Œä½ æ·»åŠ äº† profile è£…é¥°å™¨çš„ import ï¼š</p>\n<div class=\"gridsome-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> memory_profiler <span class=\"token keyword\">import</span> profile</code></pre></div>\n<p>ä½ ä¼šå¾—åˆ°ä¸‹é¢è¿™æ ·çš„å›¾ï¼š</p>\n<p><img src=\"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/22a4f39a-b5c5-4151-b1c4-afcd56789762/single_process_with_profile_decorator_and_import.png\" alt=\"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/22a4f39a-b5c5-4151-b1c4-afcd56789762/single_process_with_profile_decorator_and_import.png\"></p>\n<p>å’Œå®˜æ–¹ç¤ºä¾‹çš„å›¾ä¼¼ä¹ä¸å¤ªä¸€æ ·ï¼Ÿæˆ‘ä»¬æœŸå¾…çš„å‡½æ•°æ‰§è¡Œæ—¶é—´å’Œå‡½æ•°æ‰§è¡Œå‰åå†…å­˜æ¶ˆè€—çš„æ ‡è®°æ²¡æœ‰äº†ï¼Ÿåœ¨æˆ‘å®è·µä¹‹åå‘ç°ï¼Œè¿™æ˜¯ä¸€ä¸ªå‘ï¼ŒåŠ å…¥ import çš„ä»£ç ï¼Œåªä¼šå¯¹ä»£ç è¿›è¡Œé€è¡Œçš„å†…å­˜æ¶ˆè€—åˆ†æï¼Œè€Œä¸èƒ½å¾—åˆ°å†…å®¹ä¸°å¯Œçš„å›¾ä¾‹ã€‚</p>\n<p>æˆ‘ä»¬å»æ‰ profile è£…é¥°å™¨çš„ import ä»£ç ï¼Œå†å›åˆ°è¿™é‡Œæ¥çœ‹çœ‹ï¼Œä¼šå¾—åˆ°ç±»ä¼¼ä¸‹é¢è¿™å¼ å›¾ã€‚</p>\n<p><img src=\"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b722de99-ac8e-4626-ba86-96ae78207bb3/single_process_delay_with_profile_decorator.png\" alt=\"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b722de99-ac8e-4626-ba86-96ae78207bb3/single_process_delay_with_profile_decorator.png\"></p>\n<p>è¿™ä¸‹æ˜¯ä¸æ˜¯å°±æ¸…æ™°å¤šäº†ï¼Ÿæˆ‘ä»¬èƒ½å¤Ÿçœ‹åˆ°åœ¨å‡½æ•°test1æ‰§è¡Œçš„æœŸé—´ï¼Œå‡½æ•°delayå ç”¨äº†å¤§éƒ¨åˆ†çš„æ—¶é—´ï¼Œå‡½æ•°test1æ‰§è¡Œä¹‹åï¼Œå†…å­˜å›æ”¶äº†ä¸€éƒ¨åˆ†ï¼Œç„¶åæ¥ç€æ‰§è¡Œå‡½æ•°test2ã€‚å“ªäº›ä»£ç æ¶ˆè€—å†…å­˜å¤šï¼Œå“ªäº›ä»£ç æ‰§è¡Œæ—¶é—´é•¿ï¼Œæ˜¯ä¸æ˜¯å°±ä¸€ç›®äº†ç„¶äº†ï¼Ÿ</p>\n<p>ç„¶åæˆ‘ä»¬è¿˜å¯ä»¥æ‰§è¡Œï¼š</p>\n<div class=\"gridsome-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">mprof plot --flame</code></pre></div>\n<p><img src=\"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/4082b47a-d333-4ddb-8514-29079fec6c05/single_process_flame_with_profile_decorator.png\" alt=\"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/4082b47a-d333-4ddb-8514-29079fec6c05/single_process_flame_with_profile_decorator.png\"></p>\n<p>èƒ½å¤Ÿæ¸…æ™°çš„çœ‹åˆ°ç«ç„°å›¾çš„æ·±åº¦åªæœ‰ä¸¤å±‚ï¼Œçœ‹ç«ç„°å›¾çš„å¹³é¡¶ï¼Œå‡½æ•°test2 ä¸­çš„å‡½æ•° delay æ‰§è¡Œæ—¶é—´æ›´é•¿ï¼Œâ€œæ€§èƒ½æ›´å·®â€œï¼Œå†…å­˜å ç”¨åœ¨å‡½æ•° test2 æ‰§è¡Œçš„è¿‡ç¨‹ä¸­è¾¾åˆ°äº†å³°å€¼ã€‚</p>\n<h3 id=\"å¤šè¿›ç¨‹\"><a href=\"#%E5%A4%9A%E8%BF%9B%E7%A8%8B\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>å¤šè¿›ç¨‹</h3>\n<p>æˆ‘åœ¨å®è·µçš„è¿‡ç¨‹ä¸­å‘ç°ï¼Œå¤šè¿›ç¨‹æ— æ³•åœ¨ä¸ import memory_profiler çš„æƒ…å†µä¸‹ä½¿ç”¨è£…é¥°å™¨ã€‚æ‰€ä»¥å¤šè¿›ç¨‹çš„åœºæ™¯ï¼Œåªèƒ½ç»Ÿè®¡æ¯ä¸ªè¿›ç¨‹çš„å†…å­˜ä½¿ç”¨æƒ…å†µã€‚ä¸ä¼šæœ‰å‡½æ•°æ‰§è¡Œæ—¶é—´ï¼Œä¹Ÿä¸ä¼šæœ‰å‡½æ•°æ‰§è¡Œå‰åå†…å­˜å˜åŒ–çš„æ ‡è®°ï¼Œæ›´ä¸ä¼šæœ‰ç«ç„°å›¾ã€‚çœ‹äº†å®˜æ–¹çš„ç¤ºä¾‹ï¼Œä¹Ÿæ²¡æœ‰å‘ç°è¿™äº›åŠŸèƒ½åœ¨å¤šè¿›ç¨‹æœ‰å¾—åˆ°æ”¯æŒçš„ç›¸å…³è¯æ®ã€‚ç´¢æ€§æˆ‘ä»¬å°±å…ˆä¸ç®¡è¿™äº›é«˜çº§çš„ç‰¹æ€§ï¼Œæ¯•ç«Ÿèƒ½å¤Ÿæ”¯æŒå¤šè¿›ç¨‹å’Œå­è¿›ç¨‹çš„å†…å­˜ç›‘æ§ï¼Œè‡³å°‘èƒ½è®©æˆ‘ä»¬äº†è§£å¤šè¿›ç¨‹ç¨‹åºè¿è¡Œçš„å†…å­˜æ¶ˆè€—äº†ã€‚</p>\n<p>å› ä¸ºç›´æ¥ä½¿ç”¨ gunicorn ä½œä¸º WSGI Serverï¼ŒæœåŠ¡ä»£ç å’Œâ€œå•è¿›ç¨‹æ— è£…é¥°å™¨â€ä¸€æ ·ï¼Œå°±ä¸åšèµ˜è¿°äº†ã€‚</p>\n<p><strong>ä¸‹é¢æ˜¯gunicornçš„é…ç½®æ–‡ä»¶å†…å®¹ï¼š</strong></p>\n<div class=\"gridsome-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># gunicorn_config.py</span>\n<span class=\"token keyword\">import</span> os\n<span class=\"token keyword\">import</span> gevent<span class=\"token punctuation\">.</span>monkey\ngevent<span class=\"token punctuation\">.</span>monkey<span class=\"token punctuation\">.</span>patch_all<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">import</span> multiprocessing\n\nloglevel <span class=\"token operator\">=</span> <span class=\"token string\">'debug'</span>\nbind <span class=\"token operator\">=</span> <span class=\"token string\">\"127.0.0.1:5000\"</span>\npidfile <span class=\"token operator\">=</span> <span class=\"token string\">\"logs/gunicorn.pid\"</span>\naccesslog <span class=\"token operator\">=</span> <span class=\"token string\">\"logs/access.log\"</span>\nerrorlog <span class=\"token operator\">=</span> <span class=\"token string\">\"logs/debug.log\"</span>\ndaemon <span class=\"token operator\">=</span> <span class=\"token boolean\">False</span>\n\nworkers <span class=\"token operator\">=</span> <span class=\"token number\">2</span>\nworker_class <span class=\"token operator\">=</span> <span class=\"token string\">'gevent'</span>\nx_forwarded_for_header <span class=\"token operator\">=</span> <span class=\"token string\">'X-FORWARDED-FOR'</span></code></pre></div>\n<p>æ‰§è¡Œ mprof run å‘½ä»¤ï¼Œè¿™é‡Œéœ€è¦æ·»åŠ ç›¸å…³çš„å‚æ•°ï¼Œä¸åŒçš„å‚æ•°ï¼Œç»“æœå›¾ç¤ºä¹Ÿä¼šç›¸åº”æœ‰æ‰€ä¸åŒï¼š</p>\n<div class=\"gridsome-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">mprof run gunicorn -c gunicorn_config.py profile_server:app\nmprof run --multiprocess gunicorn -c gunicorn_config.py profile_server:app\nmprof run --include-children gunicorn -c gunicorn_config.py profile_server:app\nmprof run --include-children --multiprocess gunicorn -c gunicorn_config.py profile_server:app</code></pre></div>\n<p>æ‰§è¡Œå‡ æ¬¡ curl è¯·æ±‚ä¹‹åï¼Œæ‰§è¡Œ mprof plot:</p>\n<div class=\"gridsome-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">mprof plot</code></pre></div>\n<p>æŒ‰ç…§æ­¥éª¤2çš„ä¸åŒå‘½ä»¤ï¼Œåˆ†åˆ«å±•ç¤ºå¯¹åº”çš„å›¾ï¼š</p>\n<p><strong>ä¸æ·»åŠ ä»»ä½•å¤šè¿›ç¨‹ç›¸å…³çš„å‚æ•°ï¼š</strong></p>\n<p><img src=\"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b06d170c-4405-4b68-8ece-4923f55c187f/multi_process_without_option.png\" alt=\"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b06d170c-4405-4b68-8ece-4923f55c187f/multi_process_without_option.png\"></p>\n<p>æˆ‘ä»¬å‘ç°åªæœ‰ä¸»è¿›ç¨‹çš„å†…å­˜æ¶ˆè€—ç»Ÿè®¡ã€‚</p>\n<p><strong>æ·»åŠ  --multiprocess å‚æ•°:</strong></p>\n<p><img src=\"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/1361f499-91f2-4fd6-af0b-445b1a59a5c6/multi_process_delay_with_multi_process_option.png\" alt=\"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/1361f499-91f2-4fd6-af0b-445b1a59a5c6/multi_process_delay_with_multi_process_option.png\"></p>\n<p>è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å°±èƒ½çœ‹åˆ°æˆ‘ä»¬å¤šè¿›ç¨‹æœåŠ¡çš„ä¸¤ä¸ªworkerçš„å†…å­˜æ¶ˆè€—äº†ã€‚</p>\n<p><strong>æ·»åŠ  --include-children å‚æ•°ï¼š</strong></p>\n<p><img src=\"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/3770c084-6dcc-40c1-96b0-d7bf13abbee6/multi_process_with_children_option.png\" alt=\"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/3770c084-6dcc-40c1-96b0-d7bf13abbee6/multi_process_with_children_option.png\"></p>\n<p>è¿™ç§æƒ…å†µï¼Œåªç»Ÿè®¡äº†å¤šè¿›ç¨‹æœåŠ¡çš„å…¨éƒ¨å†…å­˜æ¶ˆè€—ã€‚</p>\n<p><strong>æ·»åŠ  --include-children å’Œ --multiprocess å‚æ•°ï¼š</strong></p>\n<p><img src=\"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/e8770e8d-da4c-4843-ba71-575e79618278/multi_process_with_children_and_multi_process_option.png\" alt=\"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/e8770e8d-da4c-4843-ba71-575e79618278/multi_process_with_children_and_multi_process_option.png\"></p>\n<p>è¿™ç§æƒ…å†µï¼Œç»Ÿè®¡äº†å¤šè¿›ç¨‹æœåŠ¡çš„å…¨éƒ¨å†…å­˜æ¶ˆè€—ï¼Œä¹Ÿç»Ÿè®¡äº†ä¸¤ä¸ª worker è¿›ç¨‹çš„å†…å­˜æ¶ˆè€—ã€‚</p>\n<h2 id=\"æ€»ç»“\"><a href=\"#%E6%80%BB%E7%BB%93\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>æ€»ç»“</h2>\n<p>å¦‚æœåœ¨å¼€å‘ä¸­å¯¹ä»£ç çš„å†…å­˜æ¶ˆè€—æœ‰ç–‘æƒ‘ï¼Œæˆ–è€…æƒ³è¦æ›´å¿«å®šä½å‡ºç¨‹åºçš„æ€§èƒ½ç“¶é¢ˆï¼Œç»å¯¹å¯ä»¥å°è¯•ä½¿ç”¨ memory_profilerã€‚é™¤äº†ä¸Šé¢ä»‹ç»çš„å†…å®¹å’Œå®è·µï¼Œmemory_profiler è¿˜æ”¯æŒé€šè¿‡è®¾å®šå†…å­˜å¤§å°æ¥è¿›è¡Œdebugã€‚å¦‚æœæ„Ÿè§‰ memory_profiler çš„åŠŸèƒ½ä¸å¤Ÿå¼ºå¤§ï¼Œè¿˜å¯ä»¥ä½¿ç”¨å®ƒçš„ API æ¥è‡ªå·±æ‰©å±•å’Œå®ç°æ›´åŠ å¼ºå¤§çš„åŠŸèƒ½ã€‚</p>\n<h2 id=\"ç›¸å…³èµ„æ–™\"><a href=\"#%E7%9B%B8%E5%85%B3%E8%B5%84%E6%96%99\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>ç›¸å…³èµ„æ–™</h2>\n<p>memory_profiler çš„ PyPI é“¾æ¥: <a href=\"https://pypi.org/project/memory-profiler/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://pypi.org/project/memory-profiler/</a></p>\n<p>memory_profiler çš„ github é“¾æ¥: <a href=\"https://github.com/pythonprofilers/memory_profiler\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://github.com/pythonprofilers/memory_profiler</a></p>\n","humanTime":"20 March 2020","datetime":"Fri Mar 20 2020 12:00:00 UTC+00:00","timeToRead":12,"tags":[{"id":"Python","title":"Python","path":"/tags/python/"},{"id":"Profile","title":"Profile","path":"/tags/profile/"}],"category":{"id":"Technology","title":"Technology","path":"/category/technology/","belongsTo":{"totalCount":5,"edges":[{"node":{"title":"Neo4j schema ç´¢å¼•å¯¹æŸ¥è¯¢çš„å½±å“","path":"/posts/neo4j-schema/"}},{"node":{"title":"PySpark UDFçš„å‘ä¸ç»•","path":"/posts/py-spark-udf/"}},{"node":{"title":"Python memory profiler ä¸Šæ‰‹å®è·µ","path":"/posts/python-memory-profiler/"}},{"node":{"title":"(ç¿»è¯‘)Scalene - ä¸€ä¸ª Python çš„é«˜æ€§èƒ½ CPU å†…å­˜åˆ†æå™¨","path":"/posts/scalene-python-cpu/"}}]}},"author":[{"id":"insutanto","name":"è®¸è‡¾insutanto","image":{"type":"image","mimeType":"image/png","src":"/assets/static/author1.fac0014.f32b3d6345829593250abc8f3b922256.png","size":{"width":400,"height":374},"sizes":"(max-width: 400px) 100vw, 400px","srcset":["/assets/static/author1.fac0014.f32b3d6345829593250abc8f3b922256.png 400w"],"dataUri":"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 400 374' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-9ba158a90cb545680afa9a5f3c8a4b2f'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-9ba158a90cb545680afa9a5f3c8a4b2f)' width='400' height='374' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAA8CAYAAADWibxkAAAACXBIWXMAAAsTAAALEwEAmpwYAAAPRUlEQVRo3tVbB1hUxxa%2buwsCgtgLoiAqRkUTgxp8ir0HJYkFC3ZQ0YiKxoai2BsqCMEawW6sqIgIdo2YqNEYjf0ZWxJLTGKJyO6dk3Nm76zXdfHxlDWw33e%2bubvsXmbOnPL/58yVJOu8NBY%2bK4/SASUC5SuU7Si7UL5GiUYZiVIPpZAir7tXnn5plfF9lFiULii7UZ6iQA7kIcofKKtQiudHJYjJLrewOBklC0WPYlBEr/rM/PvH8tvui8UXQ7mlLEKvCFMJ/I/3sqIcUFwm31mBLcp5ZQEGswXy3dVqNXzUaNTXGrzWMvpMsQoa481cK0%2b/dMoYrFo8U5u1VqMxXeu0WovXigXQ%2bBilTH60gGNmu2/aYbHY9s0%2b4tfDevtDF7%2bG/NqvSV3wb%2b7Dijg76m1tbeizhPy0%2b2KHKis7J3aSqU2%2bf5fWsGLWMICbe2DGyN5wLiUe4P4hWDJ1CBzdMAfgzl72%2bMymrFmj%2btD3h9MNnQra2%2bQn829lbv42Njq%2b%2bPc8XIFd3gnw636QL%2b3gI1zb9eL6%2bm7I%2bimJwe9H9N98PZd%2bM5RuWLF8mXylgJ6q6P%2bSz%2b9bNR13Pg2endsKcCUZDBd3oGwH/YXt8PynJNDjtYGUcX23/tdjq6F4kULr6Yb%2bzXx0%2bSEGCAX0EwpAn2di52MnhvDFw610gBt7%2bIKzLiTxa7779DeSq7sYuoGMbgCeFcpeUwXBfGMB7RSz57m/RDFnoN2Eh0cAbqfDnoSpEDNhACydHgrLUBZP%2bRw2x4XDD8lxcARjQFriVDZ6QCc2LiQAqni4PqM0qNNp%2b1MoQCmQ5yEwBrsW6rxfq1pFSFkeCVu%2bDOcBcMqwQDi9YyHMGxcMwQGtwLeOF2CQg/IuJcCjXGkoW6oY/61v7erQsXUDiiMVbW1sxit8IW9D46oVy1GwiiroYPckqHNLcHZy4C5wfnc8PDq9EVZHjYSMTVGAQQ4WjO/P40Lqiim4%2b7EwvM8ncO/4WmjRoBZXwM3DCYwURgQJ79cVxxp5OiVibhcTmzRtRE84mxxniIkYyN5/rwLcPb4GXeAonNi2ANITpwE8OAyX05fCkB7tMCakwffbY7hy4LcDkDg7DOImhTBMjXJIt7akgOYOdgUoHZbK29jXRicUsPHbLfMpr%2bu7t2/M4OdUkCn1Yd4/uysOVs4JA/jjKM8CcHsvwN2DHA/8hRbyCAMfAiG4kLqIQeZJGNClDcHh%2bQXt7YLyPCBC3xdBMAp3EODZCf2ZnbE8tfHFKjLzi95wcM1Mivb8/Vczh8EKlITZw%2bHktmjo06E5hA8KYIfWzmLN639AFrDmkxY%2b9vkBDovdqVfZvSxcSl9CKY/Jl3YyAj84cqDz8OQGiJ88GOZjEKSAyFEhpsJt8eN5kNyFARO/x46sn8M8ypcmBTRQ7psvwJBQAkVsmDum33P0d0Y5H3ebKwP%2bu5vgLjw/vw1xwHZ%2bza3jl31Gl0BlIBhi8OS4/vMefqSA8crW6/I%2bEFACIebtDYL0HFo3i4KbbFLC5Z2Moz1ygavJHPmRhRAoEmgwi76LcHh%2beDApYAndE%2bNAviBE4uVZwNZmAtUEihRyfEppEO4dNBD0JSXggpmICZwb8ICYzkkR3EhlZB2ogKyRQZ%2bRAqZyC9DkAwvI5tW7ZLHCPMAh1JWJ%2bMjKrovF0/tTSTFs3rggRimRGCHyBYMSAxrmJ0psigXoBuoJBzes4/VQifwypkSMBSkm8oMpkG2KHQdRY4Pg/nfrZMQMz4M7t6LFrxXRP3/Vw2x0NF9tJbcyArtrqlYqd/HvH7dA5vlt8r7VMxghQwI%2bnCP8%2bQ3A4%2bOMxgt7FkPbxnVo8Wlenm4OeTb94ST5OH1ELypYCDKUnZ%2bu2LhwLLE%2bPVkBcf0%2bHVog0GkNE4d0YxMGd2EDurZBXlCdgM8NivzHN8/T5lnTb1qvJh%2bRwGgsLdrJ0Z4obMvK7i5%2bzk4FF6GScPH7yP95FsCAx578sBm%2bjhkDYX0/ZYO6fyz369SSCNH1aWE9y6rvhawybyoBCYpp4ZXcXBxx%2bJjyP2rkWxwfFS5UECiKI6IjQCRT5FeCnjENXktRXOCo0QX%2bOibHRw6C6pXdTtkXsA0kBUrG5oqU1yxBg4vjPonU1cWlVLFoDHg3pVebGmz9gtEyQWL0e9PiReSnkdIi5n8OlDIp9T08Ki%2bfMdS8epyKUsGs5pB7LxudTmrl%2b6HpfVri1JwUPnnlR6PRPJBe7foYMGSbmhxJiyYwxAC81qdevNnIhGU08K7GO0bILdR9hDsoHla1hKLOTpr6H1bV1qtVVRs9vr8GkQj//FRStKWvf6laeJaq%2bmvq8ogdpGrwjiURBIR47U9WLV4IL43dPciIBCkIUt0lylTu%2bZ21soFFja5bMEqLuVmHnFyHKUynYnsxqqKnLFno%2bkhm3R%2bShFnDcZEHTKYvkCCHyKiczYgDzF1IdU/RJRqX666A5j8WI%2b9ZvHT%2bz4dVGyF0bYVSxNJ3HeztPlPaVuqOj8XFSxY6QeEhAUD1ARLadb7zuPiDa2eaSuca1fdV9xWK/hPFNTtsgPhDKl7UmV8XK%2bwkYQbi17ie7BXgUa5021VzRwAyr9Of92h3//ukGCpY3sTcnNapTYPJ6JO98cbN8KvuKCeNO6s1mE3wtUKLUhQHbRrVht8y1hjZH1pEWsJUsCtg%2b4rFWFCCsIK5lqwA7yF1bF1fXKMLA8kLoqZ7YegfVPWQEmeHmd67IG19uiUunLeo1s0fZTibHAfXD3wFVJq%2beTgBftgZCynLJz9Gd2CoTdHpydHi1YKT4GOp4kUgdcVkXgyx5C7ZKEFYwT2UEmorqOHpbloMAqzX1g1mjOylJeUE%2bjfRmpT4RVCHbcTLMQM8q%2b1VWR7Vv6N8OX2pgSO32%2bl6/JuBandIZtiNQwmsbePaOZn0a5WQnZu8RgGmZgvKIHMr8HQvq45ldpGh3VMGB/pNozdozba446%2bNG85ThvfIQIwOsZNCYEP0aP2G6DGGi3sWs79/3Mooj/%2bUukhOXzmNURX39xPrWcO6Xm%2bsBLFgjdIez%2bHvmPSi2XpQbQEInkQ80Hl7VQpEKz5DwTa0V/tQ86yPOx8a2rP94bEDOxPLDFNnAbv2zT6a49e07uM9CVPg6r5lQAwtY1OUjEGL8ciNIxUvqXIze1RfPjEbCztqJVEHW0qNVWjShZ0Kip2tgOn71MNTG3j3adYXfe7iZ22Qp9QuU6KoX9d2jSbNGd33PDVcIod2Bwz4T/DvC0SAUJtP%2baKFnUagRRzau3Ja5r1v1/JaHvy2n4l%2bHkFYKmJaiNrvQoQb9KHJLpseastr8aHd1lK5HV02kxjnnaMr9ed3x%2btPbF0g/3xwBY9lR9bPhi8jB2UGfOwrlyjqfBV/liR5e1Xmqy5ga6OZPDTQ3E88alWr2BEj9y9UzX12bqvMlBL3KcwW73jhwgqEApbRBAF%2b5EEvduLADCqxI9gycGRJm3b3gIw0Ww%2bPMgxUlqOyO%2bIbaNPQG9xcStJ95ovF8xG1IhVyctAgj7cByBRWUVIyntyC7YsjZF7EvJoMZGqlihc2HXN5hwowjwMSblI3XoW%2bsUdGBVAvguYpUyZLnBMGo4I7UIZ76lu7%2bq33PFzTypUpEUmNrFci4fSwXpJRqyChaesUrtAehYMf5PSM8jev9SOvb%2bJTUwmE2n9DARcRYtPOlURafV/hGzL6v%2bHBiXXQt2MLKOTosF8yHrJornAJu5ygYPNu71Dhe5za3k43Mjf8h8jjs01tVlSArPxPwgNOo/t3XMXb6leSs8gCfs1YDdUqlSci42dpUbS5bmVL6tBqtTniCGgJUfQ75P/6W0cSeauL43cMhIsmD37jVPg2SlD%2b312k4%2bHX9i8n06csRdmKkCYpyJfmjllN6%2bhgZ4NpV/smROqlGn9972p6weK4C2CqObZx7jsNgsqROhMoipsU8pwC37Nz26iZqqcKE34%2bW%2bEFto4O9lKbRt5vRpIwMHIF2BewXUT/MGJIVwOaPaNuDj/Tg9r%2b5dgqcCro8M6zAeZ21rTe%2b8Z5XElmvNKMm4NUnuoTpd%2b6kFrPu4rUr1NLHgMihwa2RvyMux1lQADERCeHguDf57ZCjSruOYWzb7HzxntX8XCF/atnsE0Lx8KZHbG8tqjQaT0dwhDApnAhR52aCP3fr8Yf1cC8GsIVED4oICQmYgARIz3V8kURgzc70Qpa%2bXpbOuiYqyKCLHIUjkJ5lelaChVXGBVa6TNkrpQdauZK1cjezlZCisxv0qB29ZmInoi%2b6jHQMFMcoMYm%2bl%2bPT5paPROIe1Pj5PC62RzVGeE55vxb6XpCeshS02i%2bGAc0RI3fstevRYJRXmhxJR1eEgoQdTxezLh/iAiH1RUgsszEId0ASRm3POog60kB9w8Zoo3HbYKU2JU71SKEvlwB7q6lNvMjLjfTDOqeXpZiAWMHdrK6CwgF0HkCyj7KPHghldwSER49X%2bCSq10kxM9cAZ3b%2bm7k9btrKXp1NfeFAjpbXQFC%2bAErhOJkifwMAVolNVNRQZtprv7NfbS5ZQCEmLgCggNapRP8xUUb1G1t4QJDe/tb1QUEzyji7AjX0df5maNLO03mHxnanf4ekOvF0hcKaH2YTnIqCoCXg%2bABCPRvYmUFGM2fzg/S8RoyeX7S5OoumTJRnRqVqZfopKBWTS4qwMgGe37aNIUfZ72SbLIAU2//HRAigS8qubkYzxGj33MkeveAns4eU7iieRK%2bF1XgXHld3ruUKwCh5BJqayO/Nij9PcYxAO4E7UiZkkWtSomFArw83XAOqTz48XSMbtnz02Z0lNbTKi30D6p6cH9CMjFYOfGl54GHWlg0AWSFVGGxduATGaBuTU%2be%2b/nu39mrv5i2mAjaSiPp8dGii1itY1Rt3rigx/DHUUJdpASZiqQYgBgdbyV2pmQAZg0RPUJUAOMKoIIHxqT%2bXVpTRae61fqF/s18pDlj%2bvEbV3AtNf/4pnnGY%2b1UEXp4BC6lLZGRlPDH3zQvngzLqRiklx%2bby1bQBfiInEPGmEOELPP45nmk8Fk0N3SNd3J4SoOLHYYRP2NhxMAHsRMHPlEOMFmVBKnv71q6uPHZAuQACM9PS8Yn0/6V4zPuSnkpAif3DY7pkvHJUHoUdhPKGsn4aGy8ws6In09HmYwyUTI%2bBzheJfR%2bkmQ8DjdDaX0tRFmMkojBleoRO5v61LyKgfh7ZH1UyKyUW6b/D5iHXD7Pi%2bNmAAAAAElFTkSuQmCC' /%3e%3c/svg%3e"},"path":"/author/insutanto/"}]}}]}},"context":{"recordId":"034fd3663bfdd3af5ed25099bc8da249","tags":["Python","Scrapy","Distributed"]}}